2025-06-02 00:07:55.681 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 00:07:56.284 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 00:07:56.289 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 00:07:56.290 +02:00 [INF] Hosting environment: Development
2025-06-02 00:07:56.291 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 00:08:03.315 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/brands - null null
2025-06-02 00:08:03.625 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 00:08:03.704 +02:00 [INF] Route matched with {action = "GetAll", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Brands.Models.BrandSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams) on controller PulseERP.API.Controllers.BrandsController (PulseERP.API).
2025-06-02 00:08:06.082 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 00:08:07.535 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Brands] AS [b]
2025-06-02 00:08:08.024 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[CreatedAt], [b0].[IsActive], [b0].[Name], [b0].[UpdatedAt], [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
FROM (
    SELECT [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
    FROM [Brands] AS [b]
    ORDER BY [b].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
LEFT JOIN [Products] AS [p] ON [b0].[Id] = [p].[BrandId1]
ORDER BY [b0].[Name], [b0].[Id]
2025-06-02 00:08:08.132 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Brands.Models.BrandSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 00:08:08.238 +02:00 [INF] Executed action PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API) in 4524.4522ms
2025-06-02 00:08:08.247 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 00:08:08.285 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/brands - 200 null application/json; charset=utf-8 4973.5912ms
2025-06-02 00:08:54.676 +02:00 [INF] Application is shutting down...
2025-06-02 17:11:29.714 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 17:11:30.878 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 17:11:30.883 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 17:11:30.884 +02:00 [INF] Hosting environment: Development
2025-06-02 17:11:30.885 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 17:12:20.391 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 17:12:20.602 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 212.2326ms
2025-06-02 17:12:21.771 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 17:12:22.326 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 556.0024ms
2025-06-02 17:12:37.781 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-06-02 17:12:37.871 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-06-02 17:12:37.903 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Users.Models.UserSummary]]]] GetAll(PulseERP.Abstractions.Common.Filters.UserFilter) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 17:12:39.162 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 17:12:40.187 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2025-06-02 17:12:40.370 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
ORDER BY [u].[LastName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-02 17:12:40.403 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Users.Models.UserSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 17:12:40.515 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 2605.2314ms
2025-06-02 17:12:40.516 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-06-02 17:12:40.531 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 2750.698ms
2025-06-02 17:14:47.839 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/register - application/json 156
2025-06-02 17:14:47.862 +02:00 [INF] Executing endpoint 'AuthenticationController.Register (PulseERP.API)'
2025-06-02 17:14:47.885 +02:00 [INF] Route matched with {action = "Register", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Register(PulseERP.Domain.Security.DTOs.RegisterRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 17:14:48.030 +02:00 [INF] Executed action AuthenticationController.Register (PulseERP.API) in 143.673ms
2025-06-02 17:14:48.031 +02:00 [INF] Executed endpoint 'AuthenticationController.Register (PulseERP.API)'
2025-06-02 17:14:48.048 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Deserialization of types without a parameterless constructor, a singular parameterized constructor, or a parameterized constructor annotated with 'JsonConstructorAttribute' is not supported. Type 'PulseERP.Domain.ValueObjects.Adresses.EmailAddress'. Path: $.email | LineNumber: 3 | BytePositionInLine: 12.
 ---> System.NotSupportedException: Deserialization of types without a parameterless constructor, a singular parameterized constructor, or a parameterized constructor annotated with 'JsonConstructorAttribute' is not supported. Type 'PulseERP.Domain.ValueObjects.Adresses.EmailAddress'.
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(ReadStack& state, Utf8JsonReader& reader, Exception innerException)
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException_DeserializeNoConstructor(JsonTypeInfo typeInfo, Utf8JsonReader& reader, ReadStack& state)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.TryReadAsObject(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, Object& value)
   at System.Text.Json.Serialization.Converters.LargeObjectWithParameterizedConstructorConverter`1.ReadAndCacheConstructorArgument(ReadStack& state, Utf8JsonReader& reader, JsonParameterInfo jsonParameterInfo)
   at System.Text.Json.Serialization.Converters.ObjectWithParameterizedConstructorConverter`1.ReadConstructorArgumentsWithContinuation(ReadStack& state, Utf8JsonReader& reader, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Converters.ObjectWithParameterizedConstructorConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 17:14:48.078 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 17:14:48.088 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/register - 500 null application/problem+json; charset=utf-8 249.8638ms
2025-06-02 17:16:34.904 +02:00 [INF] Application is shutting down...
2025-06-02 17:41:37.845 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 17:41:38.519 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 17:41:38.525 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 17:41:38.527 +02:00 [INF] Hosting environment: Development
2025-06-02 17:41:38.527 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 17:42:39.930 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 17:42:40.064 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 135.1083ms
2025-06-02 17:42:40.678 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 17:42:40.940 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 263.1003ms
2025-06-02 17:43:39.020 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 17:43:39.031 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 11.6778ms
2025-06-02 17:43:39.295 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 17:43:39.377 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.2928ms
2025-06-02 17:44:41.144 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/register - application/json 156
2025-06-02 17:44:41.210 +02:00 [INF] Executing endpoint 'AuthenticationController.Register (PulseERP.API)'
2025-06-02 17:44:41.236 +02:00 [INF] Route matched with {action = "Register", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Register(PulseERP.Domain.Security.DTOs.RegisterRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 17:44:41.452 +02:00 [INF] Register attempt from IP , UA , email koumeil.messaoudi@outlook.com, at "2025-06-02T17:44:41.4519060".
2025-06-02 17:44:42.305 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 17:44:43.157 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 17:44:43.662 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" created at "2025-06-02T17:44:43.6617540+02:00".
2025-06-02 17:44:43.785 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FailedLoginAttempts], [FirstName], [LastLoginDate], [LastName], [LockoutEnd], [PasswordHash], [PasswordLastChangedAt], [Phone], [RequirePasswordChange], [RoleName], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-06-02 17:44:45.491 +02:00 [INF] Email '🎉 Welcome to Pulse ERP!' sent to koumeil.messaoudi@outlook.com at "2025-06-02T15:44:45.4910150Z".
2025-06-02 17:44:45.492 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" (koumeil.messaoudi@outlook.com) registered successfully from  at "2025-06-02T17:44:45.4923860".
2025-06-02 17:44:45.494 +02:00 [INF] Generating access token for user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 17:44:45.527 +02:00 [INF] Generating refresh token for user "47d4681f-115c-4819-a3cf-b0c3c5085363" from IP 
2025-06-02 17:44:45.582 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__tokenType_1='?' (DbType = Int32), @__nowUtc_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = @__tokenType_1 AND [r].[Revoked] IS NULL AND [r].[Expires] > @__nowUtc_2
2025-06-02 17:44:45.639 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-02 17:44:45.641 +02:00 [INF] "Refresh" token added for user "47d4681f-115c-4819-a3cf-b0c3c5085363", expires "2025-06-09T17:44:45.5290370" at "2025-06-02T17:44:45.6411520".
2025-06-02 17:44:45.650 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Security.DTOs.AuthResponse, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 17:44:45.683 +02:00 [INF] Executed action AuthenticationController.Register (PulseERP.API) in 4441.0088ms
2025-06-02 17:44:45.683 +02:00 [INF] Executed endpoint 'AuthenticationController.Register (PulseERP.API)'
2025-06-02 17:44:45.692 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/register - 200 null application/json; charset=utf-8 4547.6344ms
2025-06-02 17:45:13.924 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 17:45:13.937 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 17:45:13.944 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 17:45:13.973 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T17:45:13.9735060".
2025-06-02 17:45:14.005 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 17:45:14.493 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 548.3518ms
2025-06-02 17:45:14.494 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 17:45:14.505 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Password must be 8-20 characters long.
   at PulseERP.Domain.ValueObjects.Passwords.Password.Create(String plain) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Passwords/Password.cs:line 37
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 130
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method297(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 17:45:14.531 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 17:45:14.537 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 613.1146ms
2025-06-02 17:45:35.103 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 17:45:35.105 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 17:45:35.106 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 17:45:35.117 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T17:45:35.1174810".
2025-06-02 17:45:35.121 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 14.5495ms
2025-06-02 17:45:35.121 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 17:45:35.122 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Deserialization of types without a parameterless constructor, a singular parameterized constructor, or a parameterized constructor annotated with 'JsonConstructorAttribute' is not supported. Type 'PulseERP.Domain.Entities.User'. Path: $ | LineNumber: 0 | BytePositionInLine: 1.
 ---> System.NotSupportedException: Deserialization of types without a parameterless constructor, a singular parameterized constructor, or a parameterized constructor annotated with 'JsonConstructorAttribute' is not supported. Type 'PulseERP.Domain.Entities.User'.
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(ReadStack& state, Utf8JsonReader& reader, Exception innerException)
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException_DeserializeNoConstructor(JsonTypeInfo typeInfo, Utf8JsonReader& reader, ReadStack& state)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Deserialize(Utf8JsonReader& reader, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at PulseERP.Infrastructure.Repositories.UserRepository.FindByEmailAsync(EmailAddress email) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 131
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 122
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method297(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 17:45:35.126 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 17:45:35.127 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 23.9569ms
2025-06-02 17:59:20.397 +02:00 [INF] Application is shutting down...
2025-06-02 18:00:13.479 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 18:00:15.237 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 18:00:15.249 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 18:00:15.252 +02:00 [INF] Hosting environment: Development
2025-06-02 18:00:15.253 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 18:02:22.567 +02:00 [INF] Application is shutting down...
2025-06-02 18:02:55.137 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 18:02:56.296 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 18:02:56.357 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 18:02:56.358 +02:00 [INF] Hosting environment: Development
2025-06-02 18:02:56.359 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 18:03:04.657 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 18:03:04.920 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 263.6569ms
2025-06-02 18:03:05.905 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 18:03:06.469 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 567.3802ms
2025-06-02 18:03:12.607 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 18:03:12.721 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:03:12.776 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:03:14.354 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:03:14.3544010".
2025-06-02 18:03:14.691 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1906.4655ms
2025-06-02 18:03:14.692 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:03:14.707 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: The JSON value could not be converted to System.String. Path: $.Email | LineNumber: 0 | BytePositionInLine: 55.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'StartObject' as a string.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedString(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.GetString()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Deserialize(Utf8JsonReader& reader, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at PulseERP.Infrastructure.Repositories.UserRepository.FindByEmailAsync(EmailAddress email) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 154
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 122
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 18:03:14.761 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:03:14.809 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 2201.4225ms
2025-06-02 18:05:23.467 +02:00 [INF] Application is shutting down...
2025-06-02 18:05:54.478 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 18:05:55.393 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 18:05:55.422 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 18:05:55.424 +02:00 [INF] Hosting environment: Development
2025-06-02 18:05:55.426 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 18:06:04.154 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 18:06:04.436 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 290.5787ms
2025-06-02 18:06:04.772 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 18:06:05.252 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 481.4718ms
2025-06-02 18:06:20.840 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 18:06:20.899 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:06:20.931 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:06:21.217 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:06:21.2168570".
2025-06-02 18:06:22.472 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 18:06:23.798 +02:00 [INF] Executed DbCommand (96ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 18:06:24.546 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 3607.8548ms
2025-06-02 18:06:24.548 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:06:24.560 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Password must be 8-20 characters long.
   at PulseERP.Domain.ValueObjects.Passwords.Password.Create(String plain) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Passwords/Password.cs:line 37
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 130
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 18:06:24.601 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:06:24.643 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 3803.3567ms
2025-06-02 18:11:00.959 +02:00 [INF] Application is shutting down...
2025-06-02 18:11:19.187 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 18:11:19.774 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 18:11:19.778 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 18:11:19.779 +02:00 [INF] Hosting environment: Development
2025-06-02 18:11:19.779 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 18:11:26.275 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 18:11:26.547 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 275.602ms
2025-06-02 18:11:26.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 18:11:27.189 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 342.0154ms
2025-06-02 18:11:33.766 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 18:11:33.848 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:11:33.881 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:11:34.267 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:11:34.2667860".
2025-06-02 18:11:36.615 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 18:11:36.813 +02:00 [INF] User "a7dcc2c4-5904-4579-8292-14bb8cb9f420" (koumeil.messaoudi@outlook.com) successfully logged in from ::1 at "2025-06-02T18:11:35.0129510".
2025-06-02 18:11:36.817 +02:00 [INF] Generating access token for user "a7dcc2c4-5904-4579-8292-14bb8cb9f420"
2025-06-02 18:11:36.852 +02:00 [INF] Generating refresh token for user "a7dcc2c4-5904-4579-8292-14bb8cb9f420" from IP ::1
2025-06-02 18:11:38.093 +02:00 [INF] Executed DbCommand (276ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__tokenType_1='?' (DbType = Int32), @__nowUtc_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = @__tokenType_1 AND [r].[Revoked] IS NULL AND [r].[Expires] > @__nowUtc_2
2025-06-02 18:11:38.362 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-02 18:11:38.379 +02:00 [INF] "Refresh" token added for user "a7dcc2c4-5904-4579-8292-14bb8cb9f420", expires "2025-06-09T18:11:36.8541490" at "2025-06-02T18:11:38.3792060".
2025-06-02 18:11:38.391 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Security.DTOs.AuthResponse, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 18:11:38.440 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 4550.8608ms
2025-06-02 18:11:38.441 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:11:38.460 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 200 null application/json; charset=utf-8 4693.6602ms
2025-06-02 18:11:56.233 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:11:56.240 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:11:56.241 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:11:56.249 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:11:56.2493080".
2025-06-02 18:11:56.642 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:11:56.2512560" (IP: ::1).
2025-06-02 18:11:56.723 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:11:56.2512560". FailedAttempts: 1
2025-06-02 18:11:56.726 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 484.5576ms
2025-06-02 18:11:56.726 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:11:56.739 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:11:56.751 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 517.9452ms
2025-06-02 18:11:58.741 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:11:58.744 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:11:58.744 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:11:58.756 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:11:58.7563220".
2025-06-02 18:11:58.936 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:11:58.7580440" (IP: ::1).
2025-06-02 18:11:58.949 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:11:58.7580440". FailedAttempts: 1
2025-06-02 18:11:58.949 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 204.9212ms
2025-06-02 18:11:58.949 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:11:58.950 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:11:58.950 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 209.7033ms
2025-06-02 18:12:00.063 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:12:00.063 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:00.064 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:12:00.065 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:12:00.0652590".
2025-06-02 18:12:00.272 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:00.0881570" (IP: ::1).
2025-06-02 18:12:00.273 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:00.0881570". FailedAttempts: 1
2025-06-02 18:12:00.274 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 209.8533ms
2025-06-02 18:12:00.274 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:00.275 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:12:00.275 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 212.2011ms
2025-06-02 18:12:01.602 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:12:01.603 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:01.604 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:12:01.606 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:12:01.6066260".
2025-06-02 18:12:01.818 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:01.6378680" (IP: ::1).
2025-06-02 18:12:01.818 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:01.6378680". FailedAttempts: 1
2025-06-02 18:12:01.819 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 213.5074ms
2025-06-02 18:12:01.819 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:01.820 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:12:01.820 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 217.5256ms
2025-06-02 18:12:06.526 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:12:06.526 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:06.527 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:12:06.528 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:12:06.5280640".
2025-06-02 18:12:06.724 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:06.5379780" (IP: ::1).
2025-06-02 18:12:06.725 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:06.5379780". FailedAttempts: 1
2025-06-02 18:12:06.725 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 198.164ms
2025-06-02 18:12:06.725 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:06.726 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:12:06.726 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 200.5992ms
2025-06-02 18:12:09.425 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:12:09.426 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:09.426 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:12:09.426 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:12:09.4269210".
2025-06-02 18:12:09.624 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:09.4377530" (IP: ::1).
2025-06-02 18:12:09.625 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:09.4377530". FailedAttempts: 1
2025-06-02 18:12:09.625 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 199.3461ms
2025-06-02 18:12:09.626 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:09.626 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:12:09.626 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 200.8035ms
2025-06-02 18:12:10.323 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:12:10.323 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:10.324 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:12:10.325 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:12:10.3250680".
2025-06-02 18:12:10.548 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:10.3477590" (IP: ::1).
2025-06-02 18:12:10.549 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:10.3477590". FailedAttempts: 1
2025-06-02 18:12:10.550 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 225.7299ms
2025-06-02 18:12:10.550 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:10.551 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:12:10.551 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 228.4062ms
2025-06-02 18:12:11.151 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:12:11.152 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:11.152 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:12:11.153 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:12:11.1534910".
2025-06-02 18:12:11.380 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:11.1546600" (IP: ::1).
2025-06-02 18:12:11.381 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:11.1546600". FailedAttempts: 1
2025-06-02 18:12:11.381 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 228.7026ms
2025-06-02 18:12:11.381 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:11.382 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:12:11.382 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 230.9353ms
2025-06-02 18:12:11.757 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:12:11.757 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:11.757 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:12:11.758 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:12:11.7584150".
2025-06-02 18:12:12.433 +02:00 [WRN] Password check failed for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:11.7595120" (IP: ::1).
2025-06-02 18:12:12.434 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:12:11.7595120". FailedAttempts: 1
2025-06-02 18:12:12.435 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 678.04ms
2025-06-02 18:12:12.437 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:12:12.438 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:12:12.439 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 681.9265ms
2025-06-02 18:25:54.896 +02:00 [INF] Application is shutting down...
2025-06-02 18:26:23.305 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 18:26:24.078 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 18:26:24.083 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 18:26:24.084 +02:00 [INF] Hosting environment: Development
2025-06-02 18:26:24.085 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 18:26:30.902 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:26:31.146 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:31.188 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:26:31.541 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:26:31.5414780"
2025-06-02 18:26:32.508 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="c05409c7-ddd3-492f-9f06-b7f04eae0059", IP=::1, At="2025-06-02T18:26:31.8963800", Attempts=1
2025-06-02 18:26:33.819 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 18:26:34.318 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="c05409c7-ddd3-492f-9f06-b7f04eae0059" at "2025-06-02T18:26:31.8963800". FailedAttempts=1
2025-06-02 18:26:34.330 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 3133.8516ms
2025-06-02 18:26:34.347 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:34.376 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:26:34.438 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 3540.2177ms
2025-06-02 18:26:39.725 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:26:39.759 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:39.760 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:26:39.765 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:26:39.7655780"
2025-06-02 18:26:40.245 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="d379cacb-0e6f-4a14-bd45-0d42d40aa183", IP=::1, At="2025-06-02T18:26:39.7679680", Attempts=1
2025-06-02 18:26:40.339 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="d379cacb-0e6f-4a14-bd45-0d42d40aa183" at "2025-06-02T18:26:39.7679680". FailedAttempts=1
2025-06-02 18:26:40.341 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 580.3868ms
2025-06-02 18:26:40.342 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:40.344 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:26:40.345 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 621.2602ms
2025-06-02 18:26:43.605 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:26:43.611 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:43.611 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:26:43.624 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:26:43.6248070"
2025-06-02 18:26:43.824 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="9da2c920-fbff-40e1-8e8f-414fa57c0241", IP=::1, At="2025-06-02T18:26:43.6259010", Attempts=1
2025-06-02 18:26:43.842 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="9da2c920-fbff-40e1-8e8f-414fa57c0241" at "2025-06-02T18:26:43.6259010". FailedAttempts=1
2025-06-02 18:26:43.843 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 230.7537ms
2025-06-02 18:26:43.843 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:43.843 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:26:43.844 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 238.9866ms
2025-06-02 18:26:45.295 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:26:45.296 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:45.296 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:26:45.298 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:26:45.2982450"
2025-06-02 18:26:45.573 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="dddb2a04-1efd-4eb7-8c4d-8fc947d1b1b2", IP=::1, At="2025-06-02T18:26:45.3057810", Attempts=1
2025-06-02 18:26:45.575 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="dddb2a04-1efd-4eb7-8c4d-8fc947d1b1b2" at "2025-06-02T18:26:45.3057810". FailedAttempts=1
2025-06-02 18:26:45.576 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 278.7982ms
2025-06-02 18:26:45.576 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:45.577 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:26:45.577 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 282.0399ms
2025-06-02 18:26:46.807 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:26:46.807 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:46.808 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:26:46.808 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:26:46.8088460"
2025-06-02 18:26:47.041 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="771b850f-aeac-45bd-b6e2-ec80b2ec5e93", IP=::1, At="2025-06-02T18:26:46.8098290", Attempts=1
2025-06-02 18:26:47.043 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="771b850f-aeac-45bd-b6e2-ec80b2ec5e93" at "2025-06-02T18:26:46.8098290". FailedAttempts=1
2025-06-02 18:26:47.043 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 235.4914ms
2025-06-02 18:26:47.044 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:26:47.044 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:26:47.045 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 238.0504ms
2025-06-02 18:26:50.856 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 18:26:50.954 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 98.1466ms
2025-06-02 18:26:51.448 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 18:26:51.679 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 230.7049ms
2025-06-02 18:27:04.191 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:27:04.191 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:04.192 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:27:04.192 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:04.1927430"
2025-06-02 18:27:04.393 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="99c6c61f-6600-4353-b0ac-cab8fc2ef28e", IP=::1, At="2025-06-02T18:27:04.2054000", Attempts=1
2025-06-02 18:27:04.394 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="99c6c61f-6600-4353-b0ac-cab8fc2ef28e" at "2025-06-02T18:27:04.2054000". FailedAttempts=1
2025-06-02 18:27:04.395 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 203.3006ms
2025-06-02 18:27:04.395 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:04.396 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:27:04.396 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 205.0012ms
2025-06-02 18:27:11.154 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:27:11.154 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:11.154 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:27:11.155 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:11.1552900"
2025-06-02 18:27:11.338 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="4a6b7063-a772-45d8-b6e6-8530c621104d", IP=::1, At="2025-06-02T18:27:11.1561240", Attempts=1
2025-06-02 18:27:11.339 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="4a6b7063-a772-45d8-b6e6-8530c621104d" at "2025-06-02T18:27:11.1561240". FailedAttempts=1
2025-06-02 18:27:11.340 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 185.667ms
2025-06-02 18:27:11.340 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:11.341 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:27:11.341 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 187.4613ms
2025-06-02 18:27:15.694 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 18:27:15.695 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:15.695 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:27:15.696 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:15.6961020"
2025-06-02 18:27:15.894 +02:00 [INF] User "dd708352-f6c0-4210-9f8b-97d1c399b8e5" (koumeil.messaoudi@outlook.com) successfully logged in from IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:15.7106120", Duration=197.811ms
2025-06-02 18:27:15.895 +02:00 [INF] Generating access token for user "dd708352-f6c0-4210-9f8b-97d1c399b8e5"
2025-06-02 18:27:15.922 +02:00 [INF] Generating refresh token for user "dd708352-f6c0-4210-9f8b-97d1c399b8e5" from IP ::1
2025-06-02 18:27:16.740 +02:00 [INF] Executed DbCommand (58ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__tokenType_1='?' (DbType = Int32), @__nowUtc_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = @__tokenType_1 AND [r].[Revoked] IS NULL AND [r].[Expires] > @__nowUtc_2
2025-06-02 18:27:16.974 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-02 18:27:16.988 +02:00 [INF] "Refresh" token added for user "dd708352-f6c0-4210-9f8b-97d1c399b8e5", expires "2025-06-09T18:27:15.9233750" at "2025-06-02T18:27:16.9885010".
2025-06-02 18:27:16.990 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Security.DTOs.AuthResponse, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 18:27:17.007 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1312.0168ms
2025-06-02 18:27:17.007 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:17.011 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 200 null application/json; charset=utf-8 1317.1333ms
2025-06-02 18:27:21.684 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:27:21.685 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:21.685 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:27:21.686 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:21.6866110"
2025-06-02 18:27:21.883 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="875898ee-bfd8-4315-b324-aeec456bbf3f", IP=::1, At="2025-06-02T18:27:21.7044140", Attempts=1
2025-06-02 18:27:21.884 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="875898ee-bfd8-4315-b324-aeec456bbf3f" at "2025-06-02T18:27:21.7044140". FailedAttempts=1
2025-06-02 18:27:21.884 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 198.9477ms
2025-06-02 18:27:21.884 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:21.885 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:27:21.885 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 200.8201ms
2025-06-02 18:27:24.395 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:27:24.396 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:24.396 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:27:24.396 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:24.3967390"
2025-06-02 18:27:24.582 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="65bc20e8-90b3-46bd-aa44-054e2f16f6b4", IP=::1, At="2025-06-02T18:27:24.4041790", Attempts=1
2025-06-02 18:27:24.583 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="65bc20e8-90b3-46bd-aa44-054e2f16f6b4" at "2025-06-02T18:27:24.4041790". FailedAttempts=1
2025-06-02 18:27:24.583 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 187.7129ms
2025-06-02 18:27:24.584 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:24.584 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:27:24.584 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 189.0308ms
2025-06-02 18:27:26.348 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:27:26.348 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:26.349 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:27:26.349 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:26.3496810"
2025-06-02 18:27:26.583 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="2e9802aa-2e13-4a88-a6da-f5bd26465fa1", IP=::1, At="2025-06-02T18:27:26.3709860", Attempts=1
2025-06-02 18:27:26.584 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="2e9802aa-2e13-4a88-a6da-f5bd26465fa1" at "2025-06-02T18:27:26.3709860". FailedAttempts=1
2025-06-02 18:27:26.585 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 235.8474ms
2025-06-02 18:27:26.585 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:26.585 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:27:26.585 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 237.3293ms
2025-06-02 18:27:27.824 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:27:27.824 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:27.825 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:27:27.826 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:27.8259860"
2025-06-02 18:27:28.005 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="a052824e-1a08-4b72-b9ed-e71aef938ae1", IP=::1, At="2025-06-02T18:27:27.8267720", Attempts=1
2025-06-02 18:27:28.006 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="a052824e-1a08-4b72-b9ed-e71aef938ae1" at "2025-06-02T18:27:27.8267720". FailedAttempts=1
2025-06-02 18:27:28.007 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 181.6871ms
2025-06-02 18:27:28.007 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:28.008 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:27:28.008 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 183.9015ms
2025-06-02 18:27:30.271 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:27:30.272 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:30.272 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:27:30.273 +02:00 [INF] Login START: Email=koumeil.messaoudi@outlook.com, IP=::1, UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36, At="2025-06-02T18:27:30.2733110"
2025-06-02 18:27:30.469 +02:00 [WRN] Login failed: Bad password for Email=koumeil.messaoudi@outlook.com, UserId="68b1a5d1-c686-48d1-b1aa-30a7ed77c501", IP=::1, At="2025-06-02T18:27:30.2741340", Attempts=1
2025-06-02 18:27:30.470 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="68b1a5d1-c686-48d1-b1aa-30a7ed77c501" at "2025-06-02T18:27:30.2741340". FailedAttempts=1
2025-06-02 18:27:30.470 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 197.8632ms
2025-06-02 18:27:30.470 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:27:30.471 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:27:30.471 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 199.4272ms
2025-06-02 18:37:41.716 +02:00 [INF] Application is shutting down...
2025-06-02 18:38:05.553 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 18:38:06.054 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 18:38:06.058 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 18:38:06.059 +02:00 [INF] Hosting environment: Development
2025-06-02 18:38:06.059 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 18:38:27.284 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 18:38:27.473 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 190.0684ms
2025-06-02 18:38:28.059 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 18:38:28.347 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 288.4047ms
2025-06-02 18:38:52.523 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 18:38:52.576 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:38:52.606 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:38:52.855 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:38:52.8552580".
2025-06-02 18:38:54.495 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 18:38:54.673 +02:00 [INF] User "c7c750e3-dbf1-48f8-90e1-58cfcd76ca17" (koumeil.messaoudi@outlook.com) successfully logged in from ::1 at "2025-06-02T18:38:52.8552580".
2025-06-02 18:38:54.676 +02:00 [INF] Generating access token for user "c7c750e3-dbf1-48f8-90e1-58cfcd76ca17"
2025-06-02 18:38:54.711 +02:00 [INF] Generating refresh token for user "c7c750e3-dbf1-48f8-90e1-58cfcd76ca17" from IP ::1
2025-06-02 18:38:55.551 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__tokenType_1='?' (DbType = Int32), @__nowUtc_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = @__tokenType_1 AND [r].[Revoked] IS NULL AND [r].[Expires] > @__nowUtc_2
2025-06-02 18:38:55.805 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-02 18:38:55.817 +02:00 [INF] "Refresh" token added for user "c7c750e3-dbf1-48f8-90e1-58cfcd76ca17", expires "2025-06-09T18:38:54.7133410" at "2025-06-02T18:38:55.8170330".
2025-06-02 18:38:55.827 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Security.DTOs.AuthResponse, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 18:38:55.864 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 3252.2607ms
2025-06-02 18:38:55.864 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:38:55.875 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 200 null application/json; charset=utf-8 3352.612ms
2025-06-02 18:40:39.754 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:39.760 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:39.761 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:39.768 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:39.7680650".
2025-06-02 18:40:40.132 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:39.7680650". FailedAttempts: 1
2025-06-02 18:40:40.135 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 373.5759ms
2025-06-02 18:40:40.135 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:40.145 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:40.154 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 399.9485ms
2025-06-02 18:40:43.381 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:43.384 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:43.384 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:43.418 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:43.4184230".
2025-06-02 18:40:43.614 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:43.4184230". FailedAttempts: 1
2025-06-02 18:40:43.615 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 230.0287ms
2025-06-02 18:40:43.615 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:43.616 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:43.616 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 235.2907ms
2025-06-02 18:40:45.220 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:45.220 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:45.221 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:45.222 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:45.2224000".
2025-06-02 18:40:45.405 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:45.2224000". FailedAttempts: 1
2025-06-02 18:40:45.406 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 185.2601ms
2025-06-02 18:40:45.406 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:45.407 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:45.407 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 187.5087ms
2025-06-02 18:40:46.397 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:46.398 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:46.398 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:46.399 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:46.3994100".
2025-06-02 18:40:46.585 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:46.3994100". FailedAttempts: 1
2025-06-02 18:40:46.585 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 186.9055ms
2025-06-02 18:40:46.585 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:46.586 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:46.586 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 189.4609ms
2025-06-02 18:40:47.592 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:47.592 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:47.593 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:47.593 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:47.5936790".
2025-06-02 18:40:47.792 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:47.5936790". FailedAttempts: 1
2025-06-02 18:40:47.793 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 199.9515ms
2025-06-02 18:40:47.793 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:47.793 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:47.794 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 201.859ms
2025-06-02 18:40:48.597 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:48.599 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:48.599 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:48.600 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:48.6005990".
2025-06-02 18:40:48.806 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:48.6005990". FailedAttempts: 1
2025-06-02 18:40:48.806 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 206.7134ms
2025-06-02 18:40:48.807 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:48.807 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:48.807 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 210.0396ms
2025-06-02 18:40:49.406 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:49.406 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:49.407 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:49.408 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:49.4081180".
2025-06-02 18:40:49.587 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:49.4081180". FailedAttempts: 1
2025-06-02 18:40:49.588 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 180.8544ms
2025-06-02 18:40:49.588 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:49.589 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:49.589 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 183.5186ms
2025-06-02 18:40:50.184 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:50.184 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:50.184 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:50.185 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:50.1854650".
2025-06-02 18:40:50.387 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:50.1854650". FailedAttempts: 1
2025-06-02 18:40:50.387 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 202.6077ms
2025-06-02 18:40:50.387 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:50.388 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:50.388 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 204.0663ms
2025-06-02 18:40:50.912 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:40:50.912 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:50.912 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:40:50.913 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:40:50.9134510".
2025-06-02 18:40:51.101 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:40:50.9134510". FailedAttempts: 1
2025-06-02 18:40:51.102 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 189.6533ms
2025-06-02 18:40:51.102 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:40:51.103 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:40:51.103 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 191.4799ms
2025-06-02 18:46:40.468 +02:00 [INF] Application is shutting down...
2025-06-02 18:47:02.276 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 18:47:02.780 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 18:47:02.786 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 18:47:02.787 +02:00 [INF] Hosting environment: Development
2025-06-02 18:47:02.787 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 18:47:09.068 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 18:47:09.513 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 451.0469ms
2025-06-02 18:47:10.033 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 18:47:10.397 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 365.9048ms
2025-06-02 18:47:17.504 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:47:17.573 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:47:17.604 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:47:17.909 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:47:17.9089630".
2025-06-02 18:47:19.947 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 18:47:20.185 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:47:17.9089630". FailedAttempts: 1
2025-06-02 18:47:20.200 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 2585.8706ms
2025-06-02 18:47:20.201 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:47:20.224 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:47:20.266 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 2761.8913ms
2025-06-02 18:47:27.856 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 18:47:27.872 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:47:27.873 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:47:27.882 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:47:27.8824790".
2025-06-02 18:47:28.395 +02:00 [INF] User "4f64028e-7159-4655-ba4c-e284970b4fa9" (koumeil.messaoudi@outlook.com) successfully logged in from ::1 at "2025-06-02T18:47:27.8824790".
2025-06-02 18:47:28.399 +02:00 [INF] Generating access token for user "4f64028e-7159-4655-ba4c-e284970b4fa9"
2025-06-02 18:47:28.434 +02:00 [INF] Generating refresh token for user "4f64028e-7159-4655-ba4c-e284970b4fa9" from IP ::1
2025-06-02 18:47:29.372 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__tokenType_1='?' (DbType = Int32), @__nowUtc_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = @__tokenType_1 AND [r].[Revoked] IS NULL AND [r].[Expires] > @__nowUtc_2
2025-06-02 18:47:29.621 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-02 18:47:29.636 +02:00 [INF] "Refresh" token added for user "4f64028e-7159-4655-ba4c-e284970b4fa9", expires "2025-06-09T18:47:28.4368730" at "2025-06-02T18:47:29.6359050".
2025-06-02 18:47:29.639 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Security.DTOs.AuthResponse, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 18:47:29.659 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1786.2269ms
2025-06-02 18:47:29.660 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:47:29.680 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 200 null application/json; charset=utf-8 1824.1491ms
2025-06-02 18:48:15.141 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:48:15.145 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:15.145 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:48:15.174 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:48:15.1742150".
2025-06-02 18:48:15.411 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:48:15.1742150". FailedAttempts: 1
2025-06-02 18:48:15.412 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 266.6472ms
2025-06-02 18:48:15.412 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:15.413 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:48:15.413 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 272.9773ms
2025-06-02 18:48:16.686 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:48:16.687 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:16.687 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:48:16.687 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:48:16.6879060".
2025-06-02 18:48:16.883 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:48:16.6879060". FailedAttempts: 1
2025-06-02 18:48:16.883 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 196.1947ms
2025-06-02 18:48:16.883 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:16.884 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:48:16.884 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 197.6837ms
2025-06-02 18:48:18.078 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:48:18.079 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:18.079 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:48:18.080 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:48:18.0800390".
2025-06-02 18:48:18.302 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:48:18.0800390". FailedAttempts: 1
2025-06-02 18:48:18.303 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 223.908ms
2025-06-02 18:48:18.303 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:18.304 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:48:18.304 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 225.6028ms
2025-06-02 18:48:19.714 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:48:19.715 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:19.715 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:48:19.716 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:48:19.7161620".
2025-06-02 18:48:19.914 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:48:19.7161620". FailedAttempts: 1
2025-06-02 18:48:19.914 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 199.408ms
2025-06-02 18:48:19.915 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:19.915 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:48:19.916 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 201.647ms
2025-06-02 18:48:21.171 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:48:21.171 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:21.171 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:48:21.172 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:48:21.1726740".
2025-06-02 18:48:21.374 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:48:21.1726740". FailedAttempts: 1
2025-06-02 18:48:21.375 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 203.289ms
2025-06-02 18:48:21.375 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:21.375 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:48:21.376 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 205.124ms
2025-06-02 18:48:22.156 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 18:48:22.156 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:22.157 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 18:48:22.157 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T18:48:22.1577770".
2025-06-02 18:48:22.353 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com at "2025-06-02T18:48:22.1577770". FailedAttempts: 1
2025-06-02 18:48:22.353 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 196.3232ms
2025-06-02 18:48:22.353 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 18:48:22.354 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 18:48:22.354 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 197.98ms
2025-06-02 19:02:14.490 +02:00 [INF] Application is shutting down...
2025-06-02 19:06:46.758 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:06:47.415 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:06:47.425 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:06:47.426 +02:00 [INF] Hosting environment: Development
2025-06-02 19:06:47.426 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:06:54.108 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 19:06:54.438 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 333.8863ms
2025-06-02 19:06:55.082 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 19:06:55.549 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 468.8688ms
2025-06-02 19:07:04.803 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 19:07:04.855 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:04.881 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:07:05.264 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:07:05.2644060".
2025-06-02 19:07:06.388 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:07:07.543 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:07:08.564 +02:00 [INF] Executed DbCommand (165ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [LastLoginDate] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 19:07:08.591 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" (koumeil.messaoudi@outlook.com) successfully logged in from ::1 at "2025-06-02T19:07:05.2644060".
2025-06-02 19:07:08.594 +02:00 [INF] Generating access token for user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 19:07:08.629 +02:00 [INF] Generating refresh token for user "47d4681f-115c-4819-a3cf-b0c3c5085363" from IP ::1
2025-06-02 19:07:08.676 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__tokenType_1='?' (DbType = Int32), @__nowUtc_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = @__tokenType_1 AND [r].[Revoked] IS NULL AND [r].[Expires] > @__nowUtc_2
2025-06-02 19:07:08.752 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RefreshTokens] SET [Revoked] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-06-02 19:07:08.753 +02:00 [INF] Revoked all "Refresh" tokens for user "47d4681f-115c-4819-a3cf-b0c3c5085363" at "2025-06-02T19:07:08.7533880".
2025-06-02 19:07:08.807 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-02 19:07:08.808 +02:00 [INF] "Refresh" token added for user "47d4681f-115c-4819-a3cf-b0c3c5085363", expires "2025-06-09T19:07:08.6312630" at "2025-06-02T19:07:08.8084610".
2025-06-02 19:07:08.823 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Security.DTOs.AuthResponse, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 19:07:08.878 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 3991.0628ms
2025-06-02 19:07:08.879 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:08.894 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 200 null application/json; charset=utf-8 4091.5329ms
2025-06-02 19:07:17.526 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 19:07:17.535 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:17.535 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:07:17.541 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:07:17.5411700".
2025-06-02 19:07:17.570 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:07:18.039 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 19:07:18.040 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363" at "2025-06-02T19:07:17.5411700". FailedAttempts=1
2025-06-02 19:07:18.043 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 507.6777ms
2025-06-02 19:07:18.044 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:18.060 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:07:18.072 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 545.0987ms
2025-06-02 19:07:21.460 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 19:07:21.463 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:21.464 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:07:21.477 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:07:21.4770200".
2025-06-02 19:07:21.548 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:07:21.779 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 19:07:21.780 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363" at "2025-06-02T19:07:21.4770200". FailedAttempts=2
2025-06-02 19:07:21.781 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 316.9372ms
2025-06-02 19:07:21.781 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:21.783 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:07:21.783 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 323.6049ms
2025-06-02 19:07:25.270 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 19:07:25.271 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:25.271 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:07:25.273 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:07:25.2733360".
2025-06-02 19:07:25.292 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:07:25.516 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 19:07:25.516 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363" at "2025-06-02T19:07:25.2733360". FailedAttempts=3
2025-06-02 19:07:25.517 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 245.5181ms
2025-06-02 19:07:25.517 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:25.518 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:07:25.518 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 248.4845ms
2025-06-02 19:07:26.529 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 19:07:26.530 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:26.530 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:07:26.531 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:07:26.5316270".
2025-06-02 19:07:26.536 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:07:26.767 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 19:07:26.767 +02:00 [INF] SECURITY WARNING: User koumeil.messaoudi@outlook.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363": next failed attempt will lock account. ("2025-06-02T19:07:26.5316270", Attempts=4)
2025-06-02 19:07:26.768 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 237.3184ms
2025-06-02 19:07:26.768 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:26.769 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:07:26.769 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 239.4391ms
2025-06-02 19:07:29.674 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-06-02 19:07:29.674 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:29.675 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:07:29.675 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:07:29.6759040".
2025-06-02 19:07:29.683 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:07:29.897 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [LockoutEnd] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-06-02 19:07:31.327 +02:00 [INF] Email '🔒 Your Pulse ERP account is temporarily locked' sent to koumeil.messaoudi@outlook.com at "2025-06-02T17:07:31.3268640Z".
2025-06-02 19:07:31.328 +02:00 [ERR] LOCKOUT: User koumeil.messaoudi@outlook.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363" locked out at "2025-06-02T19:07:29.6759040". LockoutEnd=19:22 (CEST), FailedAttempts=5
2025-06-02 19:07:31.329 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1653.8048ms
2025-06-02 19:07:31.329 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:07:31.329 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:07:31.330 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 1656.0589ms
2025-06-02 19:08:47.652 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 19:08:47.658 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:08:47.659 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:08:47.674 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:08:47.6736990".
2025-06-02 19:08:47.699 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:08:47.711 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 50.8306ms
2025-06-02 19:08:47.711 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:08:47.720 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The conversion could not be completed because the supplied DateTime did not have the Kind property set correctly.  For example, when the Kind property is DateTimeKind.Local, the source time zone must be TimeZoneInfo.Local. (Parameter 'sourceTimeZone')
   at System.TimeZoneInfo.ConvertTime(DateTime dateTime, TimeZoneInfo sourceTimeZone, TimeZoneInfo destinationTimeZone, TimeZoneInfoOptions flags, CachedData cachedData)
   at PulseERP.Infrastructure.Provider.DateTimeProvider.ToBrusselsTimeString(DateTime utcDateTime) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Provider/DateTimeProvider.cs:line 22
   at PulseERP.Infrastructure.Identity.AuthenticationService.HandleLockedAccountAsync(User user) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 316
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 148
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:08:47.755 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:08:47.756 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 104.8299ms
2025-06-02 19:18:51.870 +02:00 [INF] Application is shutting down...
2025-06-02 19:19:20.489 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:19:21.157 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:19:21.163 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:19:21.164 +02:00 [INF] Hosting environment: Development
2025-06-02 19:19:21.164 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:19:28.933 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 19:19:29.089 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 158.6823ms
2025-06-02 19:19:29.545 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 19:19:29.861 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 316.7229ms
2025-06-02 19:19:37.975 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 19:19:38.036 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:19:38.062 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:19:38.341 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:19:38.3407880".
2025-06-02 19:19:39.482 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:19:40.737 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:19:42.779 +02:00 [INF] Email '🔒 Your Pulse ERP account is temporarily locked' sent to koumeil.messaoudi@outlook.com at "2025-06-02T17:19:42.7791900Z".
2025-06-02 19:19:42.781 +02:00 [WRN] LOCKOUT: Account lockout notification sent to koumeil.messaoudi@outlook.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363", At="2025-06-02T19:19:42.7813990". Locked until 19:22 (CEST).
2025-06-02 19:19:42.793 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 4722.5295ms
2025-06-02 19:19:42.794 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:19:42.821 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:19:42.882 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 4906.6687ms
2025-06-02 19:20:15.978 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-06-02 19:20:15.982 +02:00 [INF] Executing endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-06-02 19:20:15.998 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Products.Models.ProductSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams, PulseERP.Abstractions.Common.Filters.ProductFilter) on controller ProductsController (PulseERP.API).
2025-06-02 19:20:16.302 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-06-02 19:20:16.485 +02:00 [INF] Executed DbCommand (103ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[BrandId1], [p0].[CreatedAt], [p0].[Description], [p0].[IsActive], [p0].[IsService], [p0].[Name], [p0].[Price], [p0].[Quantity], [p0].[Status], [p0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
ORDER BY [p0].[Name]
2025-06-02 19:20:16.521 +02:00 [INF] Retrieved products list: 3 items
2025-06-02 19:20:16.523 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Products.Models.ProductSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 19:20:16.548 +02:00 [INF] Executed action ProductsController.GetAll (PulseERP.API) in 549.3264ms
2025-06-02 19:20:16.548 +02:00 [INF] Executed endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-06-02 19:20:16.549 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 571.4739ms
2025-06-02 19:21:12.277 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 153
2025-06-02 19:21:12.281 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:21:12.288 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:21:12.409 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-06-02 19:21:12.699 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
2025-06-02 19:21:12.767 +02:00 [INF] Product "ba73ea63-a00c-447e-895c-185600d4c062" added to context
2025-06-02 19:21:12.821 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-06-02 19:21:12.828 +02:00 [INF] Product "ba73ea63-a00c-447e-895c-185600d4c062" created
2025-06-02 19:21:12.836 +02:00 [INF] Product created: Chips
2025-06-02 19:21:12.839 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 19:21:12.891 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 602.7548ms
2025-06-02 19:21:12.891 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:21:12.892 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 614.4885ms
2025-06-02 19:21:40.639 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:21:40.639 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:21:40.640 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:21:40.653 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-06-02 19:21:40.658 +02:00 [INF] Product "9506621a-3d73-48fb-aac9-28d1f3367f9d" added to context
2025-06-02 19:21:40.772 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-02 19:21:40.810 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f1bc2ebf-8bb0-4f49-9ce9-e79b0161039e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f1bc2ebf-8bb0-4f49-9ce9-e79b0161039e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-02 19:21:40.814 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 174.1308ms
2025-06-02 19:21:40.814 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:21:40.818 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f1bc2ebf-8bb0-4f49-9ce9-e79b0161039e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 73
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method173(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:21:40.835 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:21:40.835 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 196.555ms
2025-06-02 19:25:55.027 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 19:25:55.043 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:25:55.045 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:25:55.067 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:25:55.0667210".
2025-06-02 19:25:55.118 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:25:56.624 +02:00 [INF] Email '🔒 Your Pulse ERP account is temporarily locked' sent to koumeil.messaoudi@outlook.com at "2025-06-02T17:25:56.6244010Z".
2025-06-02 19:25:56.624 +02:00 [WRN] LOCKOUT: Account lockout notification sent to koumeil.messaoudi@outlook.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363", At="2025-06-02T19:25:56.6249090". Locked until 19:22 (CEST).
2025-06-02 19:25:56.626 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1580.7503ms
2025-06-02 19:25:56.627 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:25:56.628 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:25:56.630 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 1603.6381ms
2025-06-02 19:26:11.626 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 19:26:11.628 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:26:11.629 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 19:26:11.656 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T19:26:11.6568500".
2025-06-02 19:26:11.674 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 19:26:12.990 +02:00 [INF] Email '🔒 Your Pulse ERP account is temporarily locked' sent to koumeil.messaoudi@outlook.com at "2025-06-02T17:26:12.9908750Z".
2025-06-02 19:26:12.992 +02:00 [WRN] LOCKOUT: Account lockout notification sent to koumeil.messaoudi@outlook.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363", At="2025-06-02T19:26:12.9920090". Locked until 19:22 (CEST).
2025-06-02 19:26:12.995 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1366.1373ms
2025-06-02 19:26:12.996 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 19:26:12.997 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:26:12.998 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 1371.3884ms
2025-06-02 19:33:37.492 +02:00 [INF] Application is shutting down...
2025-06-02 19:33:50.699 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:33:51.085 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:33:51.088 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:33:51.088 +02:00 [INF] Hosting environment: Development
2025-06-02 19:33:51.088 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:34:28.026 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:34:28.122 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:34:28.148 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:34:29.165 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:34:29.560 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 1407.1484ms
2025-06-02 19:34:29.571 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:34:29.579 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Brand>()
    .Where(b => b.Name.Trim().ToLowerInvariant() == __normalized_0)' could not be translated. Additional information: Translation of method 'string.ToLowerInvariant' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.SingleOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.BrandRepository.GetByNameAsync(String name) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/BrandRepository.cs:line 63
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 60
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:34:29.610 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:34:29.644 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 1620.8794ms
2025-06-02 19:35:30.718 +02:00 [INF] Application is shutting down...
2025-06-02 19:35:56.361 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:35:56.833 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:35:56.836 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:35:56.836 +02:00 [INF] Hosting environment: Development
2025-06-02 19:35:56.837 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:36:02.934 +02:00 [INF] Application is shutting down...
2025-06-02 19:36:20.816 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:36:21.240 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:36:21.245 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:36:21.246 +02:00 [INF] Hosting environment: Development
2025-06-02 19:36:21.246 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:36:32.032 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:36:32.121 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:36:32.147 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:36:33.306 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:36:34.222 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LTRIM(RTRIM([b].[Name])) = @__normalized_0
2025-06-02 19:36:34.403 +02:00 [INF] Product "23ea0e59-79c6-466d-9ef5-f3ae8e060d21" added to context
2025-06-02 19:36:34.557 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-02 19:36:34.598 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:41d2cd02-e7c1-479c-a343-b13b90cf108d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:41d2cd02-e7c1-479c-a343-b13b90cf108d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-02 19:36:34.610 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 2455.3532ms
2025-06-02 19:36:34.617 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:36:34.629 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:41d2cd02-e7c1-479c-a343-b13b90cf108d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 73
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:36:34.656 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:36:34.712 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 2681.3631ms
2025-06-02 19:37:21.279 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:37:21.312 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:37:21.313 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:37:21.355 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LTRIM(RTRIM([b].[Name])) = @__normalized_0
2025-06-02 19:37:21.359 +02:00 [INF] Product "211bea6b-1ef1-48d5-9397-91eb99f15429" added to context
2025-06-02 19:37:21.374 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-02 19:37:21.383 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:41d2cd02-e7c1-479c-a343-b13b90cf108d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:41d2cd02-e7c1-479c-a343-b13b90cf108d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-02 19:37:21.387 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 73.6385ms
2025-06-02 19:37:21.388 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:37:21.389 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:41d2cd02-e7c1-479c-a343-b13b90cf108d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 73
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:37:21.397 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:37:21.401 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 123.0143ms
2025-06-02 19:39:12.022 +02:00 [INF] Application is shutting down...
2025-06-02 19:39:27.239 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:39:27.748 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:39:27.753 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:39:27.754 +02:00 [INF] Hosting environment: Development
2025-06-02 19:39:27.754 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:39:33.182 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:39:33.304 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:39:33.336 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:39:34.517 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:39:35.601 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LTRIM(RTRIM([b].[Name])) = @__normalized_0
2025-06-02 19:39:35.784 +02:00 [INF] Product "ebba9bd9-ee03-43c6-bd3c-119f5722805f" added to context
2025-06-02 19:39:35.956 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-02 19:39:35.997 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:82f39d5e-5f3a-4382-a2dc-52ff92d4e828
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:82f39d5e-5f3a-4382-a2dc-52ff92d4e828
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-02 19:39:36.009 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 2666.6377ms
2025-06-02 19:39:36.016 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:39:36.030 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:82f39d5e-5f3a-4382-a2dc-52ff92d4e828
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 72
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:39:36.054 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:39:36.131 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 2953.5037ms
2025-06-02 19:40:05.812 +02:00 [INF] Application is shutting down...
2025-06-02 19:40:18.377 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:40:19.018 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:40:19.023 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:40:19.024 +02:00 [INF] Hosting environment: Development
2025-06-02 19:40:19.024 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:40:21.507 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 19:40:21.687 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 182.7242ms
2025-06-02 19:40:22.194 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 19:40:22.577 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 383.7109ms
2025-06-02 19:40:36.250 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:40:36.323 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:40:36.347 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:40:37.805 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:40:39.056 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LTRIM(RTRIM([b].[Name])) = @__normalized_0
2025-06-02 19:40:39.279 +02:00 [INF] Product "baf8210f-7242-464a-a4bd-76af9642f3ac" added to context
2025-06-02 19:40:39.485 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-02 19:40:39.535 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8b8a5096-5b03-4838-97b0-aade4752fea6
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8b8a5096-5b03-4838-97b0-aade4752fea6
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-02 19:40:39.552 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 3194.3288ms
2025-06-02 19:40:39.554 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:40:39.567 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8b8a5096-5b03-4838-97b0-aade4752fea6
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 72
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:40:39.593 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:40:39.639 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 3388.8172ms
2025-06-02 19:41:10.622 +02:00 [INF] Application is shutting down...
2025-06-02 19:41:22.199 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:41:22.900 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:41:22.911 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:41:22.915 +02:00 [INF] Hosting environment: Development
2025-06-02 19:41:22.916 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:41:27.348 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:41:27.581 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:41:27.670 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:41:30.107 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:41:30.945 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 3268.4727ms
2025-06-02 19:41:30.980 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:41:31.005 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Brand>()
    .Where(b => b.Name.Trim().ToLowerInvariant() == __normalized_0)' could not be translated. Additional information: Translation of method 'string.ToLowerInvariant' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.SingleOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.BrandRepository.GetByNameAsync(String name) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/BrandRepository.cs:line 63
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 60
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:41:31.077 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:41:31.169 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 3826.1528ms
2025-06-02 19:42:46.236 +02:00 [INF] Application is shutting down...
2025-06-02 19:43:01.672 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:43:02.585 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:43:02.594 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:43:02.596 +02:00 [INF] Hosting environment: Development
2025-06-02 19:43:02.597 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:43:07.829 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:43:08.101 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:43:08.193 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:43:11.138 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:43:12.915 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-06-02 19:43:13.454 +02:00 [INF] Product "259ceeb1-8a2f-47f4-aa03-5a2851d9b017" added to context
2025-06-02 19:43:13.743 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-02 19:43:13.816 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9a538bf-b1ce-42d8-9fc6-60c538da3201
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9a538bf-b1ce-42d8-9fc6-60c538da3201
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-02 19:43:13.839 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 5636.6348ms
2025-06-02 19:43:13.850 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:43:13.877 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9a538bf-b1ce-42d8-9fc6-60c538da3201
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 72
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:43:13.918 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:43:13.996 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 6173.5052ms
2025-06-02 19:46:00.016 +02:00 [INF] Application is shutting down...
2025-06-02 19:46:14.104 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:46:14.716 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:46:14.720 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:46:14.721 +02:00 [INF] Hosting environment: Development
2025-06-02 19:46:14.721 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:46:17.752 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 19:46:17.965 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 217.7585ms
2025-06-02 19:46:18.457 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 19:46:18.866 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 410.4173ms
2025-06-02 19:46:26.116 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-06-02 19:46:26.199 +02:00 [INF] Executing endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-06-02 19:46:26.257 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Products.Models.ProductSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams, PulseERP.Abstractions.Common.Filters.ProductFilter) on controller ProductsController (PulseERP.API).
2025-06-02 19:46:27.671 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:46:28.655 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-06-02 19:46:28.911 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[BrandId1], [p0].[CreatedAt], [p0].[Description], [p0].[IsActive], [p0].[IsService], [p0].[Name], [p0].[Price], [p0].[Quantity], [p0].[Status], [p0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
ORDER BY [p0].[Name]
2025-06-02 19:46:28.955 +02:00 [INF] Retrieved products list: 4 items
2025-06-02 19:46:28.965 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Products.Models.ProductSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 19:46:29.030 +02:00 [INF] Executed action ProductsController.GetAll (PulseERP.API) in 2765.7812ms
2025-06-02 19:46:29.031 +02:00 [INF] Executed endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-06-02 19:46:29.042 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 2926.2833ms
2025-06-02 19:46:47.150 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:46:47.155 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:46:47.165 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:46:47.235 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-06-02 19:46:47.380 +02:00 [INF] Product "b3cb56fa-30a6-4bae-a51e-c498e43955d9" added to context
2025-06-02 19:46:47.544 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-02 19:46:47.588 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ff9bd518-3612-4a88-aee9-18c547cb0e66
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ff9bd518-3612-4a88-aee9-18c547cb0e66
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-02 19:46:47.592 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 425.7874ms
2025-06-02 19:46:47.592 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:46:47.604 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (3da02d04-1629-41f4-b3f0-f5d647c42571).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ff9bd518-3612-4a88-aee9-18c547cb0e66
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 79
   at ProductsController.Create(CreateProductCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 57
   at lambda_method61(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 19:46:47.620 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 19:46:47.627 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 477.0526ms
2025-06-02 19:56:16.461 +02:00 [INF] Application is shutting down...
2025-06-02 19:57:17.058 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 19:57:18.505 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 19:57:18.513 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 19:57:18.514 +02:00 [INF] Hosting environment: Development
2025-06-02 19:57:18.515 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 19:57:19.745 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 19:57:20.149 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 411.0861ms
2025-06-02 19:57:20.634 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 19:57:21.338 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 702.7008ms
2025-06-02 19:57:30.623 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 168
2025-06-02 19:57:30.766 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:57:30.816 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:57:33.890 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 19:57:36.287 +02:00 [INF] Executed DbCommand (108ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-06-02 19:57:36.685 +02:00 [INF] Product "0d96fe6c-6556-481a-aa23-53e87b114b9b" added to context
2025-06-02 19:57:37.027 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-06-02 19:57:37.089 +02:00 [INF] Product "0d96fe6c-6556-481a-aa23-53e87b114b9b" created
2025-06-02 19:57:37.116 +02:00 [INF] Product created: Curry and Ketchup
2025-06-02 19:57:37.136 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 19:57:37.296 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 6468.1393ms
2025-06-02 19:57:37.298 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:57:37.329 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 6706.0996ms
2025-06-02 19:58:10.719 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 188
2025-06-02 19:58:10.722 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:58:10.723 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 19:58:10.765 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-06-02 19:58:10.767 +02:00 [INF] Product "b6cd3dd0-e5a8-456a-816d-eb0ad7883e26" added to context
2025-06-02 19:58:10.781 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-06-02 19:58:10.782 +02:00 [INF] Product "b6cd3dd0-e5a8-456a-816d-eb0ad7883e26" created
2025-06-02 19:58:10.782 +02:00 [INF] Product created: Chicken Barbecue chips
2025-06-02 19:58:10.783 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 19:58:10.784 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 61.0312ms
2025-06-02 19:58:10.785 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 19:58:10.785 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 66.5533ms
2025-06-02 20:00:01.172 +02:00 [INF] Application is shutting down...
2025-06-02 20:00:18.541 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 20:00:19.012 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 20:00:19.016 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 20:00:19.016 +02:00 [INF] Hosting environment: Development
2025-06-02 20:00:19.017 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 20:00:39.370 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 158
2025-06-02 20:00:39.468 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 20:00:39.492 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Create(PulseERP.Application.Products.Commands.CreateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 20:00:40.851 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 20:00:41.898 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-06-02 20:00:42.091 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" added to context
2025-06-02 20:00:42.248 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-06-02 20:00:42.283 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" created
2025-06-02 20:00:42.299 +02:00 [INF] Product created: Vegetables Chips
2025-06-02 20:00:42.311 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:00:42.388 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 2889.4199ms
2025-06-02 20:00:42.393 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-06-02 20:00:42.411 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 3042.5678ms
2025-06-02 20:00:48.825 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-06-02 20:00:48.836 +02:00 [INF] Executing endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-06-02 20:00:48.854 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Products.Models.ProductSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams, PulseERP.Abstractions.Common.Filters.ProductFilter) on controller ProductsController (PulseERP.API).
2025-06-02 20:00:48.932 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-06-02 20:00:49.001 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[BrandId1], [p0].[CreatedAt], [p0].[Description], [p0].[IsActive], [p0].[IsService], [p0].[Name], [p0].[Price], [p0].[Quantity], [p0].[Status], [p0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
ORDER BY [p0].[Name]
2025-06-02 20:00:49.029 +02:00 [INF] Retrieved products list: 7 items
2025-06-02 20:00:49.030 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Products.Models.ProductSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:00:49.041 +02:00 [INF] Executed action ProductsController.GetAll (PulseERP.API) in 186.8553ms
2025-06-02 20:00:49.042 +02:00 [INF] Executed endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-06-02 20:00:49.043 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 217.7613ms
2025-06-02 20:01:24.740 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - null null
2025-06-02 20:01:24.766 +02:00 [INF] Executing endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:01:24.773 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] GetById(System.Guid) on controller ProductsController (PulseERP.API).
2025-06-02 20:01:24.890 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:01:24.892 +02:00 [INF] Retrieved product "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:01:24.892 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:01:24.892 +02:00 [INF] Executed action ProductsController.GetById (PulseERP.API) in 119.13ms
2025-06-02 20:01:24.893 +02:00 [INF] Executed endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:01:24.893 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 152.8806ms
2025-06-02 20:02:24.390 +02:00 [INF] Application is shutting down...
2025-06-02 20:08:17.476 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 20:08:18.035 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 20:08:18.038 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 20:08:18.038 +02:00 [INF] Hosting environment: Development
2025-06-02 20:08:18.039 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 20:08:33.898 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 20:08:34.044 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 147.3864ms
2025-06-02 20:08:34.550 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 20:08:34.842 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 292.7518ms
2025-06-02 20:09:02.313 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - null null
2025-06-02 20:09:02.358 +02:00 [INF] Executing endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:09:02.383 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] GetById(System.Guid) on controller ProductsController (PulseERP.API).
2025-06-02 20:09:03.486 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 20:09:04.554 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:09:04.637 +02:00 [INF] Retrieved product "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:09:04.647 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:09:04.725 +02:00 [INF] Executed action ProductsController.GetById (PulseERP.API) in 2335.2904ms
2025-06-02 20:09:04.726 +02:00 [INF] Executed endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:09:04.741 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 2428.4966ms
2025-06-02 20:09:28.973 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - application/json 37
2025-06-02 20:09:28.977 +02:00 [INF] Executing endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:09:29.005 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Application.Products.Commands.UpdateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 20:09:29.047 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-02 20:09:29.056 +02:00 [INF] Executed action ProductsController.Update (PulseERP.API) in 50.6422ms
2025-06-02 20:09:29.056 +02:00 [INF] Executed endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:09:29.057 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 400 null application/problem+json; charset=utf-8 84.1006ms
2025-06-02 20:09:37.622 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - application/json 36
2025-06-02 20:09:37.632 +02:00 [INF] Executing endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:09:37.632 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Application.Products.Commands.UpdateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 20:09:37.827 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:09:37.859 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-06-02 20:09:38.197 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
2025-06-02 20:09:38.275 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated in context
2025-06-02 20:09:38.546 +02:00 [INF] Executed DbCommand (232ms) [Parameters=[@p10='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 500) (DbType = AnsiString), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 100), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [BrandId] = @p0, [CreatedAt] = @p1, [Description] = @p2, [IsActive] = @p3, [IsService] = @p4, [Name] = @p5, [Price] = @p6, [Quantity] = @p7, [Status] = @p8, [UpdatedAt] = @p9
OUTPUT 1
WHERE [Id] = @p10;
2025-06-02 20:09:38.551 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated
2025-06-02 20:09:38.553 +02:00 [INF] Product updated: "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:09:38.555 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:09:38.557 +02:00 [INF] Executed action ProductsController.Update (PulseERP.API) in 923.8341ms
2025-06-02 20:09:38.558 +02:00 [INF] Executed endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:09:38.558 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 936.411ms
2025-06-02 20:09:46.392 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - null null
2025-06-02 20:09:46.393 +02:00 [INF] Executing endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:09:46.393 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] GetById(System.Guid) on controller ProductsController (PulseERP.API).
2025-06-02 20:09:46.469 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:09:46.470 +02:00 [INF] Retrieved product "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:09:46.470 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:09:46.470 +02:00 [INF] Executed action ProductsController.GetById (PulseERP.API) in 77.3117ms
2025-06-02 20:09:46.470 +02:00 [INF] Executed endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:09:46.471 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 78.609ms
2025-06-02 20:09:53.719 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/brands - null null
2025-06-02 20:09:53.720 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 20:09:53.731 +02:00 [INF] Route matched with {action = "GetAll", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Brands.Models.BrandSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams) on controller PulseERP.API.Controllers.BrandsController (PulseERP.API).
2025-06-02 20:09:53.771 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Brands] AS [b]
2025-06-02 20:09:53.854 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[CreatedAt], [b0].[IsActive], [b0].[Name], [b0].[UpdatedAt], [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
FROM (
    SELECT [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
    FROM [Brands] AS [b]
    ORDER BY [b].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
LEFT JOIN [Products] AS [p] ON [b0].[Id] = [p].[BrandId1]
ORDER BY [b0].[Name], [b0].[Id]
2025-06-02 20:09:53.874 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Brands.Models.BrandSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:09:53.884 +02:00 [INF] Executed action PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API) in 153.0059ms
2025-06-02 20:09:53.884 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 20:09:53.885 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/brands - 200 null application/json; charset=utf-8 165.6591ms
2025-06-02 20:11:16.052 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - application/json 96
2025-06-02 20:11:16.052 +02:00 [INF] Executing endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:11:16.052 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Application.Products.Commands.UpdateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 20:11:16.067 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:11:16.079 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated in context
2025-06-02 20:11:16.132 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p15='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 500) (DbType = AnsiString), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [IsActive] = @p1, [Name] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
UPDATE [Products] SET [BrandId] = @p5, [CreatedAt] = @p6, [Description] = @p7, [IsActive] = @p8, [IsService] = @p9, [Name] = @p10, [Price] = @p11, [Quantity] = @p12, [Status] = @p13, [UpdatedAt] = @p14
OUTPUT 1
WHERE [Id] = @p15;
2025-06-02 20:11:16.147 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated
2025-06-02 20:11:16.148 +02:00 [INF] Product updated: "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:11:16.148 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:11:16.148 +02:00 [INF] Executed action ProductsController.Update (PulseERP.API) in 95.5949ms
2025-06-02 20:11:16.148 +02:00 [INF] Executed endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:11:16.149 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 96.8174ms
2025-06-02 20:11:36.004 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - application/json 24
2025-06-02 20:11:36.004 +02:00 [INF] Executing endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:11:36.005 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Application.Products.Commands.UpdateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 20:11:36.009 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:11:36.011 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated in context
2025-06-02 20:11:36.052 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p15='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 500) (DbType = AnsiString), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [IsActive] = @p1, [Name] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
UPDATE [Products] SET [BrandId] = @p5, [CreatedAt] = @p6, [Description] = @p7, [IsActive] = @p8, [IsService] = @p9, [Name] = @p10, [Price] = @p11, [Quantity] = @p12, [Status] = @p13, [UpdatedAt] = @p14
OUTPUT 1
WHERE [Id] = @p15;
2025-06-02 20:11:36.061 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated
2025-06-02 20:11:36.061 +02:00 [INF] Product updated: "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:11:36.062 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:11:36.062 +02:00 [INF] Executed action ProductsController.Update (PulseERP.API) in 57.4937ms
2025-06-02 20:11:36.062 +02:00 [INF] Executed endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:11:36.063 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 58.6361ms
2025-06-02 20:11:51.027 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - null null
2025-06-02 20:11:51.027 +02:00 [INF] Executing endpoint 'ProductsController.Delete (PulseERP.API)'
2025-06-02 20:11:51.032 +02:00 [INF] Route matched with {action = "Delete", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[System.Object]]] Delete(System.Guid) on controller ProductsController (PulseERP.API).
2025-06-02 20:11:51.051 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:11:51.052 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated in context
2025-06-02 20:11:51.059 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p15='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 500) (DbType = AnsiString), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [IsActive] = @p1, [Name] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
UPDATE [Products] SET [BrandId] = @p5, [CreatedAt] = @p6, [Description] = @p7, [IsActive] = @p8, [IsService] = @p9, [Name] = @p10, [Price] = @p11, [Quantity] = @p12, [Status] = @p13, [UpdatedAt] = @p14
OUTPUT 1
WHERE [Id] = @p15;
2025-06-02 20:11:51.067 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" discontinued (deleted)
2025-06-02 20:11:51.067 +02:00 [INF] Product deleted: "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:11:51.068 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-02 20:11:51.069 +02:00 [INF] Executed action ProductsController.Delete (PulseERP.API) in 36.828ms
2025-06-02 20:11:51.069 +02:00 [INF] Executed endpoint 'ProductsController.Delete (PulseERP.API)'
2025-06-02 20:11:51.070 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 42.9136ms
2025-06-02 20:12:11.845 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - null null
2025-06-02 20:12:11.847 +02:00 [INF] Executing endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:12:11.848 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] GetById(System.Guid) on controller ProductsController (PulseERP.API).
2025-06-02 20:12:11.874 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:12:11.878 +02:00 [INF] Retrieved product "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:12:11.878 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:12:11.880 +02:00 [INF] Executed action ProductsController.GetById (PulseERP.API) in 31.6584ms
2025-06-02 20:12:11.884 +02:00 [INF] Executed endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:12:11.886 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 41.1232ms
2025-06-02 20:13:13.826 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - application/json 29
2025-06-02 20:13:13.827 +02:00 [INF] Executing endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:13:13.827 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Application.Products.Commands.UpdateProductCommand) on controller ProductsController (PulseERP.API).
2025-06-02 20:13:13.832 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:13:13.840 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated in context
2025-06-02 20:13:13.897 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p15='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 500) (DbType = AnsiString), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [IsActive] = @p1, [Name] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
UPDATE [Products] SET [BrandId] = @p5, [CreatedAt] = @p6, [Description] = @p7, [IsActive] = @p8, [IsService] = @p9, [Name] = @p10, [Price] = @p11, [Quantity] = @p12, [Status] = @p13, [UpdatedAt] = @p14
OUTPUT 1
WHERE [Id] = @p15;
2025-06-02 20:13:13.905 +02:00 [INF] Product "6ca9a904-6073-455b-9a34-386e2ae02a07" updated
2025-06-02 20:13:13.905 +02:00 [INF] Product updated: "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:13:13.905 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:13:13.906 +02:00 [INF] Executed action ProductsController.Update (PulseERP.API) in 78.5399ms
2025-06-02 20:13:13.907 +02:00 [INF] Executed endpoint 'ProductsController.Update (PulseERP.API)'
2025-06-02 20:13:13.908 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 81.9175ms
2025-06-02 20:13:22.870 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - null null
2025-06-02 20:13:22.870 +02:00 [INF] Executing endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:13:22.871 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Products.Models.ProductDetails]]] GetById(System.Guid) on controller ProductsController (PulseERP.API).
2025-06-02 20:13:22.876 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-02 20:13:22.876 +02:00 [INF] Retrieved product "6ca9a904-6073-455b-9a34-386e2ae02a07"
2025-06-02 20:13:22.877 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Products.Models.ProductDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:13:22.877 +02:00 [INF] Executed action ProductsController.GetById (PulseERP.API) in 6.3219ms
2025-06-02 20:13:22.878 +02:00 [INF] Executed endpoint 'ProductsController.GetById (PulseERP.API)'
2025-06-02 20:13:22.878 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6ca9a904-6073-455b-9a34-386e2ae02a07 - 200 null application/json; charset=utf-8 8.0417ms
2025-06-02 20:13:39.881 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-06-02 20:13:39.882 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-06-02 20:13:39.890 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Users.Models.UserSummary]]]] GetAll(PulseERP.Abstractions.Common.Filters.UserFilter) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:13:39.920 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2025-06-02 20:13:39.943 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
ORDER BY [u].[LastName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-02 20:13:39.965 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Users.Models.UserSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:13:39.969 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 78.6177ms
2025-06-02 20:13:39.969 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-06-02 20:13:39.969 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 88.02ms
2025-06-02 20:14:31.509 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 138
2025-06-02 20:14:31.512 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-06-02 20:14:31.520 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.UserInfo]]] Create(PulseERP.Application.Users.Commands.CreateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:14:31.891 +02:00 [INF] User "67fd8fd4-e0f9-43d7-8d2a-4a63e235243b" created at "2025-06-02T20:14:31.8914290+02:00".
2025-06-02 20:14:31.923 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FailedLoginAttempts], [FirstName], [LastLoginDate], [LastName], [LockoutEnd], [PasswordHash], [PasswordLastChangedAt], [Phone], [RequirePasswordChange], [RoleName], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-06-02 20:14:31.926 +02:00 [INF] User created with email gmxfreakx@gmail.com
2025-06-02 20:14:31.928 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Security.DTOs.UserInfo, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:14:31.949 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 428.3828ms
2025-06-02 20:14:31.949 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-06-02 20:14:31.949 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 201 null application/json; charset=utf-8 440.1167ms
2025-06-02 20:15:21.009 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 81
2025-06-02 20:15:21.011 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:15:21.016 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:15:21.083 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 20:15:21.122 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T20:15:21.1221980+02:00".
2025-06-02 20:15:21.140 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 20:15:21.140 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 20:15:21.143 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 126.1434ms
2025-06-02 20:15:21.143 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:15:21.151 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: PulseERP.Application.Users.Models.UserDetails needs to have a constructor with 0 args or only optional args. Validate your configuration for details. (Parameter 'type')
   at lambda_method567(Closure, Object, UserDetails, ResolutionContext)
   at AutoMapper.Mapper.MapCore[TSource,TDestination](TSource source, TDestination destination, ResolutionContext context, Type sourceType, Type destinationType, MemberMap memberMap)
   at AutoMapper.Mapper.Map[TSource,TDestination](TSource source, TDestination destination)
   at AutoMapper.Mapper.Map[TDestination](Object source)
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 108
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method542(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 20:15:21.183 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 20:15:21.185 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 175.2127ms
2025-06-02 20:38:17.440 +02:00 [INF] Application is shutting down...
2025-06-02 20:38:49.873 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 20:38:50.503 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 20:38:50.508 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 20:38:50.510 +02:00 [INF] Hosting environment: Development
2025-06-02 20:38:50.511 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 20:38:59.118 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 81
2025-06-02 20:38:59.292 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:38:59.331 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:38:59.930 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 591.4312ms
2025-06-02 20:38:59.948 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:38:59.967 +02:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperConfigurationException: UserDetails does not have a matching constructor with a parameter named 'id'.
PulseERP.Application.Users.Models.UserDetails.
   at AutoMapper.Configuration.CtorParamConfigurationExpression`2.Configure(TypeMap typeMap)
   at AutoMapper.Configuration.TypeMapConfiguration.AddCtorParamConfigurations(TypeMap typeMap)
   at AutoMapper.Configuration.TypeMapConfiguration.Configure(TypeMap typeMap, List`1 sourceMembers)
   at AutoMapper.ProfileMap.BuildTypeMap(IGlobalConfiguration configuration, TypeMapConfiguration config)
   at AutoMapper.ProfileMap.Register(IGlobalConfiguration configuration)
   at AutoMapper.MapperConfiguration.<.ctor>g__Seal|20_0()
   at AutoMapper.MapperConfiguration..ctor(MapperConfigurationExpression configurationExpression)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionExtensions.<>c.<AddAutoMapperClasses>b__12_2(IServiceProvider sp)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionExtensions.<>c.<AddAutoMapperClasses>b__12_3(IServiceProvider sp)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 20:39:00.014 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 20:39:00.108 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 994.2074ms
2025-06-02 20:39:17.670 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 20:39:17.769 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 100.5541ms
2025-06-02 20:39:18.060 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 20:39:18.306 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 246.2084ms
2025-06-02 20:39:22.817 +02:00 [INF] Application is shutting down...
2025-06-02 20:39:33.024 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 20:39:33.483 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 20:39:33.487 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 20:39:33.488 +02:00 [INF] Hosting environment: Development
2025-06-02 20:39:33.488 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 20:40:06.295 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 82
2025-06-02 20:40:06.364 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:40:06.389 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:40:06.625 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 232.7606ms
2025-06-02 20:40:06.642 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:40:06.655 +02:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperConfigurationException: UserDetails does not have a matching constructor with a parameter named 'id'.
PulseERP.Application.Users.Models.UserDetails.
   at AutoMapper.Configuration.CtorParamConfigurationExpression`2.Configure(TypeMap typeMap)
   at AutoMapper.Configuration.TypeMapConfiguration.AddCtorParamConfigurations(TypeMap typeMap)
   at AutoMapper.Configuration.TypeMapConfiguration.Configure(TypeMap typeMap, List`1 sourceMembers)
   at AutoMapper.ProfileMap.BuildTypeMap(IGlobalConfiguration configuration, TypeMapConfiguration config)
   at AutoMapper.ProfileMap.Register(IGlobalConfiguration configuration)
   at AutoMapper.MapperConfiguration.<.ctor>g__Seal|20_0()
   at AutoMapper.MapperConfiguration..ctor(MapperConfigurationExpression configurationExpression)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionExtensions.<>c.<AddAutoMapperClasses>b__12_2(IServiceProvider sp)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionExtensions.<>c.<AddAutoMapperClasses>b__12_3(IServiceProvider sp)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 20:40:06.687 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 20:40:06.746 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 452.6995ms
2025-06-02 20:42:44.038 +02:00 [INF] Application is shutting down...
2025-06-02 20:43:06.558 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 20:43:07.129 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 20:43:07.133 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 20:43:07.134 +02:00 [INF] Hosting environment: Development
2025-06-02 20:43:07.134 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 20:43:12.512 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 82
2025-06-02 20:43:12.602 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:43:12.629 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:43:14.194 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 20:43:15.288 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 20:43:15.514 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T20:43:15.5146260+02:00".
2025-06-02 20:43:15.698 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 20:43:15.713 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 20:43:15.747 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:43:15.801 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 3164.0405ms
2025-06-02 20:43:15.809 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:43:15.841 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 3331.1427ms
2025-06-02 20:43:32.282 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 20:43:32.336 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 20:43:32.347 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:43:32.383 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 20:43:32.397 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 20:43:32.398 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 50.3689ms
2025-06-02 20:43:32.398 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 20:43:32.399 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 116.7301ms
2025-06-02 20:43:56.874 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 21
2025-06-02 20:43:56.879 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:43:56.880 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:43:56.997 +02:00 [INF] User "80c38531-5625-482d-ae76-b7ac1c803e99" updated at "2025-06-02T20:43:56.9976090+02:00".
2025-06-02 20:43:57.004 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 20:43:57.020 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 140.0977ms
2025-06-02 20:43:57.020 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:43:57.030 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 105
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 20:43:57.066 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 20:43:57.075 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 201.0808ms
2025-06-02 20:45:46.041 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 20:45:46.046 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:45:46.047 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:45:46.154 +02:00 [INF] User "0a2a08bb-9268-49ad-a30c-5c01fd4ac330" updated at "2025-06-02T20:45:46.1545490+02:00".
2025-06-02 20:45:46.161 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 20:45:46.168 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 120.1267ms
2025-06-02 20:45:46.169 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:45:46.172 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 105
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 20:45:46.184 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 20:45:46.186 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 144.2084ms
2025-06-02 20:45:49.781 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 20:45:49.781 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:45:49.781 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 20:45:49.799 +02:00 [INF] User "c830fbd6-c2c9-4574-9e61-19f5c7d3a81b" updated at "2025-06-02T20:45:49.7998090+02:00".
2025-06-02 20:45:49.806 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 20:45:49.809 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 27.3615ms
2025-06-02 20:45:49.814 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 20:45:49.815 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 105
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 20:45:49.820 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 20:45:49.822 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 40.7666ms
2025-06-02 21:12:19.724 +02:00 [INF] Application is shutting down...
2025-06-02 21:13:41.338 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 21:13:42.050 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 21:13:42.055 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 21:13:42.056 +02:00 [INF] Hosting environment: Development
2025-06-02 21:13:42.057 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 21:15:58.006 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 21:15:58.175 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:15:58.206 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:15:59.406 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 21:16:00.157 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:16:00.316 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:16:00.3163080+02:00".
2025-06-02 21:16:00.427 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:16:00.438 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:16:00.455 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:16:00.486 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 2274.4407ms
2025-06-02 21:16:00.490 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:16:00.502 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 2497.5742ms
2025-06-02 21:16:38.617 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 21
2025-06-02 21:16:38.623 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:16:38.624 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:16:38.671 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:16:38.707 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 81.7471ms
2025-06-02 21:16:38.707 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:16:38.716 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-02 21:16:38.731 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 400 null application/problem+json; charset=utf-8 114.2721ms
2025-06-02 21:16:53.142 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 24
2025-06-02 21:16:53.146 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:16:53.146 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:16:53.291 +02:00 [INF] User "5cc76ddd-64b7-41d1-90a0-1f0ccf704ef8" updated at "2025-06-02T21:16:53.2912080+02:00".
2025-06-02 21:16:53.300 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:16:53.311 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 164.5316ms
2025-06-02 21:16:53.311 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:16:53.314 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 112
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 21:16:53.343 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 21:16:53.344 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 202.1328ms
2025-06-02 21:17:03.417 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 24
2025-06-02 21:17:03.418 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:17:03.418 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:17:03.443 +02:00 [INF] User "471564fc-a84b-4060-8ff0-108f1436cc33" updated at "2025-06-02T21:17:03.4432190+02:00".
2025-06-02 21:17:03.446 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:17:03.448 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 29.9834ms
2025-06-02 21:17:03.448 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:17:03.449 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 112
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 21:17:03.454 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 21:17:03.454 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 37.1891ms
2025-06-02 21:23:53.846 +02:00 [INF] Application is shutting down...
2025-06-02 21:24:09.564 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 21:24:10.481 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 21:24:10.486 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 21:24:10.488 +02:00 [INF] Hosting environment: Development
2025-06-02 21:24:10.488 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 21:24:16.272 +02:00 [INF] Application is shutting down...
2025-06-02 21:24:27.183 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 21:24:27.728 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 21:24:27.732 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 21:24:27.733 +02:00 [INF] Hosting environment: Development
2025-06-02 21:24:27.733 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 21:24:43.014 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:24:43.159 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:24:43.195 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:24:45.023 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 21:24:46.133 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:24:46.379 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:24:46.427 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 3224.6934ms
2025-06-02 21:24:46.434 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:24:46.453 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 3440.9487ms
2025-06-02 21:24:53.047 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 24
2025-06-02 21:24:53.068 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:24:53.084 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:24:53.165 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:24:53.197 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:24:53.1970490+02:00".
2025-06-02 21:24:53.367 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:24:53.391 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:24:53.394 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:24:53.395 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 310.9862ms
2025-06-02 21:24:53.396 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:24:53.397 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 350.9851ms
2025-06-02 21:25:02.846 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:25:02.850 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:25:02.851 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:25:02.963 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:25:02.964 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:25:02.964 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 113.662ms
2025-06-02 21:25:02.965 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:25:02.965 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 118.6295ms
2025-06-02 21:25:10.175 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 21:25:10.177 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:25:10.178 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:25:10.192 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:25:10.195 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:25:10.1949620+02:00".
2025-06-02 21:25:10.206 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:25:10.206 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:25:10.207 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:25:10.207 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 29.2188ms
2025-06-02 21:25:10.207 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:25:10.208 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 32.7078ms
2025-06-02 21:25:17.987 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:25:17.987 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:25:17.988 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:25:18.000 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:25:18.001 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:25:18.002 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 13.9951ms
2025-06-02 21:25:18.002 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:25:18.002 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 15.38ms
2025-06-02 21:25:30.421 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 21
2025-06-02 21:25:30.422 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:25:30.422 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:25:30.426 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:25:30.459 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 37.0017ms
2025-06-02 21:25:30.460 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:25:30.473 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-02 21:25:30.484 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 400 null application/problem+json; charset=utf-8 62.5528ms
2025-06-02 21:25:37.053 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:25:37.055 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:25:37.055 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:25:37.068 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:25:37.069 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 13.2106ms
2025-06-02 21:25:37.069 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:25:37.069 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 16.4713ms
2025-06-02 21:25:54.476 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 21
2025-06-02 21:25:54.476 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:25:54.477 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:25:54.497 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:25:54.504 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 27.3892ms
2025-06-02 21:25:54.506 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:25:54.507 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-02 21:25:54.508 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 400 null application/problem+json; charset=utf-8 32.4252ms
2025-06-02 21:26:00.280 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:26:00.280 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:26:00.281 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:26:00.294 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:26:00.294 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 13.4554ms
2025-06-02 21:26:00.295 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:26:00.295 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 14.636ms
2025-06-02 21:26:10.002 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 21:26:10.004 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:26:10.004 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:26:10.008 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:26:10.012 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:26:10.0123240+02:00".
2025-06-02 21:26:10.021 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:26:10.022 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:26:10.022 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:26:10.022 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 18.2681ms
2025-06-02 21:26:10.023 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:26:10.025 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 23.2439ms
2025-06-02 21:26:16.498 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:26:16.499 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:26:16.499 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:26:16.509 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:26:16.510 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:26:16.511 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 11.2029ms
2025-06-02 21:26:16.511 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:26:16.511 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 13.268ms
2025-06-02 21:26:25.909 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 24
2025-06-02 21:26:25.910 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:26:25.910 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:26:25.933 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:26:25.935 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 24.3905ms
2025-06-02 21:26:25.935 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:26:25.936 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-02 21:26:25.937 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 400 null application/problem+json; charset=utf-8 28.0173ms
2025-06-02 21:26:32.032 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:26:32.033 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:26:32.033 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:26:32.042 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:26:32.043 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 9.7028ms
2025-06-02 21:26:32.043 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:26:32.043 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 10.766ms
2025-06-02 21:33:08.483 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 21:33:08.565 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 82.619ms
2025-06-02 21:33:08.840 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 21:33:09.006 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.6327ms
2025-06-02 21:33:18.919 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:33:18.921 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:33:18.922 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:33:18.932 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:33:18.933 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 10.3811ms
2025-06-02 21:33:18.933 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:33:18.933 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 13.7563ms
2025-06-02 21:38:53.747 +02:00 [INF] Application is shutting down...
2025-06-02 21:39:31.643 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 21:39:32.358 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 21:39:32.363 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 21:39:32.364 +02:00 [INF] Hosting environment: Development
2025-06-02 21:39:32.364 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 21:39:49.532 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:39:49.662 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:39:49.700 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:39:51.955 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 21:39:53.581 +02:00 [INF] Executed DbCommand (184ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:39:53.940 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:39:54.014 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 4303.5179ms
2025-06-02 21:39:54.027 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:39:54.073 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 4542.038ms
2025-06-02 21:40:24.964 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 24
2025-06-02 21:40:24.970 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:40:24.982 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:40:25.038 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:40:25.067 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:40:25.0665390+02:00".
2025-06-02 21:40:25.190 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:40:25.206 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:40:25.208 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:40:25.209 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 226.9582ms
2025-06-02 21:40:25.210 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:40:25.217 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 247.4143ms
2025-06-02 21:40:31.732 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:40:31.737 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:40:31.738 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:40:31.830 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:40:31.832 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:40:31.832 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 93.9141ms
2025-06-02 21:40:31.832 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:40:31.833 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 100.6658ms
2025-06-02 21:41:13.571 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 21:41:13.587 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:41:13.592 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:41:13.602 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:41:13.615 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:41:13.6152350+02:00".
2025-06-02 21:41:13.627 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:41:13.628 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:41:13.629 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:41:13.630 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 36.3201ms
2025-06-02 21:41:13.630 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:41:13.630 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 59.072ms
2025-06-02 21:41:24.546 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:41:24.547 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:41:24.547 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:41:24.569 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:41:24.570 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:41:24.571 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 23.3963ms
2025-06-02 21:41:24.571 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:41:24.572 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 26.2805ms
2025-06-02 21:41:34.530 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 21:41:34.531 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:41:34.531 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:41:34.537 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:41:34.541 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 10.1692ms
2025-06-02 21:41:34.542 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:41:34.554 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Invalid role 'Totot'. Allowed roles are: User, Manager, Admin.
   at PulseERP.Domain.ValueObjects.Role.Create(String role) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Role.cs:line 33
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 98
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method127(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 21:41:34.583 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 21:41:34.591 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 60.9969ms
2025-06-02 21:41:54.369 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:41:54.370 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:41:54.371 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:41:54.404 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:41:54.404 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 33.2609ms
2025-06-02 21:41:54.405 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:41:54.405 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 35.8526ms
2025-06-02 21:43:00.818 +02:00 [INF] Application is shutting down...
2025-06-02 21:43:40.890 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 21:43:41.692 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 21:43:41.699 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 21:43:41.700 +02:00 [INF] Hosting environment: Development
2025-06-02 21:43:41.701 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 21:45:12.361 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:45:12.517 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:45:12.555 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:45:14.472 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 21:45:15.781 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:45:15.940 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:45:16.005 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 3442.703ms
2025-06-02 21:45:16.013 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:45:16.032 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 3674.464ms
2025-06-02 21:45:34.600 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 24
2025-06-02 21:45:34.608 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:45:34.622 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:45:34.695 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:45:35.013 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:45:35.0129050+02:00".
2025-06-02 21:45:35.238 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:45:35.258 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:45:35.260 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:45:35.261 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 638.4728ms
2025-06-02 21:45:35.262 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:45:35.265 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 665.2242ms
2025-06-02 21:45:39.494 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:45:39.514 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:45:39.514 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:45:39.688 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:45:39.689 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:45:39.689 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 174.1955ms
2025-06-02 21:45:39.690 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:45:39.690 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 195.4835ms
2025-06-02 21:46:00.848 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 23
2025-06-02 21:46:00.849 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:46:00.850 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:00.855 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:00.859 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 9.2932ms
2025-06-02 21:46:00.860 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:46:00.870 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Invalid role 'Dadada'. Allowed roles are: User, Manager, Admin.
   at PulseERP.Domain.ValueObjects.Role.Create(String role) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Role.cs:line 33
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 96
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method127(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 21:46:00.897 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 21:46:00.904 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 56.1415ms
2025-06-02 21:46:16.810 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:46:16.812 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:16.812 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:16.838 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:16.840 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:46:16.840 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 27.9853ms
2025-06-02 21:46:16.840 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:16.841 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 30.1298ms
2025-06-02 21:46:21.206 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:46:21.206 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:21.207 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:21.211 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:21.212 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:46:21.213 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 5.7727ms
2025-06-02 21:46:21.228 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:21.229 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 22.7971ms
2025-06-02 21:46:23.249 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:46:23.249 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:23.250 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:23.254 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:23.255 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:46:23.256 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 5.9223ms
2025-06-02 21:46:23.256 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:23.257 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 7.7615ms
2025-06-02 21:46:24.893 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:46:24.893 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:24.894 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:24.900 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:24.900 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:46:24.901 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 6.536ms
2025-06-02 21:46:24.901 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:24.902 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 8.9496ms
2025-06-02 21:46:25.840 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:46:25.840 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:25.840 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:25.871 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:25.872 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:46:25.872 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 31.6794ms
2025-06-02 21:46:25.872 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:25.873 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 32.8007ms
2025-06-02 21:46:26.461 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:46:26.461 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:26.461 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:26.466 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:26.467 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:46:26.468 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 6.4934ms
2025-06-02 21:46:26.468 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:26.469 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 8.0253ms
2025-06-02 21:46:27.099 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:46:27.100 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:27.100 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:27.108 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:27.110 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:46:27.134 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 33.2785ms
2025-06-02 21:46:27.135 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:27.139 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 40.1694ms
2025-06-02 21:46:36.987 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 23
2025-06-02 21:46:36.989 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:46:36.989 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:36.993 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:37.011 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 21.7419ms
2025-06-02 21:46:37.015 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:46:37.019 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Invalid role 'Dadada'. Allowed roles are: User, Manager, Admin.
   at PulseERP.Domain.ValueObjects.Role.Create(String role) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Role.cs:line 33
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 96
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method127(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 21:46:37.026 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 21:46:37.027 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 40.0747ms
2025-06-02 21:46:45.296 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 40
2025-06-02 21:46:45.297 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:46:45.297 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:45.301 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:45.309 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 11.4878ms
2025-06-02 21:46:45.310 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:46:45.310 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Invalid role 'Dadadadadadadadadadadaa'. Allowed roles are: User, Manager, Admin.
   at PulseERP.Domain.ValueObjects.Role.Create(String role) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Role.cs:line 33
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 96
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method127(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 21:46:45.313 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 21:46:45.313 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 17.2384ms
2025-06-02 21:46:50.792 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 21
2025-06-02 21:46:50.792 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:46:50.792 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:50.797 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:50.798 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 5.8719ms
2025-06-02 21:46:50.800 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:46:50.801 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Invalid role 'Toto'. Allowed roles are: User, Manager, Admin.
   at PulseERP.Domain.ValueObjects.Role.Create(String role) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Role.cs:line 33
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 96
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method127(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 21:46:50.805 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 21:46:50.806 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 14.0149ms
2025-06-02 21:46:56.440 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:46:56.441 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:56.442 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:46:56.495 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:46:56.497 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:46:56.498 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 55.7469ms
2025-06-02 21:46:56.498 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:46:56.499 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 58.3456ms
2025-06-02 21:47:19.165 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 21:47:19.166 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:47:19.167 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:47:19.177 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:47:19.203 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:47:19.2034250+02:00".
2025-06-02 21:47:19.215 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:47:19.216 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:47:19.216 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:47:19.216 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 49.6181ms
2025-06-02 21:47:19.217 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:47:19.217 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 51.8073ms
2025-06-02 21:47:25.294 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:47:25.295 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:47:25.295 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:47:25.299 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:47:25.300 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:47:25.300 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 5.2595ms
2025-06-02 21:47:25.301 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:47:25.307 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 12.0395ms
2025-06-02 21:47:37.715 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 21
2025-06-02 21:47:37.716 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:47:37.716 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:47:37.719 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:47:37.720 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 4.0521ms
2025-06-02 21:47:37.720 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:47:37.720 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Invalid role 'Toto'. Allowed roles are: User, Manager, Admin.
   at PulseERP.Domain.ValueObjects.Role.Create(String role) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Role.cs:line 33
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 96
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method127(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 21:47:37.723 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 21:47:37.723 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 8.029ms
2025-06-02 21:47:44.888 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:47:44.888 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:47:44.888 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:47:44.891 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:47:44.892 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:47:44.892 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 3.962ms
2025-06-02 21:47:44.892 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:47:44.892 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 4.9274ms
2025-06-02 21:47:56.842 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:47:56.843 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:47:56.843 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:47:56.847 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:47:56.848 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:47:56.850 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 6.7976ms
2025-06-02 21:47:56.850 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:47:56.851 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 8.4419ms
2025-06-02 21:48:05.985 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 24
2025-06-02 21:48:05.986 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:48:05.986 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:48:05.991 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:48:06.002 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T21:48:06.0021600+02:00".
2025-06-02 21:48:06.018 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 21:48:06.018 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 21:48:06.019 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:48:06.019 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 33.2243ms
2025-06-02 21:48:06.019 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 21:48:06.019 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 34.1501ms
2025-06-02 21:48:10.867 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 21:48:10.867 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:48:10.867 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 21:48:10.871 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 21:48:10.871 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 21:48:10.872 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 4.3731ms
2025-06-02 21:48:10.872 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 21:48:10.872 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 5.4272ms
2025-06-02 22:06:26.851 +02:00 [INF] Application is shutting down...
2025-06-02 22:06:57.268 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 22:06:57.925 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 22:06:57.933 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 22:06:57.934 +02:00 [INF] Hosting environment: Development
2025-06-02 22:06:57.935 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 22:07:06.718 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 22:07:06.838 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 122.0032ms
2025-06-02 22:07:07.306 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 22:07:07.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 324.7962ms
2025-06-02 22:07:14.855 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 22:07:14.921 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:07:14.954 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:07:16.355 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 22:07:17.542 +02:00 [INF] Executed DbCommand (154ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:07:17.759 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:07:17.820 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 2859.8177ms
2025-06-02 22:07:17.821 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:07:17.835 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 2979.8368ms
2025-06-02 22:07:54.288 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 22
2025-06-02 22:07:54.294 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 22:07:54.304 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:07:54.359 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:07:54.560 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T22:07:54.5604540+02:00".
2025-06-02 22:07:54.703 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 22:07:54.719 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 22:07:54.720 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:07:54.721 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 416.9628ms
2025-06-02 22:07:54.722 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 22:07:54.722 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 433.7638ms
2025-06-02 22:07:59.022 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 22:07:59.025 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:07:59.026 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:07:59.123 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:07:59.124 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:07:59.124 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 98.4312ms
2025-06-02 22:07:59.125 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:07:59.125 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 102.9932ms
2025-06-02 22:08:15.826 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 25
2025-06-02 22:08:15.827 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 22:08:15.827 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:08:15.854 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:08:15.857 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 29.1413ms
2025-06-02 22:08:15.857 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 22:08:15.866 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainException: Invalid role 'Dadadada'. Allowed roles are: User, Manager, Admin.
   at PulseERP.Domain.ValueObjects.Role.Create(String role) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/Role.cs:line 33
   at UserService.UpdateAsync(Guid id, UpdateUserCommand cmd) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 96
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserCommand request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 74
   at lambda_method127(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 22:08:15.895 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:08:15.901 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 500 null application/problem+json; charset=utf-8 75.0552ms
2025-06-02 22:08:25.777 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 22:08:25.777 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:08:25.778 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:08:25.783 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:08:25.784 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:08:25.785 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 6.6745ms
2025-06-02 22:08:25.785 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:08:25.785 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 8.2548ms
2025-06-02 22:08:42.780 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - application/json 24
2025-06-02 22:08:42.782 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 22:08:42.782 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] Update(System.Guid, PulseERP.Application.Users.Commands.UpdateUserCommand) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:08:42.791 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:08:42.795 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" updated at "2025-06-02T22:08:42.7954010+02:00".
2025-06-02 22:08:42.811 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p14='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginAttempts] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastLoginDate] = @p5, [LastName] = @p6, [LockoutEnd] = @p7, [PasswordHash] = @p8, [PasswordLastChangedAt] = @p9, [Phone] = @p10, [RequirePasswordChange] = @p11, [RoleName] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2025-06-02 22:08:42.812 +02:00 [INF] Updated user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 22:08:42.813 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:08:42.814 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 31.3491ms
2025-06-02 22:08:42.814 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-06-02 22:08:42.815 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 35.3445ms
2025-06-02 22:08:46.623 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 22:08:46.623 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:08:46.623 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:08:46.628 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:08:46.629 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:08:46.629 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 5.7606ms
2025-06-02 22:08:46.630 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:08:46.631 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 8.125ms
2025-06-02 22:08:55.668 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 22:08:55.669 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:08:55.669 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:08:55.692 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:08:55.695 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:08:55.696 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 26.4826ms
2025-06-02 22:08:55.696 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:08:55.697 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 28.4809ms
2025-06-02 22:09:02.283 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 22:09:02.286 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 2.7075ms
2025-06-02 22:09:02.531 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 22:09:02.599 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.5582ms
2025-06-02 22:09:18.220 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - null null
2025-06-02 22:09:18.222 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:09:18.223 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Application.Users.Models.UserDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:09:18.228 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-06-02 22:09:18.229 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Application.Users.Models.UserDetails, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:09:18.229 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 6.1355ms
2025-06-02 22:09:18.229 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-06-02 22:09:18.230 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/47d4681f-115c-4819-a3cf-b0c3c5085363 - 200 null application/json; charset=utf-8 9.8807ms
2025-06-02 22:09:47.208 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 22:09:47.209 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:09:47.215 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:09:47.242 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:09:47.2419850".
2025-06-02 22:09:47.265 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 49.7907ms
2025-06-02 22:09:47.265 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:09:47.266 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<User>()
    .Where(u => (EmailAddress)u.Email.Value == __email_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.FindByEmailAsync(EmailAddress email, Boolean bypassCache) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 248
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 139
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method204(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 22:09:47.274 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:09:47.274 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 66.27ms
2025-06-02 22:09:59.566 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 22:09:59.568 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:09:59.568 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:09:59.570 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:09:59.5704350".
2025-06-02 22:09:59.587 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 19.0451ms
2025-06-02 22:09:59.588 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:09:59.588 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<User>()
    .Where(u => (EmailAddress)u.Email.Value == __email_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.FindByEmailAsync(EmailAddress email, Boolean bypassCache) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 248
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 139
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method204(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 22:09:59.595 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:09:59.595 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 28.981ms
2025-06-02 22:11:20.437 +02:00 [INF] Application is shutting down...
2025-06-02 22:11:35.138 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 22:11:35.597 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 22:11:35.601 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 22:11:35.602 +02:00 [INF] Hosting environment: Development
2025-06-02 22:11:35.602 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 22:11:40.349 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 22:11:40.523 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:11:40.549 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:11:40.780 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:11:40.7800370".
2025-06-02 22:11:41.632 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 22:11:42.079 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1525.2344ms
2025-06-02 22:11:42.096 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:11:42.108 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<User>()
    .Where(u => (EmailAddress)u.Email.Value == __email_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.FindByEmailAsync(EmailAddress email, Boolean bypassCache) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 248
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 139
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 22:11:42.153 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:11:42.217 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 1872.2132ms
2025-06-02 22:11:47.891 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 22:11:47.964 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 75.2475ms
2025-06-02 22:11:48.085 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 22:11:48.321 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 236.0872ms
2025-06-02 22:11:53.985 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 22:11:53.990 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:11:53.990 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:11:54.016 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:11:54.0160240".
2025-06-02 22:11:54.043 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 41.0982ms
2025-06-02 22:11:54.043 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:11:54.044 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<User>()
    .Where(u => (EmailAddress)u.Email.Value == __email_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.FindByEmailAsync(EmailAddress email, Boolean bypassCache) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 248
   at PulseERP.Infrastructure.Identity.AuthenticationService.LoginAsync(LoginRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 139
   at AuthenticationController.Login(LoginRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 41
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-02 22:11:54.046 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:11:54.047 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 500 null application/problem+json; charset=utf-8 61.9514ms
2025-06-02 22:13:15.052 +02:00 [INF] Application is shutting down...
2025-06-02 22:13:47.080 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 22:13:47.641 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 22:13:47.645 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 22:13:47.646 +02:00 [INF] Hosting environment: Development
2025-06-02 22:13:47.647 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 22:13:52.844 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 22:13:52.992 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 149.3882ms
2025-06-02 22:13:53.187 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 22:13:53.509 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 322.9542ms
2025-06-02 22:13:58.844 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 78
2025-06-02 22:13:58.901 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:13:58.932 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:13:59.200 +02:00 [INF] Login attempt for koumeil.messaoudi@outlook.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:13:59.2000670".
2025-06-02 22:14:00.021 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 22:14:01.209 +02:00 [INF] Executed DbCommand (172ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:14:01.265 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 2328.2909ms
2025-06-02 22:14:01.267 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:14:01.286 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:14:01.328 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 404 null application/problem+json; charset=utf-8 2483.695ms
2025-06-02 22:14:31.357 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-06-02 22:14:31.362 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-06-02 22:14:31.399 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Users.Models.UserSummary]]]] GetAll(PulseERP.Abstractions.Common.Filters.UserFilter) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-06-02 22:14:31.676 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2025-06-02 22:14:31.717 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
ORDER BY [u].[LastName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-02 22:14:31.746 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Users.Models.UserSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:14:31.766 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 366.9855ms
2025-06-02 22:14:31.766 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-06-02 22:14:31.767 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 409.5609ms
2025-06-02 22:14:59.160 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 65
2025-06-02 22:14:59.175 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:14:59.175 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:14:59.180 +02:00 [INF] Login attempt for batman@gmail.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:14:59.1802660".
2025-06-02 22:14:59.274 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:14:59.810 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [LastLoginDate] = @p1, [LockoutEnd] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-06-02 22:14:59.826 +02:00 [INF] User "47d4681f-115c-4819-a3cf-b0c3c5085363" (batman@gmail.com) successfully logged in from ::1 at "2025-06-02T22:14:59.1802660".
2025-06-02 22:14:59.828 +02:00 [INF] Generating access token for user "47d4681f-115c-4819-a3cf-b0c3c5085363"
2025-06-02 22:14:59.847 +02:00 [INF] Generating refresh token for user "47d4681f-115c-4819-a3cf-b0c3c5085363" from IP ::1
2025-06-02 22:14:59.886 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__tokenType_1='?' (DbType = Int32), @__nowUtc_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = @__tokenType_1 AND [r].[Revoked] IS NULL AND [r].[Expires] > @__nowUtc_2
2025-06-02 22:14:59.923 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RefreshTokens] SET [Revoked] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-06-02 22:14:59.924 +02:00 [INF] Revoked all "Refresh" tokens for user "47d4681f-115c-4819-a3cf-b0c3c5085363" at "2025-06-02T22:14:59.9242440".
2025-06-02 22:14:59.966 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-02 22:14:59.966 +02:00 [INF] "Refresh" token added for user "47d4681f-115c-4819-a3cf-b0c3c5085363", expires "2025-06-09T22:14:59.8480800" at "2025-06-02T22:14:59.9667310".
2025-06-02 22:14:59.968 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Security.DTOs.AuthResponse, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:14:59.978 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 802.3651ms
2025-06-02 22:14:59.978 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:14:59.979 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 200 null application/json; charset=utf-8 818.3377ms
2025-06-02 22:15:31.375 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 64
2025-06-02 22:15:31.376 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:31.376 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:15:31.403 +02:00 [INF] Login attempt for batman@gmail.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:15:31.4035250".
2025-06-02 22:15:31.407 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:15:31.599 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 22:15:31.599 +02:00 [WRN] Invalid login attempt for batman@gmail.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363" at "2025-06-02T22:15:31.4035250". FailedAttempts=1
2025-06-02 22:15:31.600 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 223.3354ms
2025-06-02 22:15:31.600 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:31.601 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:15:31.601 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 226.3546ms
2025-06-02 22:15:34.516 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 64
2025-06-02 22:15:34.516 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:34.517 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:15:34.517 +02:00 [INF] Login attempt for batman@gmail.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:15:34.5177590".
2025-06-02 22:15:34.521 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:15:34.709 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 22:15:34.709 +02:00 [WRN] Invalid login attempt for batman@gmail.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363" at "2025-06-02T22:15:34.5177590". FailedAttempts=2
2025-06-02 22:15:34.709 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 192.7683ms
2025-06-02 22:15:34.710 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:34.710 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:15:34.710 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 194.5481ms
2025-06-02 22:15:35.691 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 64
2025-06-02 22:15:35.691 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:35.691 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:15:35.692 +02:00 [INF] Login attempt for batman@gmail.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:15:35.6923210".
2025-06-02 22:15:35.696 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:15:35.880 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 22:15:35.881 +02:00 [WRN] Invalid login attempt for batman@gmail.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363" at "2025-06-02T22:15:35.6923210". FailedAttempts=3
2025-06-02 22:15:35.881 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 189.6062ms
2025-06-02 22:15:35.881 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:35.882 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:15:35.882 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 191.5248ms
2025-06-02 22:15:36.877 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 64
2025-06-02 22:15:36.878 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:36.878 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:15:36.879 +02:00 [INF] Login attempt for batman@gmail.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:15:36.8792200".
2025-06-02 22:15:36.882 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:15:37.066 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-02 22:15:37.067 +02:00 [INF] SECURITY WARNING: User batman@gmail.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363": next failed attempt will lock account. ("2025-06-02T22:15:36.8792200", Attempts=4)
2025-06-02 22:15:37.067 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 189.3408ms
2025-06-02 22:15:37.068 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:37.068 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:15:37.068 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 191.2434ms
2025-06-02 22:15:40.452 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 64
2025-06-02 22:15:40.452 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:40.453 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:15:40.453 +02:00 [INF] Login attempt for batman@gmail.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:15:40.4538030".
2025-06-02 22:15:40.458 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:15:40.659 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [LockoutEnd] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-06-02 22:15:42.189 +02:00 [INF] Email '🔒 Your Pulse ERP account is temporarily locked' sent to batman@gmail.com at "2025-06-02T20:15:42.1890190Z".
2025-06-02 22:15:42.190 +02:00 [ERR] LOCKOUT: User batman@gmail.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363" locked out at "2025-06-02T22:15:40.4538030". LockoutEnd=22:30 (CEST), FailedAttempts=5
2025-06-02 22:15:42.191 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1738.3675ms
2025-06-02 22:15:42.191 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:15:42.192 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:15:42.193 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 1740.6185ms
2025-06-02 22:16:35.619 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 64
2025-06-02 22:16:35.621 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:16:35.621 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:16:35.621 +02:00 [INF] Login attempt for batman@gmail.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:16:35.6218350".
2025-06-02 22:16:35.626 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:16:36.955 +02:00 [INF] Email '🔒 Your Pulse ERP account is temporarily locked' sent to batman@gmail.com at "2025-06-02T20:16:36.9551250Z".
2025-06-02 22:16:36.956 +02:00 [WRN] LOCKOUT: Account lockout notification sent to batman@gmail.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363", At="2025-06-02T22:16:36.9559870". Locked until 22:30 (CEST).
2025-06-02 22:16:36.957 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1336.1711ms
2025-06-02 22:16:36.958 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:16:36.959 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:16:36.960 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 1340.667ms
2025-06-02 22:16:43.900 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 65
2025-06-02 22:16:43.900 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:16:43.901 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Security.DTOs.AuthResponse]]] Login(PulseERP.Domain.Security.DTOs.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-06-02 22:16:43.901 +02:00 [INF] Login attempt for batman@gmail.com from ::1, UA Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 at "2025-06-02T22:16:43.9017030".
2025-06-02 22:16:43.905 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordLastChangedAt], [u].[Phone], [u].[RequirePasswordChange], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-06-02 22:16:44.942 +02:00 [INF] Email '🔒 Your Pulse ERP account is temporarily locked' sent to batman@gmail.com at "2025-06-02T20:16:44.9421620Z".
2025-06-02 22:16:44.943 +02:00 [WRN] LOCKOUT: Account lockout notification sent to batman@gmail.com, UserId="47d4681f-115c-4819-a3cf-b0c3c5085363", At="2025-06-02T22:16:44.9430410". Locked until 22:30 (CEST).
2025-06-02 22:16:44.944 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 1043.3809ms
2025-06-02 22:16:44.944 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-06-02 22:16:44.945 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-02 22:16:44.946 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 1045.6559ms
2025-06-02 22:17:20.199 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/brands - null null
2025-06-02 22:17:20.200 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 22:17:20.226 +02:00 [INF] Route matched with {action = "GetAll", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Brands.Models.BrandSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams) on controller PulseERP.API.Controllers.BrandsController (PulseERP.API).
2025-06-02 22:17:20.246 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Brands] AS [b]
2025-06-02 22:17:20.343 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[CreatedAt], [b0].[IsActive], [b0].[Name], [b0].[UpdatedAt], [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
FROM (
    SELECT [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
    FROM [Brands] AS [b]
    ORDER BY [b].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
LEFT JOIN [Products] AS [p] ON [b0].[Id] = [p].[BrandId1]
ORDER BY [b0].[Name], [b0].[Id]
2025-06-02 22:17:20.362 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Brands.Models.BrandSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:17:20.368 +02:00 [INF] Executed action PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API) in 141.9577ms
2025-06-02 22:17:20.369 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 22:17:20.369 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/brands - 200 null application/json; charset=utf-8 169.7671ms
2025-06-02 22:45:18.325 +02:00 [INF] Application is shutting down...
2025-06-02 22:45:49.538 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 22:45:50.183 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 22:45:50.187 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 22:45:50.188 +02:00 [INF] Hosting environment: Development
2025-06-02 22:45:50.189 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 22:45:58.940 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-06-02 22:45:59.093 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 153.5568ms
2025-06-02 22:45:59.622 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-02 22:45:59.956 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 335.8336ms
2025-06-02 22:46:08.559 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/brands - null null
2025-06-02 22:46:08.644 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 22:46:08.680 +02:00 [INF] Route matched with {action = "GetAll", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Brands.Models.BrandSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams) on controller PulseERP.API.Controllers.BrandsController (PulseERP.API).
2025-06-02 22:46:10.269 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 22:46:11.381 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Brands] AS [b]
2025-06-02 22:46:11.668 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[CreatedAt], [b0].[IsActive], [b0].[Name], [b0].[UpdatedAt], [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
FROM (
    SELECT [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
    FROM [Brands] AS [b]
    ORDER BY [b].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
LEFT JOIN [Products] AS [p] ON [b0].[Id] = [p].[BrandId1]
ORDER BY [b0].[Name], [b0].[Id]
2025-06-02 22:46:11.718 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Brands.Models.BrandSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:46:11.794 +02:00 [INF] Executed action PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API) in 3105.9958ms
2025-06-02 22:46:11.795 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 22:46:11.815 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/brands - 200 null application/json; charset=utf-8 3255.3608ms
2025-06-02 22:51:27.431 +02:00 [INF] Application is shutting down...
2025-06-02 22:51:59.671 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 22:52:00.546 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 22:52:00.554 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 22:52:00.555 +02:00 [INF] Hosting environment: Development
2025-06-02 22:52:00.555 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-06-02 22:52:06.026 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/brands - null null
2025-06-02 22:52:06.227 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 22:52:06.262 +02:00 [INF] Route matched with {action = "GetAll", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Application.Brands.Models.BrandSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams) on controller PulseERP.API.Controllers.BrandsController (PulseERP.API).
2025-06-02 22:52:07.729 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-06-02 22:52:08.934 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Brands] AS [b]
2025-06-02 22:52:09.247 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[CreatedAt], [b0].[IsActive], [b0].[Name], [b0].[UpdatedAt], [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
FROM (
    SELECT [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
    FROM [Brands] AS [b]
    ORDER BY [b].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
LEFT JOIN [Products] AS [p] ON [b0].[Id] = [p].[BrandId1]
ORDER BY [b0].[Name], [b0].[Id]
2025-06-02 22:52:09.302 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Application.Brands.Models.BrandSummary, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-02 22:52:09.397 +02:00 [INF] Executed action PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API) in 3126.3541ms
2025-06-02 22:52:09.404 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-02 22:52:09.424 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/brands - 200 null application/json; charset=utf-8 3401.9951ms
2025-06-02 22:59:56.837 +02:00 [INF] Application is shutting down...
2025-06-02 23:41:31.857 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-02 23:41:32.509 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-02 23:41:32.514 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-02 23:41:32.515 +02:00 [INF] Hosting environment: Development
2025-06-02 23:41:32.516 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
