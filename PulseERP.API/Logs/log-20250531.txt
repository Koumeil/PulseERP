2025-05-31 02:00:10.315 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:00:11.278 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:00:11.285 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:00:11.287 +02:00 [INF] Hosting environment: Development
2025-05-31 02:00:11.288 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:00:20.858 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-31 02:00:21.361 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - PulseERP.API.Controllers.UsersController.Create (PulseERP.API). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.User.UserInfo]. See inner exception
 ---> System.InvalidOperationException: Can't use schemaId "$UserInfo" for type "$PulseERP.Application.Dtos.User.UserInfo". The same schemaId is already used for type "$PulseERP.Domain.Dtos.Users.UserInfo"
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaRepository.RegisterType(Type type, String schemaId)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.CreateResponseMediaType(Type modelType, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.<>c__DisplayClass42_0.<GenerateResponse>b__2(String contentType)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponse(ApiDescription apiDescription, SchemaRepository schemaRepository, String statusCode, ApiResponseType apiResponseType)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponses(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`4 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:00:21.408 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:00:21.582 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 500 null application/problem+json; charset=utf-8 730.2628ms
2025-05-31 02:00:27.747 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-31 02:00:27.792 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - PulseERP.API.Controllers.UsersController.Create (PulseERP.API). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.User.UserInfo]. See inner exception
 ---> System.InvalidOperationException: Can't use schemaId "$UserInfo" for type "$PulseERP.Application.Dtos.User.UserInfo". The same schemaId is already used for type "$PulseERP.Domain.Dtos.Users.UserInfo"
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaRepository.RegisterType(Type type, String schemaId)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.CreateResponseMediaType(Type modelType, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.<>c__DisplayClass42_0.<GenerateResponse>b__2(String contentType)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponse(ApiDescription apiDescription, SchemaRepository schemaRepository, String statusCode, ApiResponseType apiResponseType)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponses(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`4 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:00:27.797 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:00:27.798 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 500 null application/problem+json; charset=utf-8 52.9123ms
2025-05-31 02:03:46.536 +02:00 [INF] Application is shutting down...
2025-05-31 02:03:59.307 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:03:59.850 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:03:59.854 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:03:59.856 +02:00 [INF] Hosting environment: Development
2025-05-31 02:03:59.856 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:05:49.603 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-31 02:05:49.742 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 141.1701ms
2025-05-31 02:05:49.972 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-31 02:05:50.369 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 397.6125ms
2025-05-31 02:06:57.590 +02:00 [INF] Application is shutting down...
2025-05-31 02:07:31.549 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:07:32.054 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:07:32.060 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:07:32.060 +02:00 [INF] Hosting environment: Development
2025-05-31 02:07:32.061 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:07:36.734 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-31 02:07:36.880 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 146.64ms
2025-05-31 02:07:37.169 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-31 02:07:37.561 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 393.26ms
2025-05-31 02:07:53.607 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/register - application/json 156
2025-05-31 02:07:53.660 +02:00 [INF] Executing endpoint 'AuthenticationController.Register (PulseERP.API)'
2025-05-31 02:07:53.687 +02:00 [INF] Route matched with {action = "Register", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Register(PulseERP.Domain.Dtos.Auth.RegisterRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 02:07:53.903 +02:00 [INF] Registering new user with email koumeil.messaoudi@outlook.com
2025-05-31 02:07:54.677 +02:00 [INF] Executed action AuthenticationController.Register (PulseERP.API) in 983.3998ms
2025-05-31 02:07:54.679 +02:00 [INF] Executed endpoint 'AuthenticationController.Register (PulseERP.API)'
2025-05-31 02:07:54.693 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The 'ProductDescription' property 'Product.Description' could not be mapped because the database provider does not support this type. Consider converting the property value to a type supported by the database using a value converter. See https://aka.ms/efcore-docs-value-converters for more information. Alternately, exclude the property from the model using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ThrowPropertyNotMappedException(String propertyType, IConventionTypeBase typeBase, IConventionProperty unmappedProperty)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.ThrowPropertyNotMappedException(String propertyType, IConventionTypeBase typeBase, IConventionProperty unmappedProperty)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.SqlServer.Infrastructure.Internal.SqlServerModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.SingleOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.Queries.UserQueryRepository.GetByEmailAsync(Email email) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/Queries/UserQueryRepository.cs:line 67
   at PulseERP.Infrastructure.Identity.AuthenticationService.EnsureEmailNotUsedAsync(String email) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 256
   at PulseERP.Infrastructure.Identity.AuthenticationService.RegisterAsync(RegisterRequest request, String ipAddress, String userAgent) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/AuthenticationService.cs:line 51
   at AuthenticationController.Register(RegisterRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/AuthenticationController.cs:line 31
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:07:54.742 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:07:54.795 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/register - 500 null application/problem+json; charset=utf-8 1187.3065ms
2025-05-31 02:08:17.266 +02:00 [INF] Application is shutting down...
2025-05-31 02:14:09.647 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:14:10.357 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:14:10.361 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:14:10.362 +02:00 [INF] Hosting environment: Development
2025-05-31 02:14:10.362 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:14:18.308 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-31 02:14:18.481 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 177.3881ms
2025-05-31 02:14:18.992 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-31 02:14:19.296 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 308.9482ms
2025-05-31 02:14:26.815 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/register - application/json 156
2025-05-31 02:14:26.889 +02:00 [INF] Executing endpoint 'AuthenticationController.Register (PulseERP.API)'
2025-05-31 02:14:26.919 +02:00 [INF] Route matched with {action = "Register", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Register(PulseERP.Domain.Dtos.Auth.RegisterRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 02:14:27.179 +02:00 [INF] Registering new user with email koumeil.messaoudi@outlook.com
2025-05-31 02:14:28.200 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-31 02:14:29.298 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 02:14:30.164 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime2), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FailedLoginAttempts], [FirstName], [LastLoginDate], [LastName], [LockoutEnd], [PasswordHash], [Phone], [RequirePasswordChange], [UpdatedAt], [RoleName])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-05-31 02:14:31.943 +02:00 [INF] Generating access token for user "93372137-f86d-43d1-8208-27c72f71d2d4"
2025-05-31 02:14:31.970 +02:00 [INF] Generating refresh token for user "93372137-f86d-43d1-8208-27c72f71d2d4" from IP 
2025-05-31 02:14:32.013 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Guid), @___time_UtcNow_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = 0 AND [r].[Revoked] IS NULL AND [r].[Expires] > @___time_UtcNow_1
2025-05-31 02:14:32.082 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-31 02:14:32.096 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Dtos.Auth.AuthResponse, PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:14:32.164 +02:00 [INF] Executed action AuthenticationController.Register (PulseERP.API) in 5238.0341ms
2025-05-31 02:14:32.166 +02:00 [INF] Executed endpoint 'AuthenticationController.Register (PulseERP.API)'
2025-05-31 02:14:32.179 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/register - 200 null application/json; charset=utf-8 5364.1358ms
2025-05-31 02:14:53.669 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-31 02:14:53.671 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 1.891ms
2025-05-31 02:14:53.791 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-31 02:14:53.820 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.8287ms
2025-05-31 02:15:01.982 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 77
2025-05-31 02:15:01.989 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:01.999 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 02:15:02.012 +02:00 [INF] Attempting login for email koumeil.messaoudi@outlook.com
2025-05-31 02:15:02.038 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 02:15:02.444 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [LastLoginDate] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 02:15:02.448 +02:00 [INF] Generating access token for user "93372137-f86d-43d1-8208-27c72f71d2d4"
2025-05-31 02:15:02.449 +02:00 [INF] Generating refresh token for user "93372137-f86d-43d1-8208-27c72f71d2d4" from IP ::1
2025-05-31 02:15:02.486 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (DbType = Guid), @___time_UtcNow_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = 0 AND [r].[Revoked] IS NULL AND [r].[Expires] > @___time_UtcNow_1
2025-05-31 02:15:02.550 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@___time_UtcNow_1='?' (DbType = DateTime2), @__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE [r]
SET [r].[Revoked] = @___time_UtcNow_1
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = 0 AND [r].[Revoked] IS NULL
2025-05-31 02:15:02.564 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-31 02:15:02.567 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Dtos.Auth.AuthResponse, PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:15:02.568 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 568.9035ms
2025-05-31 02:15:02.568 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:02.569 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 200 null application/json; charset=utf-8 587.2582ms
2025-05-31 02:15:12.755 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 76
2025-05-31 02:15:12.759 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:12.759 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 02:15:12.774 +02:00 [INF] Attempting login for email koumeil.messaoudi@outlook.com
2025-05-31 02:15:12.842 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 02:15:13.047 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 02:15:13.048 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com. FailedAttempts: 1
2025-05-31 02:15:13.049 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 289.8129ms
2025-05-31 02:15:13.050 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:13.062 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:15:13.068 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 313.2858ms
2025-05-31 02:15:16.602 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 76
2025-05-31 02:15:16.602 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:16.603 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 02:15:16.603 +02:00 [INF] Attempting login for email koumeil.messaoudi@outlook.com
2025-05-31 02:15:16.606 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 02:15:16.814 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 02:15:16.815 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com. FailedAttempts: 2
2025-05-31 02:15:16.815 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 212.4994ms
2025-05-31 02:15:16.815 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:16.816 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:15:16.816 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 214.3199ms
2025-05-31 02:15:17.786 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 76
2025-05-31 02:15:17.786 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:17.787 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 02:15:17.787 +02:00 [INF] Attempting login for email koumeil.messaoudi@outlook.com
2025-05-31 02:15:17.793 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 02:15:17.979 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 02:15:17.980 +02:00 [WRN] Invalid login attempt for koumeil.messaoudi@outlook.com. FailedAttempts: 3
2025-05-31 02:15:17.981 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 193.7897ms
2025-05-31 02:15:17.981 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:17.982 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:15:17.982 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 196.2836ms
2025-05-31 02:15:19.350 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 76
2025-05-31 02:15:19.351 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:19.352 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 02:15:19.353 +02:00 [INF] Attempting login for email koumeil.messaoudi@outlook.com
2025-05-31 02:15:19.361 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 02:15:19.549 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 02:15:19.549 +02:00 [INF] One more attempt before lockout for koumeil.messaoudi@outlook.com
2025-05-31 02:15:19.549 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 197.4955ms
2025-05-31 02:15:19.550 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:19.550 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:15:19.550 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 199.6916ms
2025-05-31 02:15:21.593 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 76
2025-05-31 02:15:21.594 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:21.594 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 02:15:21.595 +02:00 [INF] Attempting login for email koumeil.messaoudi@outlook.com
2025-05-31 02:15:21.616 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 02:15:21.803 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [LockoutEnd] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-31 02:15:21.804 +02:00 [WRN] User koumeil.messaoudi@outlook.com just got locked out. Now: "2025-05-31T00:15:21.6169130Z", LockoutEnd: "2025-05-31T00:30:21.6169130Z", FailedAttempts: 5
2025-05-31 02:15:23.748 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 2153.5402ms
2025-05-31 02:15:23.749 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 02:15:23.751 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:15:23.752 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 2158.7532ms
2025-05-31 02:17:30.279 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Customers - application/json 417
2025-05-31 02:17:30.284 +02:00 [INF] Executing endpoint 'CustomersController.Create (PulseERP.API)'
2025-05-31 02:17:30.307 +02:00 [INF] Route matched with {action = "Create", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Customer.CustomerDto]]] Create(PulseERP.Application.Dtos.Customer.CreateCustomerRequest) on controller CustomersController (PulseERP.API).
2025-05-31 02:17:30.619 +02:00 [INF] Customer "8be12eea-c8e4-4d03-a064-cc20b204c952" added to context
2025-05-31 02:17:30.735 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (Size = 100), @p11='?' (Size = 20), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 50), @p17='?' (Size = 50), @p18='?' (Size = 100), @p19='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Customers] ([Id], [AssignedToUserId], [CompanyName], [CreatedAt], [Email], [FirstContactDate], [FirstName], [Industry], [IsVIP], [LastInteractionDate], [LastName], [Phone], [Source], [Status], [Type], [UpdatedAt], [City], [Country], [Street], [PostalCode])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-05-31 02:17:30.741 +02:00 [INF] Customer "8be12eea-c8e4-4d03-a064-cc20b204c952" created
2025-05-31 02:17:30.769 +02:00 [INF] Customer created: alice.dubois@techinnovateurs.fr
2025-05-31 02:17:30.772 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Application.Dtos.Customer.CustomerDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:17:30.824 +02:00 [INF] Executed action CustomersController.Create (PulseERP.API) in 516.7108ms
2025-05-31 02:17:30.825 +02:00 [INF] Executed endpoint 'CustomersController.Create (PulseERP.API)'
2025-05-31 02:17:30.825 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Customers - 201 null application/json; charset=utf-8 546.2377ms
2025-05-31 02:17:51.822 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Customers - application/json 436
2025-05-31 02:17:51.823 +02:00 [INF] Executing endpoint 'CustomersController.Create (PulseERP.API)'
2025-05-31 02:17:51.823 +02:00 [INF] Route matched with {action = "Create", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Customer.CustomerDto]]] Create(PulseERP.Application.Dtos.Customer.CreateCustomerRequest) on controller CustomersController (PulseERP.API).
2025-05-31 02:17:51.826 +02:00 [INF] Customer "ebda9fd7-c7f0-417d-9092-89379e9ad8ee" added to context
2025-05-31 02:17:51.835 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (Size = 100), @p11='?' (Size = 20), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 50), @p17='?' (Size = 50), @p18='?' (Size = 100), @p19='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Customers] ([Id], [AssignedToUserId], [CompanyName], [CreatedAt], [Email], [FirstContactDate], [FirstName], [Industry], [IsVIP], [LastInteractionDate], [LastName], [Phone], [Source], [Status], [Type], [UpdatedAt], [City], [Country], [Street], [PostalCode])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-05-31 02:17:51.836 +02:00 [INF] Customer "ebda9fd7-c7f0-417d-9092-89379e9ad8ee" created
2025-05-31 02:17:51.837 +02:00 [INF] Customer created: mohamed.benali@solutions-ind.fr
2025-05-31 02:17:51.837 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Application.Dtos.Customer.CustomerDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:17:51.838 +02:00 [INF] Executed action CustomersController.Create (PulseERP.API) in 14.9126ms
2025-05-31 02:17:51.839 +02:00 [INF] Executed endpoint 'CustomersController.Create (PulseERP.API)'
2025-05-31 02:17:51.839 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Customers - 201 null application/json; charset=utf-8 17.3839ms
2025-05-31 02:18:01.818 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Customers - application/json 431
2025-05-31 02:18:01.819 +02:00 [INF] Executing endpoint 'CustomersController.Create (PulseERP.API)'
2025-05-31 02:18:01.820 +02:00 [INF] Route matched with {action = "Create", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Customer.CustomerDto]]] Create(PulseERP.Application.Dtos.Customer.CreateCustomerRequest) on controller CustomersController (PulseERP.API).
2025-05-31 02:18:01.823 +02:00 [INF] Customer "d2b5f153-c71e-4844-815f-f8a0d29f3bdd" added to context
2025-05-31 02:18:01.832 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (Size = 100), @p11='?' (Size = 20), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 50), @p17='?' (Size = 50), @p18='?' (Size = 100), @p19='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Customers] ([Id], [AssignedToUserId], [CompanyName], [CreatedAt], [Email], [FirstContactDate], [FirstName], [Industry], [IsVIP], [LastInteractionDate], [LastName], [Phone], [Source], [Status], [Type], [UpdatedAt], [City], [Country], [Street], [PostalCode])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-05-31 02:18:01.834 +02:00 [INF] Customer "d2b5f153-c71e-4844-815f-f8a0d29f3bdd" created
2025-05-31 02:18:01.834 +02:00 [INF] Customer created: laura.smith@globalfoods.com
2025-05-31 02:18:01.834 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Application.Dtos.Customer.CustomerDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:18:01.835 +02:00 [INF] Executed action CustomersController.Create (PulseERP.API) in 15.0948ms
2025-05-31 02:18:01.835 +02:00 [INF] Executed endpoint 'CustomersController.Create (PulseERP.API)'
2025-05-31 02:18:01.835 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Customers - 201 null application/json; charset=utf-8 16.816ms
2025-05-31 02:18:12.334 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/Customers - null null
2025-05-31 02:18:12.335 +02:00 [INF] Executing endpoint 'CustomersController.GetAll (PulseERP.API)'
2025-05-31 02:18:12.363 +02:00 [INF] Route matched with {action = "GetAll", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.Customer.CustomerDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams, PulseERP.Domain.Query.Customers.CustomerParams) on controller CustomersController (PulseERP.API).
2025-05-31 02:18:12.429 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Customers] AS [c]
2025-05-31 02:18:12.479 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AssignedToUserId], [c].[CompanyName], [c].[CreatedAt], [c].[Email], [c].[FirstContactDate], [c].[FirstName], [c].[Industry], [c].[IsActive], [c].[IsVIP], [c].[LastInteractionDate], [c].[LastName], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdatedAt], [c].[City], [c].[Country], [c].[Street], [c].[PostalCode]
FROM [Customers] AS [c]
ORDER BY [c].[LastName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-31 02:18:12.498 +02:00 [INF] Retrieved 3 customers (Page 1)
2025-05-31 02:18:12.501 +02:00 [INF] API: Customers list fetched with params: {"Search":null,"Status":null,"Type":null,"IsVIP":null,"AssignedToUserId":null,"PageNumber":1,"PageSize":12,"$type":"CustomerParams"}
2025-05-31 02:18:12.503 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Application.Dtos.Customer.CustomerDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:18:12.510 +02:00 [INF] Executed action CustomersController.GetAll (PulseERP.API) in 147.0456ms
2025-05-31 02:18:12.511 +02:00 [INF] Executed endpoint 'CustomersController.GetAll (PulseERP.API)'
2025-05-31 02:18:12.511 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/Customers - 200 null application/json; charset=utf-8 177.3422ms
2025-05-31 02:18:29.221 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/Customers?IsVIP=true - null null
2025-05-31 02:18:29.222 +02:00 [INF] Executing endpoint 'CustomersController.GetAll (PulseERP.API)'
2025-05-31 02:18:29.222 +02:00 [INF] Route matched with {action = "GetAll", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.Customer.CustomerDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams, PulseERP.Domain.Query.Customers.CustomerParams) on controller CustomersController (PulseERP.API).
2025-05-31 02:18:29.272 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__customerParams_IsVIP_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Customers] AS [c]
WHERE [c].[IsVIP] = @__customerParams_IsVIP_0
2025-05-31 02:18:29.291 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__customerParams_IsVIP_0='?' (DbType = Boolean), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AssignedToUserId], [c].[CompanyName], [c].[CreatedAt], [c].[Email], [c].[FirstContactDate], [c].[FirstName], [c].[Industry], [c].[IsActive], [c].[IsVIP], [c].[LastInteractionDate], [c].[LastName], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdatedAt], [c].[City], [c].[Country], [c].[Street], [c].[PostalCode]
FROM [Customers] AS [c]
WHERE [c].[IsVIP] = @__customerParams_IsVIP_0
ORDER BY [c].[LastName]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-05-31 02:18:29.292 +02:00 [INF] Retrieved 1 customers (Page 1)
2025-05-31 02:18:29.293 +02:00 [INF] API: Customers list fetched with params: {"Search":null,"Status":null,"Type":null,"IsVIP":true,"AssignedToUserId":null,"PageNumber":1,"PageSize":12,"$type":"CustomerParams"}
2025-05-31 02:18:29.293 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Application.Dtos.Customer.CustomerDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:18:29.293 +02:00 [INF] Executed action CustomersController.GetAll (PulseERP.API) in 71.3527ms
2025-05-31 02:18:29.294 +02:00 [INF] Executed endpoint 'CustomersController.GetAll (PulseERP.API)'
2025-05-31 02:18:29.294 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/Customers?IsVIP=true - 200 null application/json; charset=utf-8 72.3286ms
2025-05-31 02:18:43.087 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/Customers?IsVIP=false - null null
2025-05-31 02:18:43.087 +02:00 [INF] Executing endpoint 'CustomersController.GetAll (PulseERP.API)'
2025-05-31 02:18:43.088 +02:00 [INF] Route matched with {action = "GetAll", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.Customer.CustomerDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams, PulseERP.Domain.Query.Customers.CustomerParams) on controller CustomersController (PulseERP.API).
2025-05-31 02:18:43.112 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__customerParams_IsVIP_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Customers] AS [c]
WHERE [c].[IsVIP] = @__customerParams_IsVIP_0
2025-05-31 02:18:43.115 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__customerParams_IsVIP_0='?' (DbType = Boolean), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AssignedToUserId], [c].[CompanyName], [c].[CreatedAt], [c].[Email], [c].[FirstContactDate], [c].[FirstName], [c].[Industry], [c].[IsActive], [c].[IsVIP], [c].[LastInteractionDate], [c].[LastName], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdatedAt], [c].[City], [c].[Country], [c].[Street], [c].[PostalCode]
FROM [Customers] AS [c]
WHERE [c].[IsVIP] = @__customerParams_IsVIP_0
ORDER BY [c].[LastName]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-05-31 02:18:43.116 +02:00 [INF] Retrieved 2 customers (Page 1)
2025-05-31 02:18:43.116 +02:00 [INF] API: Customers list fetched with params: {"Search":null,"Status":null,"Type":null,"IsVIP":false,"AssignedToUserId":null,"PageNumber":1,"PageSize":12,"$type":"CustomerParams"}
2025-05-31 02:18:43.116 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Application.Dtos.Customer.CustomerDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:18:43.117 +02:00 [INF] Executed action CustomersController.GetAll (PulseERP.API) in 28.9484ms
2025-05-31 02:18:43.117 +02:00 [INF] Executed endpoint 'CustomersController.GetAll (PulseERP.API)'
2025-05-31 02:18:43.117 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/Customers?IsVIP=false - 200 null application/json; charset=utf-8 30.2572ms
2025-05-31 02:19:38.963 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 218
2025-05-31 02:19:38.968 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:19:38.979 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:19:39.109 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__trimmed_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER([b].[Name]) = @__trimmed_0
2025-05-31 02:19:39.166 +02:00 [INF] Product "73376b1b-79c1-46c5-b5bb-cfca1fdfb4fc" added to context
2025-05-31 02:19:39.253 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 500) (DbType = AnsiString), @p10='?' (DbType = Boolean), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [IsActive], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-05-31 02:19:39.275 +02:00 [INF] Product Ordinateur Portable UltraSlim created with ID "73376b1b-79c1-46c5-b5bb-cfca1fdfb4fc"
2025-05-31 02:19:39.280 +02:00 [INF] Product created: Ordinateur Portable UltraSlim
2025-05-31 02:19:39.282 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Application.Dtos.Product.ProductDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:19:39.291 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 311.3162ms
2025-05-31 02:19:39.291 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:19:39.292 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 329.4545ms
2025-05-31 02:19:56.116 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 205
2025-05-31 02:19:56.117 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:19:56.117 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:19:56.144 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__trimmed_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER([b].[Name]) = @__trimmed_0
2025-05-31 02:19:56.146 +02:00 [INF] Product "4d441f05-6483-4faf-97d8-5716341c3aa7" added to context
2025-05-31 02:19:56.207 +02:00 [ERR] Failed executing DbCommand (57ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 500) (DbType = AnsiString), @p10='?' (DbType = Boolean), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [IsActive], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[Quantity]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-31 02:19:56.231 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a1b6617a-9cf2-474a-807d-8efeade111e0
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a1b6617a-9cf2-474a-807d-8efeade111e0
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-31 02:19:56.234 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 116.6705ms
2025-05-31 02:19:56.234 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:19:56.237 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a1b6617a-9cf2-474a-807d-8efeade111e0
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 75
   at ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method614(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:19:56.250 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:19:56.250 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 133.8963ms
2025-05-31 02:22:30.318 +02:00 [INF] Application is shutting down...
2025-05-31 02:22:47.787 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:22:48.592 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:22:48.598 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:22:48.599 +02:00 [INF] Hosting environment: Development
2025-05-31 02:22:48.600 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:22:52.121 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 205
2025-05-31 02:22:52.340 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:22:52.403 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:22:54.228 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-31 02:22:55.514 +02:00 [INF] Executed DbCommand (82ms) [Parameters=[@__trimmed_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER([b].[Name]) = @__trimmed_0
2025-05-31 02:22:55.736 +02:00 [INF] Product "f48daba0-9205-4459-8b58-afe7fafba1c5" added to context
2025-05-31 02:22:55.935 +02:00 [ERR] Failed executing DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 500) (DbType = AnsiString), @p10='?' (DbType = Boolean), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [IsActive], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[Quantity]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-31 02:22:55.974 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:923a2f65-31ef-4a02-a81a-b9e6cb131df5
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:923a2f65-31ef-4a02-a81a-b9e6cb131df5
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-31 02:22:55.991 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 3579.5169ms
2025-05-31 02:22:56.000 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:22:56.018 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:923a2f65-31ef-4a02-a81a-b9e6cb131df5
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 77
   at ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:22:56.061 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:22:56.140 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 4023.3253ms
2025-05-31 02:25:48.010 +02:00 [INF] Application is shutting down...
2025-05-31 02:25:58.342 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:25:59.060 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:25:59.063 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:25:59.064 +02:00 [INF] Hosting environment: Development
2025-05-31 02:25:59.064 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:27:03.877 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 205
2025-05-31 02:27:03.960 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:27:03.981 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:27:04.988 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-31 02:27:05.866 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__trimmed_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER([b].[Name]) = @__trimmed_0
2025-05-31 02:27:06.030 +02:00 [INF] Product "d1ae9c77-c1b7-4c78-9f55-182a674e5405" added to context
2025-05-31 02:27:06.161 +02:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 500) (DbType = AnsiString), @p10='?' (DbType = Boolean), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [IsActive], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[Quantity]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-31 02:27:06.188 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:31309e9e-3142-40d7-91df-c14755b8269d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:31309e9e-3142-40d7-91df-c14755b8269d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-31 02:27:06.197 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 2210.8817ms
2025-05-31 02:27:06.203 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:27:06.214 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:31309e9e-3142-40d7-91df-c14755b8269d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 81
   at ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:27:06.230 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:27:06.270 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 2395.7306ms
2025-05-31 02:27:11.706 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-31 02:27:11.807 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 102.8023ms
2025-05-31 02:27:12.054 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-31 02:27:12.253 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 198.6307ms
2025-05-31 02:27:31.097 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 205
2025-05-31 02:27:31.101 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:27:31.102 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:27:31.138 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__trimmed_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER([b].[Name]) = @__trimmed_0
2025-05-31 02:27:31.141 +02:00 [INF] Product "6308d2bc-4fd5-4bf4-ac40-55dc65c9af5a" added to context
2025-05-31 02:27:31.149 +02:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 500) (DbType = AnsiString), @p10='?' (DbType = Boolean), @p11='?' (Size = 100), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [IsActive], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[Quantity]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-31 02:27:31.154 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:31309e9e-3142-40d7-91df-c14755b8269d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:31309e9e-3142-40d7-91df-c14755b8269d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-31 02:27:31.161 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 58.9153ms
2025-05-31 02:27:31.161 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:27:31.162 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (6e5f5d27-5afb-4e00-ab4e-a1089ac9664d).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:31309e9e-3142-40d7-91df-c14755b8269d
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 81
   at ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:27:31.166 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:27:31.167 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 70.0556ms
2025-05-31 02:44:03.242 +02:00 [INF] Application is shutting down...
2025-05-31 02:44:29.017 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:44:29.676 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:44:29.683 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:44:29.685 +02:00 [INF] Hosting environment: Development
2025-05-31 02:44:29.686 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:44:36.525 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-31 02:44:36.698 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 174.994ms
2025-05-31 02:44:37.173 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-31 02:44:37.460 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 287.6278ms
2025-05-31 02:44:48.709 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 205
2025-05-31 02:44:48.783 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:44:48.811 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:44:50.293 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-31 02:44:51.798 +02:00 [INF] Executed DbCommand (104ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-05-31 02:44:51.996 +02:00 [INF] Product "5313ef24-a9c2-45a6-b39c-24eb03673b7a" added to context
2025-05-31 02:44:52.198 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[Quantity]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-31 02:44:52.241 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'IsActive', table 'PulseERP.dbo.Brands'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:776d5574-91d1-4990-b155-671a327e2a38
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'IsActive', table 'PulseERP.dbo.Brands'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:776d5574-91d1-4990-b155-671a327e2a38
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-31 02:44:52.254 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 3437.5579ms
2025-05-31 02:44:52.256 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:44:52.271 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'IsActive', table 'PulseERP.dbo.Brands'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:776d5574-91d1-4990-b155-671a327e2a38
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 81
   at ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:44:52.301 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:44:52.352 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 3643.1577ms
2025-05-31 02:45:05.310 +02:00 [INF] Application is shutting down...
2025-05-31 02:47:01.891 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:47:02.552 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:47:02.559 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:47:02.560 +02:00 [INF] Hosting environment: Development
2025-05-31 02:47:02.561 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:47:18.476 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 205
2025-05-31 02:47:18.635 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:47:18.665 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:47:20.249 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-31 02:47:21.564 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-05-31 02:47:21.833 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
2025-05-31 02:47:21.930 +02:00 [INF] Product "1347ed71-3664-479e-bd6e-f15ed4f23a1e" added to context
2025-05-31 02:47:21.976 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[Quantity]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-05-31 02:47:21.983 +02:00 [INF] Product Abonnement Support 24/7 created with ID "1347ed71-3664-479e-bd6e-f15ed4f23a1e"
2025-05-31 02:47:22.009 +02:00 [INF] Product created: Abonnement Support 24/7
2025-05-31 02:47:22.037 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Application.Dtos.Product.ProductDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:47:22.209 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 3535.4875ms
2025-05-31 02:47:22.220 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:47:22.317 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 3842.136ms
2025-05-31 02:48:25.637 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 218
2025-05-31 02:48:25.649 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:48:25.652 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:48:25.711 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-05-31 02:48:25.730 +02:00 [INF] Product "9f0b9e0d-a0af-4aea-89a0-50f7d42b1f3a" added to context
2025-05-31 02:48:25.792 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-31 02:48:25.837 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (e245fb48-ad60-4bf4-975c-257d092d012c).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:56bb4fb0-6946-41e4-a260-bfba167b50f7
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (e245fb48-ad60-4bf4-975c-257d092d012c).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:56bb4fb0-6946-41e4-a260-bfba167b50f7
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-31 02:48:25.845 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 192.3455ms
2025-05-31 02:48:25.845 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:48:25.862 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (e245fb48-ad60-4bf4-975c-257d092d012c).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:56bb4fb0-6946-41e4-a260-bfba167b50f7
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 81
   at ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:48:25.886 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:48:25.917 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 280.0559ms
2025-05-31 02:52:50.092 +02:00 [INF] Application is shutting down...
2025-05-31 02:53:29.724 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 02:53:31.406 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 02:53:31.426 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 02:53:31.429 +02:00 [INF] Hosting environment: Development
2025-05-31 02:53:31.430 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 02:53:33.413 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 218
2025-05-31 02:53:33.731 +02:00 [INF] Executing endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:53:33.888 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.Product.ProductDto]]] Create(PulseERP.Application.Dtos.Product.CreateProductRequest) on controller ProductsController (PulseERP.API).
2025-05-31 02:53:38.313 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-31 02:53:40.803 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE LOWER(LTRIM(RTRIM([b].[Name]))) = @__normalized_0
2025-05-31 02:53:41.771 +02:00 [INF] Product "c0697789-10f1-4122-b16d-65ea075d09c8" added to context
2025-05-31 02:53:42.279 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [Status], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-05-31 02:53:42.348 +02:00 [INF] Product Licence Logiciel Premium created with ID "c0697789-10f1-4122-b16d-65ea075d09c8"
2025-05-31 02:53:42.377 +02:00 [INF] Product created: Licence Logiciel Premium
2025-05-31 02:53:42.427 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Application.Dtos.Product.ProductDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 02:53:42.711 +02:00 [INF] Executed action ProductsController.Create (PulseERP.API) in 8809.5545ms
2025-05-31 02:53:42.723 +02:00 [INF] Executed endpoint 'ProductsController.Create (PulseERP.API)'
2025-05-31 02:53:42.799 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 9397.9691ms
2025-05-31 02:54:51.091 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-05-31 02:54:51.130 +02:00 [INF] Executing endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-05-31 02:54:51.182 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.Product.ProductDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams, PulseERP.Domain.Query.Products.ProductParams) on controller ProductsController (PulseERP.API).
2025-05-31 02:54:51.412 +02:00 [INF] Executed action ProductsController.GetAll (PulseERP.API) in 229.1496ms
2025-05-31 02:54:51.413 +02:00 [INF] Executed endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-05-31 02:54:51.431 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Product>()
    .OrderBy(p => p.Name.Value)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.CountAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.GetAllAsync(PaginationParams pagination, ProductParams productParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 55
   at PulseERP.Application.Services.ProductService.GetAllAsync(PaginationParams pagination, ProductParams productParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 39
   at ProductsController.GetAll(PaginationParams paginationParams, ProductParams productParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 27
   at lambda_method217(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-05-31 02:54:51.465 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 02:54:51.478 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 500 null application/problem+json; charset=utf-8 387.5262ms
2025-05-31 02:58:48.795 +02:00 [INF] Application is shutting down...
2025-05-31 03:00:33.756 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 03:00:34.369 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 03:00:34.373 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 03:00:34.375 +02:00 [INF] Hosting environment: Development
2025-05-31 03:00:34.376 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 03:00:40.469 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-05-31 03:00:40.622 +02:00 [INF] Executing endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-05-31 03:00:40.673 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.Product.ProductDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams, PulseERP.Domain.Query.Products.ProductParams) on controller ProductsController (PulseERP.API).
2025-05-31 03:00:42.433 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-31 03:00:43.517 +02:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-05-31 03:00:43.807 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[BrandId1], [p0].[CreatedAt], [p0].[Description], [p0].[IsActive], [p0].[IsService], [p0].[Name], [p0].[Price], [p0].[Quantity], [p0].[Status], [p0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[IsActive], [b].[Name], [b].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[Status], [p].[UpdatedAt]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
ORDER BY [p0].[Name]
2025-05-31 03:00:43.841 +02:00 [INF] Retrieved products list: 2 items
2025-05-31 03:00:43.853 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Application.Dtos.Product.ProductDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 03:00:43.940 +02:00 [INF] Executed action ProductsController.GetAll (PulseERP.API) in 3261.2097ms
2025-05-31 03:00:43.948 +02:00 [INF] Executed endpoint 'ProductsController.GetAll (PulseERP.API)'
2025-05-31 03:00:43.971 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 3506.867ms
2025-05-31 03:01:56.449 +02:00 [INF] Application is shutting down...
2025-05-31 03:02:08.917 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-31 03:02:09.382 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-31 03:02:09.386 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-31 03:02:09.387 +02:00 [INF] Hosting environment: Development
2025-05-31 03:02:09.387 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-31 03:02:15.651 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 145
2025-05-31 03:02:15.733 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-31 03:02:15.753 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.User.UserInfo]]] Create(PulseERP.Application.Dtos.User.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-31 03:02:16.144 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-31 03:02:16.194 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 433.5482ms
2025-05-31 03:02:16.216 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-31 03:02:16.224 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 400 null application/problem+json; charset=utf-8 574.4147ms
2025-05-31 03:02:27.142 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 144
2025-05-31 03:02:27.147 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-31 03:02:27.148 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.User.UserInfo]]] Create(PulseERP.Application.Dtos.User.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-31 03:02:28.588 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-31 03:02:29.569 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime2), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FailedLoginAttempts], [FirstName], [LastLoginDate], [LastName], [LockoutEnd], [PasswordHash], [Phone], [RequirePasswordChange], [UpdatedAt], [RoleName])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-05-31 03:02:29.674 +02:00 [INF] User created with email gmaxfreakx@gmail.com
2025-05-31 03:02:29.681 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Application.Dtos.User.UserInfo, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 03:02:29.729 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 2580.5914ms
2025-05-31 03:02:29.731 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-31 03:02:29.747 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 201 null application/json; charset=utf-8 2605.6392ms
2025-05-31 03:02:40.290 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-31 03:02:40.297 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-31 03:02:40.310 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.User.UserDto]]]] GetAll(PulseERP.Domain.Query.Users.UserParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-31 03:02:40.773 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2025-05-31 03:02:40.918 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
ORDER BY [u].[LastName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-31 03:02:40.962 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Application.Dtos.User.UserDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 03:02:40.981 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 670.5116ms
2025-05-31 03:02:40.981 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-31 03:02:40.982 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 691.9728ms
2025-05-31 03:03:16.583 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 68
2025-05-31 03:03:16.585 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:03:16.620 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 03:03:16.638 +02:00 [INF] Attempting login for email gmxfreakx@gmail.com
2025-05-31 03:03:16.742 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 03:03:16.743 +02:00 [WRN] Invalid login attempt for unknown user gmxfreakx@gmail.com
2025-05-31 03:03:16.745 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 124.2884ms
2025-05-31 03:03:16.745 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:03:16.755 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 03:03:16.757 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 404 null application/problem+json; charset=utf-8 174.2059ms
2025-05-31 03:03:45.898 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 143
2025-05-31 03:03:45.903 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-31 03:03:45.931 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Application.Dtos.User.UserInfo]]] Create(PulseERP.Application.Dtos.User.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-31 03:03:46.265 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p6='?' (Size = 100), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime2), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FailedLoginAttempts], [FirstName], [LastLoginDate], [LastName], [LockoutEnd], [PasswordHash], [Phone], [RequirePasswordChange], [UpdatedAt], [RoleName])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-05-31 03:03:46.267 +02:00 [INF] User created with email gmxfreakx@gmail.com
2025-05-31 03:03:46.268 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Application.Dtos.User.UserInfo, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 03:03:46.270 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 338.1213ms
2025-05-31 03:03:46.270 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-31 03:03:46.271 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 201 null application/json; charset=utf-8 372.7291ms
2025-05-31 03:03:52.246 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 68
2025-05-31 03:03:52.248 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:03:52.249 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 03:03:52.251 +02:00 [INF] Attempting login for email gmxfreakx@gmail.com
2025-05-31 03:03:52.282 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 03:03:52.498 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [LastLoginDate] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 03:03:52.503 +02:00 [INF] Generating access token for user "1e113472-f3a1-4d83-b391-cb359fce9b52"
2025-05-31 03:03:52.538 +02:00 [INF] Generating refresh token for user "1e113472-f3a1-4d83-b391-cb359fce9b52" from IP ::1
2025-05-31 03:03:52.582 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Guid), @___time_UtcNow_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[CreatedByIp], [r].[CreatedByUserAgent], [r].[Expires], [r].[Revoked], [r].[Token], [r].[TokenType], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[TokenType] = 0 AND [r].[Revoked] IS NULL AND [r].[Expires] > @___time_UtcNow_1
2025-05-31 03:03:52.646 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedByIp], [CreatedByUserAgent], [Expires], [Revoked], [Token], [TokenType], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-31 03:03:52.649 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Dtos.Auth.AuthResponse, PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 03:03:52.663 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 413.9511ms
2025-05-31 03:03:52.663 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:03:52.663 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 200 null application/json; charset=utf-8 417.0846ms
2025-05-31 03:04:10.989 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-31 03:04:10.990 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-31 03:04:10.990 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.User.UserDto]]]] GetAll(PulseERP.Domain.Query.Users.UserParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-31 03:04:10.994 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2025-05-31 03:04:10.998 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
ORDER BY [u].[LastName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-31 03:04:11.000 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Application.Dtos.User.UserDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 03:04:11.001 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 10.8787ms
2025-05-31 03:04:11.001 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-31 03:04:11.002 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 12.9824ms
2025-05-31 03:04:30.821 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 67
2025-05-31 03:04:30.822 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:30.822 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 03:04:30.826 +02:00 [INF] Attempting login for email gmxfreakx@gmail.com
2025-05-31 03:04:30.847 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 03:04:31.056 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 03:04:31.056 +02:00 [WRN] Invalid login attempt for gmxfreakx@gmail.com. FailedAttempts: 1
2025-05-31 03:04:31.057 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 234.5856ms
2025-05-31 03:04:31.057 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:31.058 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 03:04:31.059 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 237.3364ms
2025-05-31 03:04:32.415 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 67
2025-05-31 03:04:32.415 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:32.416 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 03:04:32.416 +02:00 [INF] Attempting login for email gmxfreakx@gmail.com
2025-05-31 03:04:32.419 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 03:04:32.629 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 03:04:32.629 +02:00 [WRN] Invalid login attempt for gmxfreakx@gmail.com. FailedAttempts: 2
2025-05-31 03:04:32.630 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 214.1622ms
2025-05-31 03:04:32.630 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:32.630 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 03:04:32.631 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 215.4149ms
2025-05-31 03:04:35.216 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 67
2025-05-31 03:04:35.217 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:35.217 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 03:04:35.217 +02:00 [INF] Attempting login for email gmxfreakx@gmail.com
2025-05-31 03:04:35.221 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 03:04:35.410 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 03:04:35.410 +02:00 [WRN] Invalid login attempt for gmxfreakx@gmail.com. FailedAttempts: 3
2025-05-31 03:04:35.411 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 194.0222ms
2025-05-31 03:04:35.411 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:35.412 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 03:04:35.412 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 195.7895ms
2025-05-31 03:04:39.666 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-31 03:04:39.667 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-31 03:04:39.667 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.User.UserDto]]]] GetAll(PulseERP.Domain.Query.Users.UserParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-31 03:04:39.670 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2025-05-31 03:04:39.697 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
ORDER BY [u].[LastName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-31 03:04:39.704 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Application.Dtos.User.UserDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 03:04:39.704 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 37.4553ms
2025-05-31 03:04:39.704 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-31 03:04:39.705 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 38.4137ms
2025-05-31 03:04:44.370 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 67
2025-05-31 03:04:44.370 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:44.371 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 03:04:44.371 +02:00 [INF] Attempting login for email gmxfreakx@gmail.com
2025-05-31 03:04:44.374 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 03:04:44.559 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-31 03:04:44.559 +02:00 [INF] One more attempt before lockout for gmxfreakx@gmail.com
2025-05-31 03:04:44.560 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 189.0689ms
2025-05-31 03:04:44.560 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:44.560 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 03:04:44.561 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 190.6827ms
2025-05-31 03:04:47.816 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Authentication/login - application/json 67
2025-05-31 03:04:47.816 +02:00 [INF] Executing endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:47.816 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Dtos.Auth.AuthResponse]]] Login(PulseERP.Domain.Dtos.Auth.LoginRequest) on controller AuthenticationController (PulseERP.API).
2025-05-31 03:04:47.817 +02:00 [INF] Attempting login for email gmxfreakx@gmail.com
2025-05-31 03:04:47.821 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-31 03:04:48.010 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0, [LockoutEnd] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-31 03:04:48.011 +02:00 [WRN] User gmxfreakx@gmail.com just got locked out. Now: "2025-05-31T01:04:47.8216960Z", LockoutEnd: "2025-05-31T01:19:47.8216960Z", FailedAttempts: 5
2025-05-31 03:04:50.162 +02:00 [INF] Executed action AuthenticationController.Login (PulseERP.API) in 2345.3647ms
2025-05-31 03:04:50.162 +02:00 [INF] Executed endpoint 'AuthenticationController.Login (PulseERP.API)'
2025-05-31 03:04:50.163 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-31 03:04:50.164 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Authentication/login - 401 null application/problem+json; charset=utf-8 2347.8592ms
2025-05-31 03:04:53.909 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-31 03:04:53.909 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-31 03:04:53.909 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Application.Dtos.User.UserDto]]]] GetAll(PulseERP.Domain.Query.Users.UserParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-31 03:04:53.913 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2025-05-31 03:04:53.925 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsActive], [u].[LastLoginDate], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[Phone], [u].[RequirePasswordChange], [u].[UpdatedAt], [u].[RoleName]
FROM [Users] AS [u]
ORDER BY [u].[LastName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-31 03:04:53.942 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Application.Dtos.User.UserDto, PulseERP.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-31 03:04:53.952 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 42.3993ms
2025-05-31 03:04:53.952 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-31 03:04:53.952 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 43.5905ms
2025-05-31 03:32:47.144 +02:00 [INF] Application is shutting down...
