2025-06-10 00:23:06.265 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 00:23:06.326 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:23:06.329 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:23:06.332 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:23:06.341 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 00:23:06.364 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 00:23:06.499 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 00:23:06.500 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 00:23:06.500 +02:00 [INF] Hosting environment: Development
2025-06-10 00:23:06.500 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 00:23:23.997 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 00:23:24.030 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 00:23:24.037 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 00:23:24.135 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 00:23:24.159 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 00:23:24.168 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 129.6763ms
2025-06-10 00:23:24.169 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 00:23:24.171 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 175.0593ms
2025-06-10 00:24:58.870 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 00:24:58.875 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:24:58.883 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 00:24:58.944 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 00:24:58.955 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 00:24:59.016 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p13='?' (DbType = Guid), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 500) (DbType = AnsiString), @p17='?' (DbType = Boolean), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 200), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [BrandId] = @p13, [CreatedAt] = @p14, [DeletedAt] = @p15, [Description] = @p16, [IsActive] = @p17, [IsDeleted] = @p18, [IsService] = @p19, [LastSoldAt] = @p20, [Name] = @p21, [Status] = @p22, [UpdatedAt] = @p23, [PriceAmount] = @p24
OUTPUT 1
WHERE [Id] = @p25;
2025-06-10 00:24:59.026 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 143.009ms
2025-06-10 00:24:59.026 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:24:59.028 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 130
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method332(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 00:24:59.037 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 00:24:59.039 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 168.8927ms
2025-06-10 00:33:24.674 +02:00 [INF] Application is shutting down...
2025-06-10 00:33:28.550 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 00:33:28.610 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:33:28.614 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:33:28.617 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:33:28.626 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 00:33:28.649 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 00:33:28.762 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 00:33:28.762 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 00:33:28.762 +02:00 [INF] Hosting environment: Development
2025-06-10 00:33:28.762 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 00:33:32.333 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 00:33:32.370 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:33:32.378 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 00:33:32.485 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 00:33:32.510 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 00:33:32.563 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p13='?' (DbType = Guid), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 500) (DbType = AnsiString), @p17='?' (DbType = Boolean), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 200), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [BrandId] = @p13, [CreatedAt] = @p14, [DeletedAt] = @p15, [Description] = @p16, [IsActive] = @p17, [IsDeleted] = @p18, [IsService] = @p19, [LastSoldAt] = @p20, [Name] = @p21, [Status] = @p22, [UpdatedAt] = @p23, [PriceAmount] = @p24
OUTPUT 1
WHERE [Id] = @p25;
2025-06-10 00:33:32.572 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 192.5415ms
2025-06-10 00:33:32.573 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:33:32.575 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 130
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 00:33:32.583 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 00:33:32.588 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 255.5608ms
2025-06-10 00:36:20.152 +02:00 [INF] Application is shutting down...
2025-06-10 00:36:23.060 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 00:36:23.122 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:36:23.125 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:36:23.128 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:36:23.137 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 00:36:23.158 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 00:36:23.271 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 00:36:23.271 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 00:36:23.271 +02:00 [INF] Hosting environment: Development
2025-06-10 00:36:23.271 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 00:36:26.890 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 00:36:26.929 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:36:26.936 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 00:36:27.043 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 00:36:27.070 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 00:36:27.125 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p13='?' (Size = 200), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 00:36:27.135 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 197.354ms
2025-06-10 00:36:27.136 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:36:27.139 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 129
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 00:36:27.145 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 00:36:27.150 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 261.9829ms
2025-06-10 00:42:14.022 +02:00 [INF] Application is shutting down...
2025-06-10 00:42:18.023 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 00:42:18.084 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:42:18.088 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:42:18.091 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:42:18.100 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 00:42:18.123 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 00:42:18.243 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 00:42:18.243 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 00:42:18.244 +02:00 [INF] Hosting environment: Development
2025-06-10 00:42:18.244 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 00:42:23.690 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 00:42:23.727 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:42:23.734 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 00:42:23.833 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency]
FROM [Products] AS [p]
WHERE [p].[Id] = @__id_0
2025-06-10 00:42:23.849 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 114.5931ms
2025-06-10 00:42:23.851 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:42:23.853 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at PulseERP.Domain.Entities.Product.SetQuantity(Int32 newQuantity) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Domain/Entities/Product.cs:line 136
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 117
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 00:42:23.860 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 00:42:23.866 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 177.6116ms
2025-06-10 00:44:15.474 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 00:44:15.483 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:44:15.485 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 00:44:15.540 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency]
FROM [Products] AS [p]
WHERE [p].[Id] = @__id_0
2025-06-10 00:44:15.541 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 55.2597ms
2025-06-10 00:44:15.542 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:44:15.542 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at PulseERP.Domain.Entities.Product.SetQuantity(Int32 newQuantity) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Domain/Entities/Product.cs:line 136
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 117
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 00:44:15.543 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 00:44:15.544 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 70.2363ms
2025-06-10 00:44:31.248 +02:00 [INF] Application is shutting down...
2025-06-10 00:44:37.323 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 00:44:37.470 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:44:37.475 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:44:37.480 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 00:44:37.500 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 00:44:37.616 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 00:44:37.814 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 00:44:37.814 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 00:44:37.815 +02:00 [INF] Hosting environment: Development
2025-06-10 00:44:37.815 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 00:44:56.968 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 00:44:57.034 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:44:57.041 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 00:44:57.155 +02:00 [INF] Executing action method PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) - Validation state: "Valid"
2025-06-10 00:45:06.859 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency]
FROM [Products] AS [p]
WHERE [p].[Id] = @__id_0
2025-06-10 00:46:41.462 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 104418.0266ms
2025-06-10 00:46:41.465 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 00:46:41.476 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at PulseERP.Domain.Entities.Product.SetQuantity(Int32 newQuantity) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Domain/Entities/Product.cs:line 136
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 117
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 00:46:41.488 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 00:46:41.515 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 104548.6584ms
2025-06-10 01:04:14.805 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:04:14.866 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:04:14.869 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:04:14.872 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:04:14.882 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:04:14.907 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:04:15.074 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:04:15.074 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:04:15.074 +02:00 [INF] Hosting environment: Development
2025-06-10 01:04:15.074 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:05:32.620 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:05:32.657 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:05:32.663 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:05:32.746 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency]
FROM [Products] AS [p]
WHERE [p].[Id] = @__id_0
2025-06-10 01:05:32.766 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:05:32.771 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 106.5027ms
2025-06-10 01:05:32.772 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:05:32.775 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at PulseERP.Domain.Entities.Product.SetQuantity(Int32 newQuantity) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Domain/Entities/Product.cs:line 136
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 110
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:05:32.782 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:05:32.787 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 169.1121ms
2025-06-10 01:23:35.007 +02:00 [INF] Application is shutting down...
2025-06-10 01:23:39.877 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:23:39.939 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:23:39.942 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:23:39.946 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:23:39.956 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:23:39.979 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:23:40.093 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:23:40.093 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:23:40.093 +02:00 [INF] Hosting environment: Development
2025-06-10 01:23:40.093 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:24:16.632 +02:00 [INF] Application is shutting down...
2025-06-10 01:24:19.547 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:24:19.609 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:24:19.612 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:24:19.616 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:24:19.626 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:24:19.647 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:24:19.769 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:24:19.769 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:24:19.769 +02:00 [INF] Hosting environment: Development
2025-06-10 01:24:19.769 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:24:24.806 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:24:24.847 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:24:24.854 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:24:24.970 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 01:24:24.994 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:24:25.051 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p13='?' (Size = 200), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 01:24:25.060 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 205.01ms
2025-06-10 01:24:25.061 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:24:25.064 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:24:25.073 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:24:25.078 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 273.3886ms
2025-06-10 01:31:19.720 +02:00 [INF] Application is shutting down...
2025-06-10 01:31:24.349 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:31:24.409 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:31:24.413 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:31:24.416 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:31:24.424 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:31:24.443 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:31:24.594 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:31:24.594 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:31:24.594 +02:00 [INF] Hosting environment: Development
2025-06-10 01:31:24.594 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:31:30.951 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:31:30.989 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:31:30.999 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:31:31.114 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 01:31:31.138 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:31:31.227 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p13='?' (Size = 200), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 01:31:31.237 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 237.0039ms
2025-06-10 01:31:31.239 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:31:31.242 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:31:31.249 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:31:31.254 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 304.1038ms
2025-06-10 01:35:14.968 +02:00 [INF] Application is shutting down...
2025-06-10 01:35:17.909 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:35:17.969 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:35:17.972 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:35:17.975 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:35:17.984 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:35:18.004 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:35:18.136 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:35:18.136 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:35:18.136 +02:00 [INF] Hosting environment: Development
2025-06-10 01:35:18.136 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:35:24.363 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:35:24.404 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:35:24.412 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:35:24.530 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 01:35:24.554 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:35:24.579 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 166.0165ms
2025-06-10 01:35:24.581 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:35:24.583 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format. Failure to parse near offset 8. Expected an ASCII digit.
   at System.Text.ValueStringBuilder.AppendFormatHelper(IFormatProvider provider, String format, ReadOnlySpan`1 args)
   at System.IO.StreamWriter.WriteFormatHelper(String format, ReadOnlySpan`1 args, Boolean appendNewLine)
   at System.IO.StreamWriter.WriteLine(String format, Object arg0, Object arg1, Object arg2)
   at System.IO.TextWriter.SyncTextWriter.WriteLine(String format, Object arg0, Object arg1, Object arg2)
   at System.Console.WriteLine(String format, Object arg0, Object arg1, Object arg2)
   at PulseERP.Infrastructure.Repositories.ProductRepository.SaveChangesAsync() in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 133
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:35:24.591 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:35:24.596 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 234.7519ms
2025-06-10 01:36:27.986 +02:00 [INF] Application is shutting down...
2025-06-10 01:36:31.257 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:36:31.338 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:36:31.342 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:36:31.344 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:36:31.354 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:36:31.375 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:36:31.510 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:36:31.511 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:36:31.511 +02:00 [INF] Hosting environment: Development
2025-06-10 01:36:31.511 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:36:32.737 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:36:32.759 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:36:32.766 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:36:32.874 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 01:36:32.899 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:36:32.926 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 159.0505ms
2025-06-10 01:36:32.928 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:36:32.931 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format. Failure to parse near offset 8. Expected an ASCII digit.
   at System.Text.ValueStringBuilder.AppendFormatHelper(IFormatProvider provider, String format, ReadOnlySpan`1 args)
   at System.IO.StreamWriter.WriteFormatHelper(String format, ReadOnlySpan`1 args, Boolean appendNewLine)
   at System.IO.StreamWriter.WriteLine(String format, Object arg0, Object arg1, Object arg2)
   at System.IO.TextWriter.SyncTextWriter.WriteLine(String format, Object arg0, Object arg1, Object arg2)
   at System.Console.WriteLine(String format, Object arg0, Object arg1, Object arg2)
   at PulseERP.Infrastructure.Repositories.ProductRepository.SaveChangesAsync() in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 133
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:36:32.937 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:36:32.943 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 206.6559ms
2025-06-10 01:38:17.763 +02:00 [INF] Application is shutting down...
2025-06-10 01:38:20.383 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:38:20.443 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:38:20.447 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:38:20.449 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:38:20.458 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:38:20.478 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:38:20.627 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:38:20.627 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:38:20.627 +02:00 [INF] Hosting environment: Development
2025-06-10 01:38:20.627 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:38:25.111 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:38:25.144 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:38:25.154 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:38:25.253 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 01:38:25.279 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:38:25.282 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 53307245
2025-06-10 01:38:25.303 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:38:25.303 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:38:25.303 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 01:38:25.303 +02:00 [INF] Entity InventoryMovement State=Modified Id="fed74033-5e79-4d8e-80c1-bbcde4112458"
2025-06-10 01:38:25.303 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:38:25.303 +02:00 [INF] Entity Brand State=Unchanged Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 01:38:25.337 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p13='?' (Size = 200), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 01:38:25.347 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 191.3202ms
2025-06-10 01:38:25.349 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:38:25.351 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:38:25.358 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:38:25.364 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 253.591ms
2025-06-10 01:43:18.265 +02:00 [INF] Application is shutting down...
2025-06-10 01:43:21.928 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:43:21.986 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:43:21.989 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:43:21.992 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:43:22.000 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:43:22.022 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:43:22.151 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:43:22.152 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:43:22.152 +02:00 [INF] Hosting environment: Development
2025-06-10 01:43:22.152 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:43:26.338 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:43:26.361 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:43:26.367 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:43:26.503 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 01:43:26.539 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:43:26.541 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 26814358
2025-06-10 01:43:26.557 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:43:26.557 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:43:26.557 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 01:43:26.557 +02:00 [INF] Entity InventoryMovement State=Modified Id="3b3ea6be-cf8e-459c-ad74-f80dee88581f"
2025-06-10 01:43:26.557 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:43:26.557 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 01:43:26.557 +02:00 [INF] Entity Brand State=Unchanged Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 01:43:26.592 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p13='?' (Size = 200), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 01:43:26.601 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 232.5805ms
2025-06-10 01:43:26.602 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:43:26.605 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:43:26.612 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:43:26.617 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 279.6773ms
2025-06-10 01:53:15.129 +02:00 [INF] Application is shutting down...
2025-06-10 01:53:24.553 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:53:24.614 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:53:24.621 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:53:24.624 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:53:24.633 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:53:24.656 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:53:24.809 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:53:24.809 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:53:24.809 +02:00 [INF] Hosting environment: Development
2025-06-10 01:53:24.809 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:53:29.385 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:53:29.419 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:53:29.427 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:53:29.543 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 01:53:29.573 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:53:29.575 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 26814358
2025-06-10 01:53:29.591 +02:00 [INF] Entity Brand State=Added Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 01:53:29.591 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:53:29.591 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:53:29.591 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 01:53:29.591 +02:00 [INF] Entity InventoryMovement State=Modified Id="8bd0f725-e7fe-4ca2-8e35-ddb415568882"
2025-06-10 01:53:29.591 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:53:29.591 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 01:53:29.672 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p6='?' (DbType = Int32), @p18='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p23='?' (DbType = Guid), @p19='?' (Size = 200), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [Name] = @p19, [Status] = @p20, [UpdatedAt] = @p21, [PriceAmount] = @p22
OUTPUT 1
WHERE [Id] = @p23;
2025-06-10 01:53:29.685 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4d01007f-9b23-41c0-932a-3bec012012f8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4d01007f-9b23-41c0-932a-3bec012012f8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-10 01:53:29.689 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 260.8811ms
2025-06-10 01:53:29.691 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:53:29.693 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4d01007f-9b23-41c0-932a-3bec012012f8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:53:29.698 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:53:29.704 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 320.4645ms
2025-06-10 01:55:46.884 +02:00 [INF] Application is shutting down...
2025-06-10 01:55:50.541 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:55:50.601 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:55:50.605 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:55:50.608 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:55:50.617 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:55:50.639 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:55:50.766 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:55:50.767 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:55:50.767 +02:00 [INF] Hosting environment: Development
2025-06-10 01:55:50.767 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:55:53.821 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:55:53.853 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:55:53.863 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:55:53.976 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 01:55:54.018 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 01:55:54.020 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 9692461
2025-06-10 01:55:54.036 +02:00 [INF] Entity Brand State=Added Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 01:55:54.036 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:55:54.036 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:55:54.036 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 01:55:54.036 +02:00 [INF] Entity InventoryMovement State=Modified Id="faf14178-edc6-4412-905e-b0c873ffd9e4"
2025-06-10 01:55:54.036 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 01:55:54.036 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 01:55:54.075 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p6='?' (DbType = Int32), @p18='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p23='?' (DbType = Guid), @p19='?' (Size = 200), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [Name] = @p19, [Status] = @p20, [UpdatedAt] = @p21, [PriceAmount] = @p22
OUTPUT 1
WHERE [Id] = @p23;
2025-06-10 01:55:54.086 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f1e66de2-318d-45af-a0ff-9812951158b5
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f1e66de2-318d-45af-a0ff-9812951158b5
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-10 01:55:54.089 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 224.7443ms
2025-06-10 01:55:54.091 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:55:54.093 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Brands'. Cannot insert duplicate key in object 'dbo.Brands'. The duplicate key value is (413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f1e66de2-318d-45af-a0ff-9812951158b5
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 01:55:54.097 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 01:55:54.103 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 282.5162ms
2025-06-10 01:56:22.194 +02:00 [INF] Application is shutting down...
2025-06-10 01:57:10.633 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:57:10.744 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:57:10.747 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:57:10.750 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:57:10.766 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:57:10.849 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:57:11.033 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:57:11.033 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:57:11.034 +02:00 [INF] Hosting environment: Development
2025-06-10 01:57:11.034 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:57:15.646 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:57:15.714 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:57:15.721 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:57:15.833 +02:00 [INF] Executing action method PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) - Validation state: "Valid"
2025-06-10 01:57:15.942 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 01:58:56.239 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 01:58:56.360 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:58:56.364 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:58:56.367 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 01:58:56.386 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 01:58:56.485 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 01:58:56.673 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 01:58:56.674 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 01:58:56.674 +02:00 [INF] Hosting environment: Development
2025-06-10 01:58:56.674 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 01:58:58.350 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 01:58:58.409 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 01:58:58.415 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 01:58:58.536 +02:00 [INF] Executing action method PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) - Validation state: "Valid"
2025-06-10 01:58:58.674 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[Name0], [s].[UpdatedAt0], [s].[Id1], [s].[CreatedAt1], [s].[DeletedAt1], [s].[IsActive1], [s].[IsDeleted1], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt1], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id] AS [Id0], [b].[CreatedAt] AS [CreatedAt0], [b].[DeletedAt] AS [DeletedAt0], [b].[IsActive] AS [IsActive0], [b].[IsDeleted] AS [IsDeleted0], [b].[Name] AS [Name0], [b].[UpdatedAt] AS [UpdatedAt0], [i].[Id] AS [Id1], [i].[CreatedAt] AS [CreatedAt1], [i].[DeletedAt] AS [DeletedAt1], [i].[IsActive] AS [IsActive1], [i].[IsDeleted] AS [IsDeleted1], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt1]
    FROM [Products] AS [p]
    INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id1] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1]
2025-06-10 01:59:51.744 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:00:20.964 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 63230867
2025-06-10 02:00:23.959 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 85540.5626ms
2025-06-10 02:00:23.962 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:00:23.973 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'Brand' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NavigationFixer.NavigationReferenceChanged(InternalEntityEntry entry, INavigationBase navigationBase, Object oldValue, Object newValue)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntryNotifier.NavigationReferenceChanged(InternalEntityEntry entry, INavigation navigation, Object oldValue, Object newValue)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectNavigationChange(InternalEntityEntry entry, INavigationBase navigationBase)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(IStateManager stateManager)
   at Microsoft.EntityFrameworkCore.ChangeTracking.ChangeTracker.DetectChanges()
   at Microsoft.EntityFrameworkCore.ChangeTracking.ChangeTracker.TryDetectChanges()
   at Microsoft.EntityFrameworkCore.ChangeTracking.ChangeTracker.Entries()
   at PulseERP.Infrastructure.Repositories.ProductRepository.SaveChangesAsync() in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 131
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:00:23.982 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:00:24.010 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 85659.6715ms
2025-06-10 02:00:35.431 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:00:35.550 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:00:35.556 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:00:35.560 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:00:35.604 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:00:35.747 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:00:35.968 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:00:35.968 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:00:35.968 +02:00 [INF] Hosting environment: Development
2025-06-10 02:00:35.968 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:00:39.667 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 02:00:39.731 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:00:39.738 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:00:39.859 +02:00 [INF] Executing action method PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) - Validation state: "Valid"
2025-06-10 02:00:39.978 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[Name0], [s].[UpdatedAt0], [s].[Id1], [s].[CreatedAt1], [s].[DeletedAt1], [s].[IsActive1], [s].[IsDeleted1], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt1], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id] AS [Id0], [b].[CreatedAt] AS [CreatedAt0], [b].[DeletedAt] AS [DeletedAt0], [b].[IsActive] AS [IsActive0], [b].[IsDeleted] AS [IsDeleted0], [b].[Name] AS [Name0], [b].[UpdatedAt] AS [UpdatedAt0], [i].[Id] AS [Id1], [i].[CreatedAt] AS [CreatedAt1], [i].[DeletedAt] AS [DeletedAt1], [i].[IsActive] AS [IsActive1], [i].[IsDeleted] AS [IsDeleted1], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt1]
    FROM [Products] AS [p]
    INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id1] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1]
2025-06-10 02:01:37.636 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:03:41.868 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:03:41.927 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:03:41.930 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:03:41.933 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:03:41.941 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:03:41.963 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:03:42.089 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:03:42.089 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:03:42.089 +02:00 [INF] Hosting environment: Development
2025-06-10 02:03:42.089 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:03:45.540 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/brands - null null
2025-06-10 02:03:45.573 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-10 02:03:45.580 +02:00 [INF] Route matched with {action = "GetAll", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Abstractions.Common.DTOs.Brands.Models.BrandSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams) on controller PulseERP.API.Controllers.BrandsController (PulseERP.API).
2025-06-10 02:03:45.649 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Brands] AS [b]
2025-06-10 02:03:45.707 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[CreatedAt], [b0].[DeletedAt], [b0].[IsActive], [b0].[IsDeleted], [b0].[Name], [b0].[UpdatedAt], [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency]
FROM (
    SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
    FROM [Brands] AS [b]
    ORDER BY [b].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
LEFT JOIN [Products] AS [p] ON [b0].[Id] = [p].[BrandId]
ORDER BY [b0].[Name], [b0].[Id]
2025-06-10 02:03:45.718 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Abstractions.Common.DTOs.Brands.Models.BrandSummary, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:03:45.727 +02:00 [INF] Executed action PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API) in 145.2209ms
2025-06-10 02:03:45.729 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-10 02:03:45.730 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/brands - 200 null application/json; charset=utf-8 191.1096ms
2025-06-10 02:04:27.212 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 151
2025-06-10 02:04:27.217 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:04:27.225 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:04:27.301 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[Name0], [s].[UpdatedAt0], [s].[Id1], [s].[CreatedAt1], [s].[DeletedAt1], [s].[IsActive1], [s].[IsDeleted1], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt1], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id] AS [Id0], [b].[CreatedAt] AS [CreatedAt0], [b].[DeletedAt] AS [DeletedAt0], [b].[IsActive] AS [IsActive0], [b].[IsDeleted] AS [IsDeleted0], [b].[Name] AS [Name0], [b].[UpdatedAt] AS [UpdatedAt0], [i].[Id] AS [Id1], [i].[CreatedAt] AS [CreatedAt1], [i].[DeletedAt] AS [DeletedAt1], [i].[IsActive] AS [IsActive1], [i].[IsDeleted] AS [IsDeleted1], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt1]
    FROM [Products] AS [p]
    INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id1] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1]
2025-06-10 02:04:27.333 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:04:27.336 +02:00 [INF] Brand created: OrangeInc
2025-06-10 02:04:27.338 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 51366806
2025-06-10 02:04:27.352 +02:00 [INF] Entity Brand State=Added Id="0bfa25ed-98ad-40a0-84f4-39a2f03e62b5"
2025-06-10 02:04:27.352 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:04:27.352 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:04:27.352 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:04:27.352 +02:00 [INF] Entity InventoryMovement State=Modified Id="861baa93-03f0-4985-bf2e-ebff4c9d850b"
2025-06-10 02:04:27.352 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:04:27.352 +02:00 [INF] Entity Brand State=Unchanged Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 02:04:27.352 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:04:27.407 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p6='?' (DbType = Int32), @p18='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p24='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (Size = 200), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 02:04:27.417 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 191.773ms
2025-06-10 02:04:27.417 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:04:27.419 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method205(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:04:27.426 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:04:27.428 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 216.0273ms
2025-06-10 02:05:15.306 +02:00 [INF] Application is shutting down...
2025-06-10 02:05:21.307 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:05:21.420 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:05:21.424 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:05:21.427 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:05:21.443 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:05:21.523 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:05:21.711 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:05:21.711 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:05:21.712 +02:00 [INF] Hosting environment: Development
2025-06-10 02:05:21.712 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:05:23.755 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 149
2025-06-10 02:05:23.819 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:05:23.826 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:05:23.942 +02:00 [INF] Executing action method PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) - Validation state: "Valid"
2025-06-10 02:05:24.075 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[Name0], [s].[UpdatedAt0], [s].[Id1], [s].[CreatedAt1], [s].[DeletedAt1], [s].[IsActive1], [s].[IsDeleted1], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt1], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id] AS [Id0], [b].[CreatedAt] AS [CreatedAt0], [b].[DeletedAt] AS [DeletedAt0], [b].[IsActive] AS [IsActive0], [b].[IsDeleted] AS [IsDeleted0], [b].[Name] AS [Name0], [b].[UpdatedAt] AS [UpdatedAt0], [i].[Id] AS [Id1], [i].[CreatedAt] AS [CreatedAt1], [i].[DeletedAt] AS [DeletedAt1], [i].[IsActive] AS [IsActive1], [i].[IsDeleted] AS [IsDeleted1], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt1]
    FROM [Products] AS [p]
    INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id1] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1]
2025-06-10 02:05:57.125 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:07:59.516 +02:00 [INF] Brand created: bibiInc
2025-06-10 02:15:01.738 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 18087140
2025-06-10 02:15:07.350 +02:00 [INF] Entity Brand State=Added Id="38ae8f49-dc07-465a-ae4c-6142ce0d33cf"
2025-06-10 02:15:10.888 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:15:13.415 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:15:15.402 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:15:17.347 +02:00 [INF] Entity InventoryMovement State=Modified Id="90327f27-938f-4c57-97f5-86d0e8a2fd46"
2025-06-10 02:15:19.244 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:15:21.269 +02:00 [INF] Entity Brand State=Unchanged Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 02:15:23.765 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:15:29.763 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p6='?' (DbType = Int32), @p18='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p24='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (Size = 200), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 02:28:21.358 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:28:21.421 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:28:21.424 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:28:21.427 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:28:21.436 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:28:21.460 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:28:21.592 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:28:21.592 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:28:21.592 +02:00 [INF] Hosting environment: Development
2025-06-10 02:28:21.593 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:28:42.285 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 149
2025-06-10 02:28:42.323 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:28:42.330 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:28:42.448 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[Name0], [s].[UpdatedAt0], [s].[Id1], [s].[CreatedAt1], [s].[DeletedAt1], [s].[IsActive1], [s].[IsDeleted1], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt1], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id] AS [Id0], [b].[CreatedAt] AS [CreatedAt0], [b].[DeletedAt] AS [DeletedAt0], [b].[IsActive] AS [IsActive0], [b].[IsDeleted] AS [IsDeleted0], [b].[Name] AS [Name0], [b].[UpdatedAt] AS [UpdatedAt0], [i].[Id] AS [Id1], [i].[CreatedAt] AS [CreatedAt1], [i].[DeletedAt] AS [DeletedAt1], [i].[IsActive] AS [IsActive1], [i].[IsDeleted] AS [IsDeleted1], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt1]
    FROM [Products] AS [p]
    INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id1] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1]
2025-06-10 02:28:42.481 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:28:42.481 +02:00 [INF] Brand created: KiluInc
2025-06-10 02:28:42.483 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 52970892
2025-06-10 02:28:42.499 +02:00 [INF] Entity Brand State=Added Id="295d20c6-3ad7-407b-b143-cc61e5a90b67"
2025-06-10 02:28:42.499 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:28:42.499 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:28:42.499 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:28:42.499 +02:00 [INF] Entity InventoryMovement State=Modified Id="045edecb-95db-4e98-bd76-98add7b0aace"
2025-06-10 02:28:42.499 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:28:42.499 +02:00 [INF] Entity Brand State=Unchanged Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 02:28:42.499 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:28:42.536 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p6='?' (DbType = Int32), @p18='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p24='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (Size = 200), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 02:28:42.548 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 217.2435ms
2025-06-10 02:28:42.550 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:28:42.552 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:28:42.560 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:28:42.566 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 282.407ms
2025-06-10 02:30:17.294 +02:00 [INF] Application is shutting down...
2025-06-10 02:30:21.470 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:30:21.532 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:30:21.540 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:30:21.546 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:30:21.556 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:30:21.577 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:30:21.720 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:30:21.720 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:30:21.721 +02:00 [INF] Hosting environment: Development
2025-06-10 02:30:21.721 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:30:29.804 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 149
2025-06-10 02:30:29.844 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:30:29.851 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:30:29.972 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[Name0], [s].[UpdatedAt0], [s].[Id1], [s].[CreatedAt1], [s].[DeletedAt1], [s].[IsActive1], [s].[IsDeleted1], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt1], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id] AS [Id0], [b].[CreatedAt] AS [CreatedAt0], [b].[DeletedAt] AS [DeletedAt0], [b].[IsActive] AS [IsActive0], [b].[IsDeleted] AS [IsDeleted0], [b].[Name] AS [Name0], [b].[UpdatedAt] AS [UpdatedAt0], [i].[Id] AS [Id1], [i].[CreatedAt] AS [CreatedAt1], [i].[DeletedAt] AS [DeletedAt1], [i].[IsActive] AS [IsActive1], [i].[IsDeleted] AS [IsDeleted1], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt1]
    FROM [Products] AS [p]
    INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id1] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1]
2025-06-10 02:30:30.004 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:30:30.004 +02:00 [INF] Brand created: KiluInc
2025-06-10 02:30:30.005 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 34242886
2025-06-10 02:30:30.018 +02:00 [INF] Entity Brand State=Added Id="51335948-2508-48b7-ab9e-2b48769e99c5"
2025-06-10 02:30:30.018 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:30:30.018 +02:00 [INF] Entity Money State=Unchanged Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:30:30.018 +02:00 [INF] Entity Brand State=Unchanged Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 02:30:30.018 +02:00 [INF] Entity Inventory State=Unchanged Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:30:30.018 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:30:30.073 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Products] SET [BrandId] = @p6, [UpdatedAt] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-06-10 02:30:30.087 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 34242886
2025-06-10 02:30:30.092 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:30:30.092 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:30:30.092 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:30:30.092 +02:00 [INF] Entity InventoryMovement State=Modified Id="85ce7933-7566-4a25-b33b-db98d49f842f"
2025-06-10 02:30:30.092 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:30:30.092 +02:00 [INF] Entity Brand State=Unchanged Id="51335948-2508-48b7-ab9e-2b48769e99c5"
2025-06-10 02:30:30.092 +02:00 [INF] Entity Brand State=Unchanged Id="413d6f6f-fc12-4d0d-9e3a-177bc44d5fe5"
2025-06-10 02:30:30.092 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:30:30.097 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p13='?' (Size = 200), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 02:30:30.103 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 250.3282ms
2025-06-10 02:30:30.104 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:30:30.107 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 123
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:30:30.115 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:30:30.120 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 317.2566ms
2025-06-10 02:30:45.371 +02:00 [INF] Application is shutting down...
2025-06-10 02:30:48.607 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:30:48.669 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:30:48.672 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:30:48.675 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:30:48.685 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:30:48.707 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:30:48.838 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:30:48.838 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:30:48.838 +02:00 [INF] Hosting environment: Development
2025-06-10 02:30:48.838 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:30:57.920 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 123
2025-06-10 02:30:57.956 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:30:57.964 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:30:58.080 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[Name0], [s].[UpdatedAt0], [s].[Id1], [s].[CreatedAt1], [s].[DeletedAt1], [s].[IsActive1], [s].[IsDeleted1], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt1], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id] AS [Id0], [b].[CreatedAt] AS [CreatedAt0], [b].[DeletedAt] AS [DeletedAt0], [b].[IsActive] AS [IsActive0], [b].[IsDeleted] AS [IsDeleted0], [b].[Name] AS [Name0], [b].[UpdatedAt] AS [UpdatedAt0], [i].[Id] AS [Id1], [i].[CreatedAt] AS [CreatedAt1], [i].[DeletedAt] AS [DeletedAt1], [i].[IsActive] AS [IsActive1], [i].[IsDeleted] AS [IsDeleted1], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt1]
    FROM [Products] AS [p]
    INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id1] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1]
2025-06-10 02:30:58.107 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 14299965
2025-06-10 02:30:58.123 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:30:58.123 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:30:58.123 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:30:58.123 +02:00 [INF] Entity InventoryMovement State=Modified Id="b6562748-4d55-481f-befa-b8145e604bd2"
2025-06-10 02:30:58.123 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:30:58.123 +02:00 [INF] Entity Brand State=Unchanged Id="51335948-2508-48b7-ab9e-2b48769e99c5"
2025-06-10 02:30:58.123 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:30:58.156 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p13='?' (Size = 200), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 02:30:58.166 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 200.6192ms
2025-06-10 02:30:58.168 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:30:58.170 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 119
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:30:58.177 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:30:58.183 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 263.8906ms
2025-06-10 02:31:29.173 +02:00 [INF] Application is shutting down...
2025-06-10 02:31:31.759 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:31:31.823 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:31:31.826 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:31:31.829 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:31:31.838 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:31:31.860 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:31:31.975 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:31:31.975 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:31:31.976 +02:00 [INF] Hosting environment: Development
2025-06-10 02:31:31.976 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:31:40.512 +02:00 [INF] Application is shutting down...
2025-06-10 02:31:44.049 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:31:44.108 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:31:44.112 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:31:44.114 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:31:44.123 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:31:44.144 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:31:44.262 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:31:44.262 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:31:44.262 +02:00 [INF] Hosting environment: Development
2025-06-10 02:31:44.262 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:31:46.826 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 123
2025-06-10 02:31:46.859 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:31:46.867 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:31:46.998 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[Name0], [s].[UpdatedAt0], [s].[Id1], [s].[CreatedAt1], [s].[DeletedAt1], [s].[IsActive1], [s].[IsDeleted1], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt1], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [b].[Id] AS [Id0], [b].[CreatedAt] AS [CreatedAt0], [b].[DeletedAt] AS [DeletedAt0], [b].[IsActive] AS [IsActive0], [b].[IsDeleted] AS [IsDeleted0], [b].[Name] AS [Name0], [b].[UpdatedAt] AS [UpdatedAt0], [i].[Id] AS [Id1], [i].[CreatedAt] AS [CreatedAt1], [i].[DeletedAt] AS [DeletedAt1], [i].[IsActive] AS [IsActive1], [i].[IsDeleted] AS [IsDeleted1], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt1]
    FROM [Products] AS [p]
    INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id1] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1]
2025-06-10 02:31:47.027 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 14335568
2025-06-10 02:31:47.041 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:31:47.041 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:31:47.041 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:31:47.041 +02:00 [INF] Entity InventoryMovement State=Modified Id="9ccf81be-1d5f-47da-94f9-39173f5cc4e9"
2025-06-10 02:31:47.041 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:31:47.041 +02:00 [INF] Entity Brand State=Unchanged Id="51335948-2508-48b7-ab9e-2b48769e99c5"
2025-06-10 02:31:47.041 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:31:47.080 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p12='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p13='?' (DbType = Guid), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 500) (DbType = AnsiString), @p17='?' (DbType = Boolean), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 200), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [BrandId] = @p13, [CreatedAt] = @p14, [DeletedAt] = @p15, [Description] = @p16, [IsActive] = @p17, [IsDeleted] = @p18, [IsService] = @p19, [LastSoldAt] = @p20, [Name] = @p21, [Status] = @p22, [UpdatedAt] = @p23, [PriceAmount] = @p24
OUTPUT 1
WHERE [Id] = @p25;
2025-06-10 02:31:47.089 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 221.5236ms
2025-06-10 02:31:47.091 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:31:47.093 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 119
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:31:47.101 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:31:47.107 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 282.1637ms
2025-06-10 02:33:07.831 +02:00 [INF] Application is shutting down...
2025-06-10 02:33:11.326 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:33:11.387 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:33:11.391 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:33:11.393 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:33:11.401 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:33:11.423 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:33:11.564 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:33:11.564 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:33:11.564 +02:00 [INF] Hosting environment: Development
2025-06-10 02:33:11.564 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:33:15.183 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 123
2025-06-10 02:33:15.209 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:33:15.215 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:33:15.334 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:33:15.339 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 26814358
2025-06-10 02:33:15.343 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:33:15.350 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 134.0878ms
2025-06-10 02:33:15.352 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:33:15.354 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 171.3752ms
2025-06-10 02:33:33.113 +02:00 [INF] Application is shutting down...
2025-06-10 02:34:05.557 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:34:05.626 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:34:05.629 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:34:05.632 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:34:05.642 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:34:05.671 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:34:05.829 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:34:05.829 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:34:05.829 +02:00 [INF] Hosting environment: Development
2025-06-10 02:34:05.829 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:34:17.279 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 152
2025-06-10 02:34:17.312 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:34:17.319 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:34:17.429 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:34:17.439 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:34:17.439 +02:00 [INF] Brand created: Cocokiroik
2025-06-10 02:34:17.440 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 53307245
2025-06-10 02:34:17.444 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:34:17.451 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 130.993ms
2025-06-10 02:34:17.452 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:34:17.454 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 175.8247ms
2025-06-10 02:36:53.623 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/brands - null null
2025-06-10 02:36:53.634 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-10 02:36:53.644 +02:00 [INF] Route matched with {action = "GetAll", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Abstractions.Common.DTOs.Brands.Models.BrandSummary]]]] GetAll(PulseERP.Abstractions.Common.Pagination.PaginationParams) on controller PulseERP.API.Controllers.BrandsController (PulseERP.API).
2025-06-10 02:36:53.714 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Brands] AS [b]
2025-06-10 02:36:53.730 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[CreatedAt], [b0].[DeletedAt], [b0].[IsActive], [b0].[IsDeleted], [b0].[Name], [b0].[UpdatedAt], [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency]
FROM (
    SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
    FROM [Brands] AS [b]
    ORDER BY [b].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
LEFT JOIN [Products] AS [p] ON [b0].[Id] = [p].[BrandId]
ORDER BY [b0].[Name], [b0].[Id]
2025-06-10 02:36:53.738 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Abstractions.Common.DTOs.Brands.Models.BrandSummary, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:36:53.741 +02:00 [INF] Executed action PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API) in 96.1917ms
2025-06-10 02:36:53.741 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.BrandsController.GetAll (PulseERP.API)'
2025-06-10 02:36:53.741 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/brands - 200 null application/json; charset=utf-8 118.1357ms
2025-06-10 02:37:38.209 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 02:37:38.215 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:37:38.218 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:37:38.233 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:37:38.236 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:37:38.236 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 17.8492ms
2025-06-10 02:37:38.237 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:37:38.237 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 28.0019ms
2025-06-10 02:38:36.044 +02:00 [INF] Application is shutting down...
2025-06-10 02:38:39.223 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:38:39.288 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:38:39.292 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:38:39.294 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:38:39.304 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:38:39.325 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:38:39.475 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:38:39.476 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:38:39.476 +02:00 [INF] Hosting environment: Development
2025-06-10 02:38:39.476 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:38:49.547 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 152
2025-06-10 02:38:49.592 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:38:49.599 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:38:49.720 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:38:49.731 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:38:49.731 +02:00 [INF] Brand created: Cocokiroik
2025-06-10 02:38:49.759 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-10 02:38:49.766 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 9267250
2025-06-10 02:38:49.766 +02:00 [INF] Entity Brand State=Unchanged Id="458b910d-a3dd-489c-8d29-062dbd85f983"
2025-06-10 02:38:49.770 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:38:49.776 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 175.8856ms
2025-06-10 02:38:49.778 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:38:49.779 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 233.9451ms
2025-06-10 02:39:10.355 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 02:39:10.371 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:39:10.378 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:39:10.419 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:39:10.421 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:39:10.421 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 42.8142ms
2025-06-10 02:39:10.421 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:39:10.421 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 65.856ms
2025-06-10 02:40:34.166 +02:00 [INF] Application is shutting down...
2025-06-10 02:40:37.606 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:40:37.669 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:40:37.673 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:40:37.676 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:40:37.684 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:40:37.705 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:40:37.846 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:40:37.846 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:40:37.846 +02:00 [INF] Hosting environment: Development
2025-06-10 02:40:37.846 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:40:41.430 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 02:40:41.464 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:40:41.470 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:40:41.581 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:40:41.590 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:40:41.600 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 128.5002ms
2025-06-10 02:40:41.601 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:40:41.604 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 174.2517ms
2025-06-10 02:40:50.536 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 152
2025-06-10 02:40:50.544 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:40:50.550 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:40:50.610 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:40:50.619 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:40:50.659 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 21611388
2025-06-10 02:40:50.659 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:40:50.659 +02:00 [INF] Entity Brand State=Modified Id="458b910d-a3dd-489c-8d29-062dbd85f983"
2025-06-10 02:40:50.660 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:40:50.660 +02:00 [INF] Entity InventoryMovement State=Modified Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:40:50.660 +02:00 [INF] Entity InventoryMovement State=Modified Id="b2331285-c166-42f6-a42d-f44feb0586c5"
2025-06-10 02:40:50.660 +02:00 [INF] Entity Money State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:40:50.729 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = Guid), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p26='?' (DbType = DateTime2), @p27='?' (DbType = DateTime2), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p50='?' (DbType = Guid), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (Size = 500) (DbType = AnsiString), @p41='?' (DbType = Boolean), @p42='?' (DbType = Boolean), @p43='?' (DbType = Boolean), @p44='?' (DbType = DateTime2), @p45='?' (Size = 200), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [DeletedAt] = @p1, [IsActive] = @p2, [IsDeleted] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [Id] = @p6;
UPDATE [Inventories] SET [CreatedAt] = @p7, [DeletedAt] = @p8, [IsActive] = @p9, [IsDeleted] = @p10, [ProductId] = @p11, [Quantity] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
UPDATE [InventoryMovements] SET [CreatedAt] = @p15, [DeletedAt] = @p16, [InventoryId] = @p17, [IsActive] = @p18, [IsDeleted] = @p19, [OccurredAt] = @p20, [QuantityChange] = @p21, [Reason] = @p22, [Type] = @p23, [UpdatedAt] = @p24
OUTPUT 1
WHERE [Id] = @p25;
UPDATE [InventoryMovements] SET [CreatedAt] = @p26, [DeletedAt] = @p27, [InventoryId] = @p28, [IsActive] = @p29, [IsDeleted] = @p30, [OccurredAt] = @p31, [QuantityChange] = @p32, [Reason] = @p33, [Type] = @p34, [UpdatedAt] = @p35
OUTPUT 1
WHERE [Id] = @p36;
UPDATE [Products] SET [BrandId] = @p37, [CreatedAt] = @p38, [DeletedAt] = @p39, [Description] = @p40, [IsActive] = @p41, [IsDeleted] = @p42, [IsService] = @p43, [LastSoldAt] = @p44, [Name] = @p45, [Status] = @p46, [UpdatedAt] = @p47, [PriceAmount] = @p48, [PriceCurrency] = @p49
OUTPUT 1
WHERE [Id] = @p50;
2025-06-10 02:40:50.737 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 186.705ms
2025-06-10 02:40:50.737 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:40:50.740 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method216(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:40:50.746 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:40:50.748 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 212.0585ms
2025-06-10 02:41:03.499 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 152
2025-06-10 02:41:03.506 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:41:03.506 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:41:03.519 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:41:03.524 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:41:03.525 +02:00 [INF] Brand created: Mechaniiik
2025-06-10 02:41:03.548 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-10 02:41:03.557 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 5104778
2025-06-10 02:41:03.558 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:41:03.558 +02:00 [INF] Entity Brand State=Modified Id="9359a9d5-eb40-4eb6-9f30-fdcbe1edcacb"
2025-06-10 02:41:03.558 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:41:03.558 +02:00 [INF] Entity InventoryMovement State=Modified Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:41:03.558 +02:00 [INF] Entity InventoryMovement State=Modified Id="16adbf69-35f1-44c7-b316-58acda515328"
2025-06-10 02:41:03.558 +02:00 [INF] Entity Money State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:41:03.558 +02:00 [INF] Entity Brand State=Unchanged Id="b2158135-5351-460f-820d-065ba064aa7e"
2025-06-10 02:41:03.575 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = Guid), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p26='?' (DbType = DateTime2), @p27='?' (DbType = DateTime2), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p50='?' (DbType = Guid), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (Size = 500) (DbType = AnsiString), @p41='?' (DbType = Boolean), @p42='?' (DbType = Boolean), @p43='?' (DbType = Boolean), @p44='?' (DbType = DateTime2), @p45='?' (Size = 200), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [DeletedAt] = @p1, [IsActive] = @p2, [IsDeleted] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [Id] = @p6;
UPDATE [Inventories] SET [CreatedAt] = @p7, [DeletedAt] = @p8, [IsActive] = @p9, [IsDeleted] = @p10, [ProductId] = @p11, [Quantity] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
UPDATE [InventoryMovements] SET [CreatedAt] = @p15, [DeletedAt] = @p16, [InventoryId] = @p17, [IsActive] = @p18, [IsDeleted] = @p19, [OccurredAt] = @p20, [QuantityChange] = @p21, [Reason] = @p22, [Type] = @p23, [UpdatedAt] = @p24
OUTPUT 1
WHERE [Id] = @p25;
UPDATE [InventoryMovements] SET [CreatedAt] = @p26, [DeletedAt] = @p27, [InventoryId] = @p28, [IsActive] = @p29, [IsDeleted] = @p30, [OccurredAt] = @p31, [QuantityChange] = @p32, [Reason] = @p33, [Type] = @p34, [UpdatedAt] = @p35
OUTPUT 1
WHERE [Id] = @p36;
UPDATE [Products] SET [BrandId] = @p37, [CreatedAt] = @p38, [DeletedAt] = @p39, [Description] = @p40, [IsActive] = @p41, [IsDeleted] = @p42, [IsService] = @p43, [LastSoldAt] = @p44, [Name] = @p45, [Status] = @p46, [UpdatedAt] = @p47, [PriceAmount] = @p48, [PriceCurrency] = @p49
OUTPUT 1
WHERE [Id] = @p50;
2025-06-10 02:41:03.579 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 72.1444ms
2025-06-10 02:41:03.579 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:41:03.579 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method216(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:41:03.581 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:41:03.582 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 82.09ms
2025-06-10 02:41:25.500 +02:00 [INF] Application is shutting down...
2025-06-10 02:41:33.879 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:41:33.937 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:41:33.940 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:41:33.943 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:41:33.952 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:41:33.971 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:41:34.106 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:41:34.106 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:41:34.106 +02:00 [INF] Hosting environment: Development
2025-06-10 02:41:34.106 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:41:36.818 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 152
2025-06-10 02:41:36.854 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:41:36.861 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:41:36.981 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:41:36.994 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:41:36.995 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 4642667
2025-06-10 02:41:36.999 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:41:37.006 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 143.4532ms
2025-06-10 02:41:37.007 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:41:37.009 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 192.6948ms
2025-06-10 02:41:52.185 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 02:41:52.195 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:41:52.206 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:41:52.248 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:41:52.250 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:41:52.250 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 43.4665ms
2025-06-10 02:41:52.250 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:41:52.250 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 65.3609ms
2025-06-10 02:42:30.825 +02:00 [INF] Application is shutting down...
2025-06-10 02:42:33.713 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:42:33.775 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:42:33.779 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:42:33.788 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:42:33.797 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:42:33.817 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:42:33.957 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:42:33.957 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:42:33.957 +02:00 [INF] Hosting environment: Development
2025-06-10 02:42:33.957 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:42:36.364 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 02:42:36.402 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:42:36.409 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:42:36.525 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:42:36.538 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:42:36.548 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 137.2494ms
2025-06-10 02:42:36.549 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:42:36.551 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 188.4186ms
2025-06-10 02:42:43.132 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 152
2025-06-10 02:42:43.138 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:42:43.151 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:42:43.209 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:42:43.218 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:42:43.257 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:42:43.257 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 106.5934ms
2025-06-10 02:42:43.258 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:42:43.258 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 125.87ms
2025-06-10 02:42:49.936 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 02:42:49.941 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:42:49.942 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:42:49.951 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:42:49.952 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:42:49.953 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 10.7078ms
2025-06-10 02:42:49.953 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:42:49.953 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 17.5677ms
2025-06-10 02:43:21.371 +02:00 [INF] Application is shutting down...
2025-06-10 02:43:24.833 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:43:24.892 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:43:24.897 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:43:24.899 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:43:24.908 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:43:24.927 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:43:25.028 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:43:25.028 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:43:25.029 +02:00 [INF] Hosting environment: Development
2025-06-10 02:43:25.029 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:43:28.547 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 152
2025-06-10 02:43:28.577 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:43:28.584 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:43:28.700 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:43:28.710 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:43:28.740 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 26814358
2025-06-10 02:43:28.741 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:43:28.741 +02:00 [INF] Entity Brand State=Modified Id="b2158135-5351-460f-820d-065ba064aa7e"
2025-06-10 02:43:28.741 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:43:28.741 +02:00 [INF] Entity InventoryMovement State=Modified Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:43:28.741 +02:00 [INF] Entity InventoryMovement State=Modified Id="33509ad8-bca3-4c35-83eb-8abd701e3e5b"
2025-06-10 02:43:28.741 +02:00 [INF] Entity Money State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:43:28.784 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = Guid), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p26='?' (DbType = DateTime2), @p27='?' (DbType = DateTime2), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p50='?' (DbType = Guid), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (Size = 500) (DbType = AnsiString), @p41='?' (DbType = Boolean), @p42='?' (DbType = Boolean), @p43='?' (DbType = Boolean), @p44='?' (DbType = DateTime2), @p45='?' (Size = 200), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [DeletedAt] = @p1, [IsActive] = @p2, [IsDeleted] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [Id] = @p6;
UPDATE [Inventories] SET [CreatedAt] = @p7, [DeletedAt] = @p8, [IsActive] = @p9, [IsDeleted] = @p10, [ProductId] = @p11, [Quantity] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
UPDATE [InventoryMovements] SET [CreatedAt] = @p15, [DeletedAt] = @p16, [InventoryId] = @p17, [IsActive] = @p18, [IsDeleted] = @p19, [OccurredAt] = @p20, [QuantityChange] = @p21, [Reason] = @p22, [Type] = @p23, [UpdatedAt] = @p24
OUTPUT 1
WHERE [Id] = @p25;
UPDATE [InventoryMovements] SET [CreatedAt] = @p26, [DeletedAt] = @p27, [InventoryId] = @p28, [IsActive] = @p29, [IsDeleted] = @p30, [OccurredAt] = @p31, [QuantityChange] = @p32, [Reason] = @p33, [Type] = @p34, [UpdatedAt] = @p35
OUTPUT 1
WHERE [Id] = @p36;
UPDATE [Products] SET [BrandId] = @p37, [CreatedAt] = @p38, [DeletedAt] = @p39, [Description] = @p40, [IsActive] = @p41, [IsDeleted] = @p42, [IsService] = @p43, [LastSoldAt] = @p44, [Name] = @p45, [Status] = @p46, [UpdatedAt] = @p47, [PriceAmount] = @p48, [PriceCurrency] = @p49
OUTPUT 1
WHERE [Id] = @p50;
2025-06-10 02:43:28.794 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 209.3924ms
2025-06-10 02:43:28.796 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:43:28.798 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:43:28.805 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:43:28.810 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 263.9042ms
2025-06-10 02:43:38.359 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 02:43:38.365 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:43:38.366 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:43:38.413 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:43:38.416 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:43:38.416 +02:00 [INF] Brand created: Letsgooo
2025-06-10 02:43:38.417 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 60374441
2025-06-10 02:43:38.418 +02:00 [INF] Entity Brand State=Added Id="2d8644ae-3413-4d31-81e2-8abe140fac7e"
2025-06-10 02:43:38.418 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:43:38.418 +02:00 [INF] Entity Brand State=Modified Id="a5a5772e-7d8b-4220-918a-5dafa396dc92"
2025-06-10 02:43:38.418 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:43:38.418 +02:00 [INF] Entity InventoryMovement State=Modified Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:43:38.418 +02:00 [INF] Entity InventoryMovement State=Modified Id="099abb66-e021-4d4b-a77c-105340ccfde0"
2025-06-10 02:43:38.419 +02:00 [INF] Entity Money State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:43:38.466 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = Guid), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p26='?' (DbType = DateTime2), @p27='?' (DbType = DateTime2), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p50='?' (DbType = Guid), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (Size = 500) (DbType = AnsiString), @p41='?' (DbType = Boolean), @p42='?' (DbType = Boolean), @p43='?' (DbType = Boolean), @p44='?' (DbType = DateTime2), @p45='?' (Size = 200), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 4000), @p51='?' (DbType = Guid), @p52='?' (DbType = DateTime2), @p53='?' (DbType = DateTime2), @p54='?' (DbType = Boolean), @p55='?' (Size = 100), @p56='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [DeletedAt] = @p1, [IsActive] = @p2, [IsDeleted] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [Id] = @p6;
UPDATE [Inventories] SET [CreatedAt] = @p7, [DeletedAt] = @p8, [IsActive] = @p9, [IsDeleted] = @p10, [ProductId] = @p11, [Quantity] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
UPDATE [InventoryMovements] SET [CreatedAt] = @p15, [DeletedAt] = @p16, [InventoryId] = @p17, [IsActive] = @p18, [IsDeleted] = @p19, [OccurredAt] = @p20, [QuantityChange] = @p21, [Reason] = @p22, [Type] = @p23, [UpdatedAt] = @p24
OUTPUT 1
WHERE [Id] = @p25;
UPDATE [InventoryMovements] SET [CreatedAt] = @p26, [DeletedAt] = @p27, [InventoryId] = @p28, [IsActive] = @p29, [IsDeleted] = @p30, [OccurredAt] = @p31, [QuantityChange] = @p32, [Reason] = @p33, [Type] = @p34, [UpdatedAt] = @p35
OUTPUT 1
WHERE [Id] = @p36;
UPDATE [Products] SET [BrandId] = @p37, [CreatedAt] = @p38, [DeletedAt] = @p39, [Description] = @p40, [IsActive] = @p41, [IsDeleted] = @p42, [IsService] = @p43, [LastSoldAt] = @p44, [Name] = @p45, [Status] = @p46, [UpdatedAt] = @p47, [PriceAmount] = @p48, [PriceCurrency] = @p49
OUTPUT 1
WHERE [Id] = @p50;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p51, @p52, @p53, @p54, @p55, @p56);
2025-06-10 02:43:38.470 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 103.0057ms
2025-06-10 02:43:38.470 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:43:38.470 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:43:38.473 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:43:38.473 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 113.926ms
2025-06-10 02:43:45.894 +02:00 [INF] Application is shutting down...
2025-06-10 02:43:48.745 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:43:48.805 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:43:48.809 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:43:48.812 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:43:48.820 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:43:48.841 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:43:48.965 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:43:48.965 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:43:48.965 +02:00 [INF] Hosting environment: Development
2025-06-10 02:43:48.965 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:43:57.983 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 02:43:58.019 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:43:58.026 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:43:58.139 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:43:58.150 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:43:58.150 +02:00 [INF] Brand created: Letsgooo
2025-06-10 02:43:58.181 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 6932752
2025-06-10 02:43:58.181 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:43:58.181 +02:00 [INF] Entity Brand State=Modified Id="ff3310fe-e9b3-4cd5-b65c-72950d5acfe7"
2025-06-10 02:43:58.181 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:43:58.182 +02:00 [INF] Entity InventoryMovement State=Modified Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:43:58.182 +02:00 [INF] Entity InventoryMovement State=Modified Id="48ecc650-8dfa-40e2-b68e-e995ff8da841"
2025-06-10 02:43:58.182 +02:00 [INF] Entity Money State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:43:58.226 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = Guid), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p26='?' (DbType = DateTime2), @p27='?' (DbType = DateTime2), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p50='?' (DbType = Guid), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (Size = 500) (DbType = AnsiString), @p41='?' (DbType = Boolean), @p42='?' (DbType = Boolean), @p43='?' (DbType = Boolean), @p44='?' (DbType = DateTime2), @p45='?' (Size = 200), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [DeletedAt] = @p1, [IsActive] = @p2, [IsDeleted] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [Id] = @p6;
UPDATE [Inventories] SET [CreatedAt] = @p7, [DeletedAt] = @p8, [IsActive] = @p9, [IsDeleted] = @p10, [ProductId] = @p11, [Quantity] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
UPDATE [InventoryMovements] SET [CreatedAt] = @p15, [DeletedAt] = @p16, [InventoryId] = @p17, [IsActive] = @p18, [IsDeleted] = @p19, [OccurredAt] = @p20, [QuantityChange] = @p21, [Reason] = @p22, [Type] = @p23, [UpdatedAt] = @p24
OUTPUT 1
WHERE [Id] = @p25;
UPDATE [InventoryMovements] SET [CreatedAt] = @p26, [DeletedAt] = @p27, [InventoryId] = @p28, [IsActive] = @p29, [IsDeleted] = @p30, [OccurredAt] = @p31, [QuantityChange] = @p32, [Reason] = @p33, [Type] = @p34, [UpdatedAt] = @p35
OUTPUT 1
WHERE [Id] = @p36;
UPDATE [Products] SET [BrandId] = @p37, [CreatedAt] = @p38, [DeletedAt] = @p39, [Description] = @p40, [IsActive] = @p41, [IsDeleted] = @p42, [IsService] = @p43, [LastSoldAt] = @p44, [Name] = @p45, [Status] = @p46, [UpdatedAt] = @p47, [PriceAmount] = @p48, [PriceCurrency] = @p49
OUTPUT 1
WHERE [Id] = @p50;
2025-06-10 02:43:58.235 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 208.1726ms
2025-06-10 02:43:58.237 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:43:58.239 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:43:58.246 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:43:58.251 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 269.2856ms
2025-06-10 02:44:03.575 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 163
2025-06-10 02:44:03.583 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:44:03.583 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:44:03.636 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:44:03.639 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:44:03.639 +02:00 [INF] Brand created: Letsgdzadazdazdazdooo
2025-06-10 02:44:03.640 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 38492296
2025-06-10 02:44:03.640 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:44:03.640 +02:00 [INF] Entity Brand State=Modified Id="7bcdc8a2-fb5a-4f41-8830-52b94da5c9b6"
2025-06-10 02:44:03.640 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:44:03.640 +02:00 [INF] Entity InventoryMovement State=Modified Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:44:03.640 +02:00 [INF] Entity InventoryMovement State=Modified Id="9619999a-6abc-4601-a1a5-ee143df5928c"
2025-06-10 02:44:03.640 +02:00 [INF] Entity Money State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:44:03.649 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = Guid), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p26='?' (DbType = DateTime2), @p27='?' (DbType = DateTime2), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p50='?' (DbType = Guid), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (Size = 500) (DbType = AnsiString), @p41='?' (DbType = Boolean), @p42='?' (DbType = Boolean), @p43='?' (DbType = Boolean), @p44='?' (DbType = DateTime2), @p45='?' (Size = 200), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [DeletedAt] = @p1, [IsActive] = @p2, [IsDeleted] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [Id] = @p6;
UPDATE [Inventories] SET [CreatedAt] = @p7, [DeletedAt] = @p8, [IsActive] = @p9, [IsDeleted] = @p10, [ProductId] = @p11, [Quantity] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
UPDATE [InventoryMovements] SET [CreatedAt] = @p15, [DeletedAt] = @p16, [InventoryId] = @p17, [IsActive] = @p18, [IsDeleted] = @p19, [OccurredAt] = @p20, [QuantityChange] = @p21, [Reason] = @p22, [Type] = @p23, [UpdatedAt] = @p24
OUTPUT 1
WHERE [Id] = @p25;
UPDATE [InventoryMovements] SET [CreatedAt] = @p26, [DeletedAt] = @p27, [InventoryId] = @p28, [IsActive] = @p29, [IsDeleted] = @p30, [OccurredAt] = @p31, [QuantityChange] = @p32, [Reason] = @p33, [Type] = @p34, [UpdatedAt] = @p35
OUTPUT 1
WHERE [Id] = @p36;
UPDATE [Products] SET [BrandId] = @p37, [CreatedAt] = @p38, [DeletedAt] = @p39, [Description] = @p40, [IsActive] = @p41, [IsDeleted] = @p42, [IsService] = @p43, [LastSoldAt] = @p44, [Name] = @p45, [Status] = @p46, [UpdatedAt] = @p47, [PriceAmount] = @p48, [PriceCurrency] = @p49
OUTPUT 1
WHERE [Id] = @p50;
2025-06-10 02:44:03.651 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 67.1831ms
2025-06-10 02:44:03.651 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:44:03.651 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:44:03.654 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:44:03.655 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 79.2152ms
2025-06-10 02:45:31.723 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 163
2025-06-10 02:45:31.734 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:45:31.736 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:45:31.760 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:45:31.764 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:45:31.764 +02:00 [INF] Brand created: Letsgdzadazdazdazdooo
2025-06-10 02:45:31.766 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 64923656
2025-06-10 02:45:31.766 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:45:31.766 +02:00 [INF] Entity Brand State=Modified Id="7621f82c-b109-4577-ae1d-b83a27860d5a"
2025-06-10 02:45:31.766 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:45:31.766 +02:00 [INF] Entity InventoryMovement State=Modified Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:45:31.766 +02:00 [INF] Entity InventoryMovement State=Modified Id="8fb24567-345a-496c-8944-56ab9776d2e5"
2025-06-10 02:45:31.766 +02:00 [INF] Entity Money State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:45:31.781 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = Guid), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p25='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Guid), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p26='?' (DbType = DateTime2), @p27='?' (DbType = DateTime2), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p50='?' (DbType = Guid), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (Size = 500) (DbType = AnsiString), @p41='?' (DbType = Boolean), @p42='?' (DbType = Boolean), @p43='?' (DbType = Boolean), @p44='?' (DbType = DateTime2), @p45='?' (Size = 200), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Brands] SET [CreatedAt] = @p0, [DeletedAt] = @p1, [IsActive] = @p2, [IsDeleted] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [Id] = @p6;
UPDATE [Inventories] SET [CreatedAt] = @p7, [DeletedAt] = @p8, [IsActive] = @p9, [IsDeleted] = @p10, [ProductId] = @p11, [Quantity] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
UPDATE [InventoryMovements] SET [CreatedAt] = @p15, [DeletedAt] = @p16, [InventoryId] = @p17, [IsActive] = @p18, [IsDeleted] = @p19, [OccurredAt] = @p20, [QuantityChange] = @p21, [Reason] = @p22, [Type] = @p23, [UpdatedAt] = @p24
OUTPUT 1
WHERE [Id] = @p25;
UPDATE [InventoryMovements] SET [CreatedAt] = @p26, [DeletedAt] = @p27, [InventoryId] = @p28, [IsActive] = @p29, [IsDeleted] = @p30, [OccurredAt] = @p31, [QuantityChange] = @p32, [Reason] = @p33, [Type] = @p34, [UpdatedAt] = @p35
OUTPUT 1
WHERE [Id] = @p36;
UPDATE [Products] SET [BrandId] = @p37, [CreatedAt] = @p38, [DeletedAt] = @p39, [Description] = @p40, [IsActive] = @p41, [IsDeleted] = @p42, [IsService] = @p43, [LastSoldAt] = @p44, [Name] = @p45, [Status] = @p46, [UpdatedAt] = @p47, [PriceAmount] = @p48, [PriceCurrency] = @p49
OUTPUT 1
WHERE [Id] = @p50;
2025-06-10 02:45:31.784 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 48.446ms
2025-06-10 02:45:31.785 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:45:31.785 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:45:31.788 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:45:31.788 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 65.462ms
2025-06-10 02:45:37.183 +02:00 [INF] Application is shutting down...
2025-06-10 02:45:40.558 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:45:40.615 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:45:40.619 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:45:40.627 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:45:40.639 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:45:40.659 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:45:40.796 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:45:40.797 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:45:40.797 +02:00 [INF] Hosting environment: Development
2025-06-10 02:45:40.797 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:45:44.455 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 163
2025-06-10 02:45:44.476 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:45:44.482 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:45:44.595 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:45:44.605 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:45:44.605 +02:00 [INF] Brand created: Letsgdzadazdazdazdooo
2025-06-10 02:45:44.607 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 5848012
2025-06-10 02:45:44.611 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:45:44.618 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 134.9696ms
2025-06-10 02:45:44.619 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:45:44.621 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 166.4257ms
2025-06-10 02:45:51.388 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 02:45:51.399 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:45:51.404 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:45:51.444 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:45:51.445 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 02:45:51.445 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 40.7016ms
2025-06-10 02:45:51.445 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 02:45:51.446 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 57.5695ms
2025-06-10 02:49:27.921 +02:00 [INF] Application is shutting down...
2025-06-10 02:49:31.085 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:49:31.143 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:49:31.148 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:49:31.150 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:49:31.159 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:49:31.178 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:49:31.317 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:49:31.317 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:49:31.317 +02:00 [INF] Hosting environment: Development
2025-06-10 02:49:31.317 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:49:42.548 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 163
2025-06-10 02:49:42.583 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:49:42.599 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:49:42.721 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:49:42.753 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:49:42.753 +02:00 [INF] Brand created: Letsgdzadazdazdazdooo
2025-06-10 02:49:42.754 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 26814358
2025-06-10 02:49:42.770 +02:00 [INF] Entity Brand State=Added Id="a8684c4f-d2cc-488f-969f-afa605b4e248"
2025-06-10 02:49:42.770 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:49:42.770 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:49:42.770 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:49:42.770 +02:00 [INF] Entity InventoryMovement State=Modified Id="d7cea7c5-5766-47fb-ba71-589f89ae8409"
2025-06-10 02:49:42.771 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:49:42.771 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:49:42.812 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p6='?' (DbType = Int32), @p18='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p24='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (Size = 200), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 02:49:42.823 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 223.3487ms
2025-06-10 02:49:42.825 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:49:42.827 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:49:42.836 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:49:42.841 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 294.177ms
2025-06-10 02:57:01.578 +02:00 [INF] Application is shutting down...
2025-06-10 02:57:03.937 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:57:03.994 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:57:03.997 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:57:04.001 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:57:04.009 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:57:04.030 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:57:04.145 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:57:04.145 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:57:04.145 +02:00 [INF] Hosting environment: Development
2025-06-10 02:57:04.145 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:57:13.387 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 163
2025-06-10 02:57:13.435 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:57:13.442 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:57:13.575 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:57:13.609 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:57:13.609 +02:00 [INF] Brand created: Letsgdzadazdazdazdooo
2025-06-10 02:57:13.610 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 34242886
2025-06-10 02:57:13.628 +02:00 [INF] Entity Brand State=Added Id="b794ceac-1b5f-49cd-83d8-65e5f03cdb85"
2025-06-10 02:57:13.628 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:57:13.628 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:57:13.628 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:57:13.628 +02:00 [INF] Entity InventoryMovement State=Modified Id="a01cd034-6167-4b6a-a7cd-34a0197a8fc1"
2025-06-10 02:57:13.628 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:57:13.628 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:57:13.676 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p6='?' (DbType = Int32), @p18='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p24='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (Size = 200), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 02:57:13.689 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 246.0316ms
2025-06-10 02:57:13.691 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:57:13.693 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:57:13.701 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:57:13.707 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 321.3695ms
2025-06-10 02:58:27.621 +02:00 [INF] Application is shutting down...
2025-06-10 02:58:29.999 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 02:58:30.059 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:58:30.063 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:58:30.066 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 02:58:30.074 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 02:58:30.094 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 02:58:30.217 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 02:58:30.217 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 02:58:30.217 +02:00 [INF] Hosting environment: Development
2025-06-10 02:58:30.218 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 02:58:35.123 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 163
2025-06-10 02:58:35.156 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:58:35.164 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 02:58:35.274 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 02:58:35.324 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalized_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 02:58:35.324 +02:00 [INF] Brand created: Letsgdzadazdazdazdooo
2025-06-10 02:58:35.328 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 7531080
2025-06-10 02:58:35.352 +02:00 [INF] Entity Brand State=Added Id="128e22b4-d650-4557-ab36-544c6f4c49be"
2025-06-10 02:58:35.353 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:58:35.353 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:58:35.353 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 02:58:35.353 +02:00 [INF] Entity InventoryMovement State=Modified Id="0cc26012-c99e-472c-b388-819b02268561"
2025-06-10 02:58:35.353 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 02:58:35.353 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 02:58:35.391 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p6='?' (DbType = Int32), @p18='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p24='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (Size = 200), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 02:58:35.403 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 238.6074ms
2025-06-10 02:58:35.405 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 02:58:35.407 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 02:58:35.416 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 02:58:35.426 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 303.719ms
2025-06-10 03:17:00.359 +02:00 [INF] Application is shutting down...
2025-06-10 03:17:06.232 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 03:17:06.495 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 03:17:06.543 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:17:06.547 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:17:06.549 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:17:06.559 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 03:17:06.580 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 03:17:06.709 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 03:17:06.710 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 03:17:06.710 +02:00 [INF] Hosting environment: Development
2025-06-10 03:17:06.710 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 03:17:10.869 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 163
2025-06-10 03:17:10.909 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:17:10.916 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:17:11.050 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 03:17:11.083 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='letsgdzadazdazdazdooo' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 03:17:11.083 +02:00 [INF] Brand created: Letsgdzadazdazdazdooo
2025-06-10 03:17:11.085 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 23626443
2025-06-10 03:17:11.102 +02:00 [INF] Entity Brand State=Added Id="fb2ac520-4d67-4e55-b3dd-3b94255c31b6"
2025-06-10 03:17:11.102 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:17:11.102 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:17:11.102 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 03:17:11.102 +02:00 [INF] Entity InventoryMovement State=Modified Id="cd325d38-c9df-42e4-91ce-a3afa384d6d2"
2025-06-10 03:17:11.102 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:17:11.102 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 03:17:11.150 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='fb2ac520-4d67-4e55-b3dd-3b94255c31b6', @p1='2025-06-10T01:17:11.0839700Z', @p2=NULL (DbType = DateTime2), @p3='False', @p4='Letsgdzadazdazdazdooo' (Nullable = false) (Size = 100), @p5=NULL (DbType = DateTime2), @p7='e89508ef-e9ba-4a96-b01e-28158c279a65', @p6='54', @p18='cd325d38-c9df-42e4-91ce-a3afa384d6d2', @p8='2025-06-10T01:17:11.0849720Z', @p9=NULL (DbType = DateTime2), @p10='e89508ef-e9ba-4a96-b01e-28158c279a65', @p11='False', @p12='False', @p13='2025-06-10T01:17:11.0849060Z', @p14='51', @p15='Inbound movement' (Nullable = false) (Size = 4000), @p16='1', @p17=NULL (DbType = DateTime2), @p24='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf', @p19='fb2ac520-4d67-4e55-b3dd-3b94255c31b6', @p20='Macbook AIR M4 PRO MAX' (Nullable = false) (Size = 200), @p21='0', @p22='2025-06-10T01:17:11.0851990Z' (Nullable = true), @p23='999' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 03:17:11.160 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
2025-06-10 03:17:11.166 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"cd325d38-c9df-42e4-91ce-a3afa384d6d2"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
2025-06-10 03:17:11.190 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='cd325d38-c9df-42e4-91ce-a3afa384d6d2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 03:17:11.191 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
2025-06-10 03:17:11.193 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 276.1691ms
2025-06-10 03:17:11.195 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:17:11.197 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 189
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 03:17:11.200 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 03:17:11.205 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 337.9565ms
2025-06-10 03:22:39.848 +02:00 [INF] Application is shutting down...
2025-06-10 03:22:43.692 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 03:22:43.956 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 03:22:44.009 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:22:44.012 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:22:44.015 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:22:44.024 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 03:22:44.045 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 03:22:44.169 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 03:22:44.169 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 03:22:44.169 +02:00 [INF] Hosting environment: Development
2025-06-10 03:22:44.169 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 03:22:53.654 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 163
2025-06-10 03:22:53.708 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:22:53.716 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:22:53.835 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 03:22:53.867 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='letsgdzadazdazdazdooo' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 03:22:53.867 +02:00 [INF] Brand created: Letsgdzadazdazdazdooo
2025-06-10 03:22:53.878 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 03:22:53.880 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 11600191
2025-06-10 03:22:53.896 +02:00 [INF] Entity Brand State=Added Id="e406ea66-a913-4bb4-98c2-097855a1e7c5"
2025-06-10 03:22:53.896 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:22:53.897 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:22:53.897 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 03:22:53.897 +02:00 [INF] Entity InventoryMovement State=Modified Id="2d007e31-e548-4f35-b1b1-c41d08dbdd26"
2025-06-10 03:22:53.897 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:22:53.897 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 03:22:53.936 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='e406ea66-a913-4bb4-98c2-097855a1e7c5', @p1='2025-06-10T01:22:53.8675290Z', @p2=NULL (DbType = DateTime2), @p3='False', @p4='Letsgdzadazdazdazdooo' (Nullable = false) (Size = 100), @p5=NULL (DbType = DateTime2), @p7='e89508ef-e9ba-4a96-b01e-28158c279a65', @p6='54', @p18='2d007e31-e548-4f35-b1b1-c41d08dbdd26', @p8='2025-06-10T01:22:53.8800510Z', @p9=NULL (DbType = DateTime2), @p10='e89508ef-e9ba-4a96-b01e-28158c279a65', @p11='False', @p12='False', @p13='2025-06-10T01:22:53.8799860Z', @p14='51', @p15='Inbound movement' (Nullable = false) (Size = 4000), @p16='1', @p17=NULL (DbType = DateTime2), @p24='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf', @p19='e406ea66-a913-4bb4-98c2-097855a1e7c5', @p20='Macbook AIR M4 PRO MAX' (Nullable = false) (Size = 200), @p21='0', @p22='2025-06-10T01:22:53.8802670Z' (Nullable = true), @p23='999' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 03:22:53.946 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 03:22:53.952 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"2d007e31-e548-4f35-b1b1-c41d08dbdd26"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 03:22:53.962 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='2d007e31-e548-4f35-b1b1-c41d08dbdd26' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 03:22:53.963 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 03:22:53.965 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 247.8535ms
2025-06-10 03:22:53.966 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:22:53.968 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 191
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 03:22:53.972 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 03:22:53.977 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 324.033ms
2025-06-10 03:23:04.605 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 03:23:04.613 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:23:04.614 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:23:04.667 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 03:23:04.671 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='xsxsxsxs' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 03:23:04.671 +02:00 [INF] Brand created: xsxsxsxs
2025-06-10 03:23:04.674 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 03:23:04.675 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 823098
2025-06-10 03:23:04.676 +02:00 [INF] Entity Brand State=Added Id="04a703a2-1284-4aec-9859-85dd6520b049"
2025-06-10 03:23:04.676 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:23:04.676 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:23:04.676 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 03:23:04.676 +02:00 [INF] Entity InventoryMovement State=Modified Id="2f73130f-ddcb-438a-9757-1b98dbde9f6a"
2025-06-10 03:23:04.676 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:23:04.676 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 03:23:04.682 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='04a703a2-1284-4aec-9859-85dd6520b049', @p1='2025-06-10T01:23:04.6715310Z', @p2=NULL (DbType = DateTime2), @p3='False', @p4='xsxsxsxs' (Nullable = false) (Size = 100), @p5=NULL (DbType = DateTime2), @p7='e89508ef-e9ba-4a96-b01e-28158c279a65', @p6='54', @p18='2f73130f-ddcb-438a-9757-1b98dbde9f6a', @p8='2025-06-10T01:23:04.6751590Z', @p9=NULL (DbType = DateTime2), @p10='e89508ef-e9ba-4a96-b01e-28158c279a65', @p11='False', @p12='False', @p13='2025-06-10T01:23:04.6751580Z', @p14='51', @p15='Inbound movement' (Nullable = false) (Size = 4000), @p16='1', @p17=NULL (DbType = DateTime2), @p24='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf', @p19='04a703a2-1284-4aec-9859-85dd6520b049', @p20='Macbook AIR M4 PRO MAX' (Nullable = false) (Size = 200), @p21='0', @p22='2025-06-10T01:23:04.6751640Z' (Nullable = true), @p23='999' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 03:23:04.684 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 03:23:04.686 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"2f73130f-ddcb-438a-9757-1b98dbde9f6a"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 03:23:04.690 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='2f73130f-ddcb-438a-9757-1b98dbde9f6a' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 03:23:04.691 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 03:23:04.692 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 77.4113ms
2025-06-10 03:23:04.692 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:23:04.692 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 191
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 03:23:04.694 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 03:23:04.694 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 88.8899ms
2025-06-10 03:40:18.873 +02:00 [INF] Application is shutting down...
2025-06-10 03:40:24.653 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 03:40:25.111 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 03:40:25.243 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:40:25.248 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:40:25.256 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:40:25.267 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 03:40:25.316 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 03:40:25.485 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 03:40:25.485 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 03:40:25.485 +02:00 [INF] Hosting environment: Development
2025-06-10 03:40:25.485 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 03:40:28.171 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 150
2025-06-10 03:40:28.201 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:40:28.210 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:40:28.330 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 03:40:28.364 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='xsxsxsxs' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 03:40:28.367 +02:00 [INF] Brand created: xsxsxsxs
2025-06-10 03:40:28.369 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 44945906
2025-06-10 03:40:28.383 +02:00 [INF] Entity Brand State=Added Id="2aad262f-82e3-42d5-b878-ddc7e3517ae6"
2025-06-10 03:40:28.383 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:40:28.383 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:40:28.383 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 03:40:28.383 +02:00 [INF] Entity InventoryMovement State=Modified Id="d4b5b4fb-fd61-4b0d-a773-d78ae06b9b00"
2025-06-10 03:40:28.383 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:40:28.384 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 03:40:28.425 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='2aad262f-82e3-42d5-b878-ddc7e3517ae6', @p1='2025-06-10T01:40:28.3644120Z', @p2=NULL (DbType = DateTime2), @p3='False', @p4='xsxsxsxs' (Nullable = false) (Size = 100), @p5=NULL (DbType = DateTime2), @p7='e89508ef-e9ba-4a96-b01e-28158c279a65', @p6='54', @p18='d4b5b4fb-fd61-4b0d-a773-d78ae06b9b00', @p8='2025-06-10T01:40:28.3686640Z', @p9=NULL (DbType = DateTime2), @p10='e89508ef-e9ba-4a96-b01e-28158c279a65', @p11='False', @p12='False', @p13='2025-06-10T01:40:28.3685990Z', @p14='51', @p15='Inbound movement' (Nullable = false) (Size = 4000), @p16='1', @p17=NULL (DbType = DateTime2), @p24='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf', @p19='2aad262f-82e3-42d5-b878-ddc7e3517ae6', @p20='Macbook AIR M4 PRO MAX' (Nullable = false) (Size = 200), @p21='0', @p22='2025-06-10T01:40:28.3688790Z' (Nullable = true), @p23='999' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 03:40:28.436 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:40:28.441 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"d4b5b4fb-fd61-4b0d-a773-d78ae06b9b00"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:40:28.453 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='d4b5b4fb-fd61-4b0d-a773-d78ae06b9b00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 03:40:28.453 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:40:28.455 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 244.1075ms
2025-06-10 03:40:28.457 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:40:28.459 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 188
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 03:40:28.461 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 03:40:28.466 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 295.9328ms
2025-06-10 03:40:40.313 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 166
2025-06-10 03:40:40.324 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:40:40.326 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:40:40.390 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BrandId], [s].[CreatedAt], [s].[DeletedAt], [s].[Description], [s].[IsActive], [s].[IsDeleted], [s].[IsService], [s].[LastSoldAt], [s].[Name], [s].[Status], [s].[UpdatedAt], [s].[PriceAmount], [s].[PriceCurrency], [s].[Id0], [s].[CreatedAt0], [s].[DeletedAt0], [s].[IsActive0], [s].[IsDeleted0], [s].[ProductId], [s].[Quantity], [s].[UpdatedAt0], [i0].[Id], [i0].[CreatedAt], [i0].[DeletedAt], [i0].[InventoryId], [i0].[IsActive], [i0].[IsDeleted], [i0].[OccurredAt], [i0].[QuantityChange], [i0].[Reason], [i0].[Type], [i0].[UpdatedAt]
FROM (
    SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id] AS [Id0], [i].[CreatedAt] AS [CreatedAt0], [i].[DeletedAt] AS [DeletedAt0], [i].[IsActive] AS [IsActive0], [i].[IsDeleted] AS [IsDeleted0], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt] AS [UpdatedAt0]
    FROM [Products] AS [p]
    LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [InventoryMovements] AS [i0] ON [s].[Id0] = [i0].[InventoryId]
ORDER BY [s].[Id], [s].[Id0]
2025-06-10 03:40:40.394 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='fezfezfzerezr' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 03:40:40.394 +02:00 [INF] Brand created: fezfezfzerezr
2025-06-10 03:40:40.394 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 57986540
2025-06-10 03:40:40.395 +02:00 [INF] Entity Brand State=Added Id="e10111a1-07d9-406b-bf2f-c0a7addad3f2"
2025-06-10 03:40:40.395 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:40:40.395 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:40:40.396 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 03:40:40.396 +02:00 [INF] Entity InventoryMovement State=Modified Id="5eff694f-91b1-4af4-90f9-eea227d33fdd"
2025-06-10 03:40:40.396 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:40:40.396 +02:00 [INF] Entity InventoryMovement State=Unchanged Id="ca97a44c-7e0c-45b4-9055-c0e4c1b2a35e"
2025-06-10 03:40:40.401 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='e10111a1-07d9-406b-bf2f-c0a7addad3f2', @p1='2025-06-10T01:40:40.3943990Z', @p2=NULL (DbType = DateTime2), @p3='False', @p4='fezfezfzerezr' (Nullable = false) (Size = 100), @p5=NULL (DbType = DateTime2), @p7='e89508ef-e9ba-4a96-b01e-28158c279a65', @p6='54', @p18='5eff694f-91b1-4af4-90f9-eea227d33fdd', @p8='2025-06-10T01:40:40.3947010Z', @p9=NULL (DbType = DateTime2), @p10='e89508ef-e9ba-4a96-b01e-28158c279a65', @p11='False', @p12='False', @p13='2025-06-10T01:40:40.3946990Z', @p14='51', @p15='Inbound movement' (Nullable = false) (Size = 4000), @p16='1', @p17=NULL (DbType = DateTime2), @p24='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf', @p19='e10111a1-07d9-406b-bf2f-c0a7addad3f2', @p20='Macbook AIR M4 PRO MAX' (Nullable = false) (Size = 200), @p21='0', @p22='2025-06-10T01:40:40.3947040Z' (Nullable = true), @p23='999' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 03:40:40.404 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:40:40.406 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"5eff694f-91b1-4af4-90f9-eea227d33fdd"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:40:40.412 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='5eff694f-91b1-4af4-90f9-eea227d33fdd' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 03:40:40.412 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:40:40.414 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 87.4975ms
2025-06-10 03:40:40.414 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:40:40.414 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 188
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 03:40:40.415 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 03:40:40.416 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 102.3185ms
2025-06-10 03:42:39.335 +02:00 [INF] Application is shutting down...
2025-06-10 03:42:43.064 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 03:42:43.435 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 03:42:43.527 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:42:43.532 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:42:43.534 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:42:43.544 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 03:42:43.575 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 03:42:43.745 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 03:42:43.745 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 03:42:43.745 +02:00 [INF] Hosting environment: Development
2025-06-10 03:42:43.745 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 03:42:46.451 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 166
2025-06-10 03:42:46.486 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:42:46.495 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:42:46.598 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 03:42:46.621 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='fezfezfzerezr' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 03:42:46.624 +02:00 [INF] Brand created: fezfezfzerezr
2025-06-10 03:42:46.626 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 9975744
2025-06-10 03:42:46.645 +02:00 [INF] Entity Brand State=Added Id="5a108c1d-b484-46e4-b64a-661a0238b6e5"
2025-06-10 03:42:46.645 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:42:46.645 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:42:46.645 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 03:42:46.645 +02:00 [INF] Entity InventoryMovement State=Modified Id="2b253bd7-cbed-48e6-9887-e177549098c0"
2025-06-10 03:42:46.645 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:42:46.685 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='5a108c1d-b484-46e4-b64a-661a0238b6e5', @p1='2025-06-10T01:42:46.6220300Z', @p2=NULL (DbType = DateTime2), @p3='False', @p4='fezfezfzerezr' (Nullable = false) (Size = 100), @p5=NULL (DbType = DateTime2), @p7='e89508ef-e9ba-4a96-b01e-28158c279a65', @p6='54', @p18='2b253bd7-cbed-48e6-9887-e177549098c0', @p8='2025-06-10T01:42:46.6257210Z', @p9=NULL (DbType = DateTime2), @p10='e89508ef-e9ba-4a96-b01e-28158c279a65', @p11='False', @p12='False', @p13='2025-06-10T01:42:46.6256540Z', @p14='51', @p15='Inbound movement' (Nullable = false) (Size = 4000), @p16='1', @p17=NULL (DbType = DateTime2), @p24='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf', @p19='5a108c1d-b484-46e4-b64a-661a0238b6e5', @p20='Macbook AIR M4 PRO MAX' (Nullable = false) (Size = 200), @p21='0', @p22='2025-06-10T01:42:46.6259260Z' (Nullable = true), @p23='999' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Inventories] SET [Quantity] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [Name] = @p20, [Status] = @p21, [UpdatedAt] = @p22, [PriceAmount] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-06-10 03:42:46.696 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:42:46.701 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"2b253bd7-cbed-48e6-9887-e177549098c0"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:42:46.713 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='2b253bd7-cbed-48e6-9887-e177549098c0' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 03:42:46.713 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 121
2025-06-10 03:42:46.716 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 219.6587ms
2025-06-10 03:42:46.717 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:42:46.719 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 188
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 03:42:46.721 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 03:42:46.726 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 276.422ms
2025-06-10 03:47:25.550 +02:00 [INF] Application is shutting down...
2025-06-10 03:47:29.807 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 03:47:30.060 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 03:47:30.111 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:47:30.114 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:47:30.118 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 03:47:30.127 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 03:47:30.149 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 03:47:30.281 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 03:47:30.281 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 03:47:30.281 +02:00 [INF] Hosting environment: Development
2025-06-10 03:47:30.282 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 03:47:35.110 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 166
2025-06-10 03:47:35.169 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:47:35.189 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:47:35.320 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 03:47:35.340 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 19079955
2025-06-10 03:47:35.361 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:47:35.361 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:47:35.361 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 03:47:35.361 +02:00 [INF] Entity InventoryMovement State=Modified Id="2ba3c092-1dba-4c1d-9b7f-a7ea5006428a"
2025-06-10 03:47:35.361 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:47:35.398 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='e89508ef-e9ba-4a96-b01e-28158c279a65', @p0='54', @p12='2ba3c092-1dba-4c1d-9b7f-a7ea5006428a', @p2='2025-06-10T01:47:35.3396190Z', @p3=NULL (DbType = DateTime2), @p4='e89508ef-e9ba-4a96-b01e-28158c279a65', @p5='False', @p6='False', @p7='2025-06-10T01:47:35.3395440Z', @p8='51', @p9='Inbound movement' (Nullable = false) (Size = 4000), @p10='1', @p11=NULL (DbType = DateTime2), @p17='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf', @p13='Macbook AIR M4 PRO MAX' (Nullable = false) (Size = 200), @p14='0', @p15='2025-06-10T01:47:35.3398260Z' (Nullable = true), @p16='999' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 03:47:35.407 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
2025-06-10 03:47:35.412 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"2ba3c092-1dba-4c1d-9b7f-a7ea5006428a"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
2025-06-10 03:47:35.423 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='2ba3c092-1dba-4c1d-9b7f-a7ea5006428a' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 03:47:35.423 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
2025-06-10 03:47:35.426 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 235.0964ms
2025-06-10 03:47:35.427 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:47:35.429 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 192
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 03:47:35.433 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 03:47:35.438 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 329.0367ms
2025-06-10 03:47:43.484 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - application/json 161
2025-06-10 03:47:43.490 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:47:43.491 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:47:43.536 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 03:47:43.537 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 44373607
2025-06-10 03:47:43.538 +02:00 [INF] Entity Money State=Added Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:47:43.538 +02:00 [INF] Entity Product State=Modified Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:47:43.538 +02:00 [INF] Entity Inventory State=Modified Id="e89508ef-e9ba-4a96-b01e-28158c279a65"
2025-06-10 03:47:43.538 +02:00 [INF] Entity InventoryMovement State=Modified Id="76bf8e2e-c52a-44aa-a7f7-4add0e7653d5"
2025-06-10 03:47:43.538 +02:00 [INF] Entity Money State=Deleted Id="6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
2025-06-10 03:47:43.543 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e89508ef-e9ba-4a96-b01e-28158c279a65', @p0='54', @p12='76bf8e2e-c52a-44aa-a7f7-4add0e7653d5', @p2='2025-06-10T01:47:43.5375240Z', @p3=NULL (DbType = DateTime2), @p4='e89508ef-e9ba-4a96-b01e-28158c279a65', @p5='False', @p6='False', @p7='2025-06-10T01:47:43.5375230Z', @p8='51', @p9='Inbound movement' (Nullable = false) (Size = 4000), @p10='1', @p11=NULL (DbType = DateTime2), @p17='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf', @p13='Macbook AIR M4 PRO MAX' (Nullable = false) (Size = 200), @p14='0', @p15='2025-06-10T01:47:43.5375270Z' (Nullable = true), @p16='999' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [Status] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 03:47:43.545 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "6b3126ec-ba5e-46e5-9cfc-13f82022f1cf"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
2025-06-10 03:47:43.546 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"76bf8e2e-c52a-44aa-a7f7-4add0e7653d5"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
2025-06-10 03:47:43.551 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='76bf8e2e-c52a-44aa-a7f7-4add0e7653d5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 03:47:43.552 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 120
2025-06-10 03:47:43.553 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 61.4731ms
2025-06-10 03:47:43.553 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 03:47:43.553 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 192
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 03:47:43.554 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 03:47:43.555 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 500 null application/problem+json; charset=utf-8 70.7307ms
2025-06-10 03:47:57.800 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - null null
2025-06-10 03:47:57.815 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 03:47:57.821 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 03:47:57.835 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='6b3126ec-ba5e-46e5-9cfc-13f82022f1cf'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 03:47:57.842 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 03:47:57.849 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 27.3228ms
2025-06-10 03:47:57.849 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 03:47:57.850 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/6b3126ec-ba5e-46e5-9cfc-13f82022f1cf - 200 null application/json; charset=utf-8 49.6537ms
2025-06-10 17:31:51.145 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:31:51.425 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:31:51.475 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:31:51.479 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:31:51.481 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:31:51.491 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:31:51.513 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:31:51.643 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:31:51.643 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:31:51.643 +02:00 [INF] Hosting environment: Development
2025-06-10 17:31:51.643 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:31:53.967 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-06-10 17:31:54.036 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.4149ms
2025-06-10 17:32:00.273 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-06-10 17:32:00.311 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-06-10 17:32:00.322 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.Pagination.PagedResult`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductSummary]]]] GetAll(PulseERP.Abstractions.Common.Filters.ProductFilter) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:32:00.403 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-06-10 17:32:00.443 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='0', @__p_1='12'], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[CreatedAt], [p0].[DeletedAt], [p0].[Description], [p0].[IsActive], [p0].[IsDeleted], [p0].[IsService], [p0].[LastSoldAt], [p0].[Name], [p0].[Status], [p0].[UpdatedAt], [p0].[PriceAmount], [p0].[PriceCurrency], [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
LEFT JOIN [Inventories] AS [i] ON [p0].[Id] = [i].[ProductId]
ORDER BY [p0].[Name]
2025-06-10 17:32:00.452 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.Pagination.PagedResult`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductSummary, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:32:00.460 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API) in 136.7688ms
2025-06-10 17:32:00.460 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-06-10 17:32:00.461 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 187.5686ms
2025-06-10 17:32:26.266 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 17:32:26.271 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:32:26.274 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:32:26.331 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:32:26.334 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:32:26.336 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 61.6003ms
2025-06-10 17:32:26.336 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:32:26.336 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 70.179ms
2025-06-10 17:33:20.627 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:33:20.631 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:33:20.635 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:33:20.665 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:33:20.668 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 11754103
2025-06-10 17:33:20.679 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:33:20.685 +02:00 [INF] Brand created: AllMight
2025-06-10 17:33:20.686 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 11754103
2025-06-10 17:33:20.686 +02:00 [INF] Entity Brand State=Added Id="d9780c37-a05b-4d01-b7f6-9e8b02a36070"
2025-06-10 17:33:20.720 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='d9780c37-a05b-4d01-b7f6-9e8b02a36070', @p1='2025-06-10T15:33:20.6794850Z', @p2=NULL (DbType = DateTime2), @p3='False', @p4='AllMight' (Nullable = false) (Size = 100), @p5=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [DeletedAt], [IsDeleted], [Name], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-10 17:33:20.727 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:33:20.728 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 92.5211ms
2025-06-10 17:33:20.728 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:33:20.728 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 100.6517ms
2025-06-10 17:33:35.848 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 17:33:35.849 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:33:35.849 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:33:35.853 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:33:35.854 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:33:35.855 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 5.4751ms
2025-06-10 17:33:35.855 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:33:35.856 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 7.086ms
2025-06-10 17:34:52.776 +02:00 [INF] Application is shutting down...
2025-06-10 17:34:55.907 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:34:56.176 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:34:56.227 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:34:56.230 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:34:56.233 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:34:56.243 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:34:56.265 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:34:56.396 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:34:56.396 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:34:56.396 +02:00 [INF] Hosting environment: Development
2025-06-10 17:34:56.396 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:35:01.729 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:35:01.757 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:35:01.763 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:35:01.860 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:35:01.869 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:35:01.900 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 47055424
2025-06-10 17:35:01.901 +02:00 [INF] Entity Product State=Modified Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:35:01.901 +02:00 [INF] Entity Inventory State=Modified Id="a934cd51-e2f7-4804-82f4-f10259d226a6"
2025-06-10 17:35:01.901 +02:00 [INF] Entity InventoryMovement State=Modified Id="b9ad8f72-6a6d-4730-8722-9f1e74a46307"
2025-06-10 17:35:01.901 +02:00 [INF] Entity Money State=Modified Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:35:01.901 +02:00 [INF] Entity Brand State=Unchanged Id="d9780c37-a05b-4d01-b7f6-9e8b02a36070"
2025-06-10 17:35:01.962 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@p7='a934cd51-e2f7-4804-82f4-f10259d226a6', @p0='2025-06-09T15:36:02.2734200Z', @p1=NULL (DbType = DateTime2), @p2='True', @p3='False', @p4='f479470a-c50e-410b-87e9-5a775fa47166', @p5='555', @p6=NULL (DbType = DateTime2), @p18='b9ad8f72-6a6d-4730-8722-9f1e74a46307', @p8='2025-06-10T15:35:01.8640060Z', @p9=NULL (DbType = DateTime2), @p10='a934cd51-e2f7-4804-82f4-f10259d226a6', @p11='False', @p12='False', @p13='2025-06-10T15:35:01.8639450Z', @p14='530', @p15='Inbound movement' (Nullable = false) (Size = 4000), @p16='1', @p17=NULL (DbType = DateTime2), @p32='f479470a-c50e-410b-87e9-5a775fa47166', @p19='d9780c37-a05b-4d01-b7f6-9e8b02a36070', @p20='2025-06-09T15:36:02.2734200Z', @p21=NULL (DbType = DateTime2), @p22='Printer/scanner/copier' (Size = 500) (DbType = AnsiString), @p23='True', @p24='False', @p25='False', @p26=NULL (DbType = DateTime2), @p27='AllForOne' (Nullable = false) (Size = 200), @p28='0', @p29='2025-06-10T15:35:01.8700990Z' (Nullable = true), @p30='24' (Precision = 18) (Scale = 2), @p31='EUR' (Nullable = false) (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [CreatedAt] = @p0, [DeletedAt] = @p1, [IsActive] = @p2, [IsDeleted] = @p3, [ProductId] = @p4, [Quantity] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
UPDATE [InventoryMovements] SET [CreatedAt] = @p8, [DeletedAt] = @p9, [InventoryId] = @p10, [IsActive] = @p11, [IsDeleted] = @p12, [OccurredAt] = @p13, [QuantityChange] = @p14, [Reason] = @p15, [Type] = @p16, [UpdatedAt] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [Products] SET [BrandId] = @p19, [CreatedAt] = @p20, [DeletedAt] = @p21, [Description] = @p22, [IsActive] = @p23, [IsDeleted] = @p24, [IsService] = @p25, [LastSoldAt] = @p26, [Name] = @p27, [Status] = @p28, [UpdatedAt] = @p29, [PriceAmount] = @p30, [PriceCurrency] = @p31
OUTPUT 1
WHERE [Id] = @p32;
2025-06-10 17:35:01.971 +02:00 [ERR] DbUpdateConcurrencyException lors de UpdateProductAsync pour ProductId "f479470a-c50e-410b-87e9-5a775fa47166"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 17:35:01.978 +02:00 [ERR]  Conflit sur entit InventoryMovement avec PK {"Id":"b9ad8f72-6a6d-4730-8722-9f1e74a46307"}
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 17:35:01.988 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='b9ad8f72-6a6d-4730-8722-9f1e74a46307' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[InventoryId], [i].[IsActive], [i].[IsDeleted], [i].[OccurredAt], [i].[QuantityChange], [i].[Reason], [i].[Type], [i].[UpdatedAt]
FROM [InventoryMovements] AS [i]
WHERE [i].[Id] = @__p_0
2025-06-10 17:35:01.988 +02:00 [ERR]   L'entit de type InventoryMovement a t supprime en base.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 124
2025-06-10 17:35:01.991 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 226.8205ms
2025-06-10 17:35:01.993 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:35:01.995 +02:00 [ERR] An unhandled exception has occurred while executing the request.
PulseERP.Domain.Errors.DomainValidationException: Le produit a t modifi ou supprim ailleurs. Veuillez recharger.
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 193
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 17:35:01.999 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 17:35:02.005 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 500 null application/problem+json; charset=utf-8 276.4077ms
2025-06-10 17:35:49.483 +02:00 [INF] Application is shutting down...
2025-06-10 17:35:52.459 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:35:52.715 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:35:52.764 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:35:52.767 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:35:52.769 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:35:52.778 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:35:52.800 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:35:52.912 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:35:52.912 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:35:52.912 +02:00 [INF] Hosting environment: Development
2025-06-10 17:35:52.912 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:35:59.132 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:35:59.163 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:35:59.171 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:35:59.309 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:35:59.318 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:35:59.353 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:35:59.360 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 187.9ms
2025-06-10 17:35:59.361 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:35:59.363 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 232.0646ms
2025-06-10 17:36:09.188 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 17:36:09.198 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:36:09.202 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:36:09.245 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:36:09.246 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:36:09.247 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 44.0921ms
2025-06-10 17:36:09.247 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:36:09.247 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 59.1481ms
2025-06-10 17:36:44.881 +02:00 [INF] Application is shutting down...
2025-06-10 17:36:48.051 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:36:48.317 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:36:48.368 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:36:48.372 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:36:48.374 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:36:48.384 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:36:48.406 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:36:48.514 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:36:48.514 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:36:48.514 +02:00 [INF] Hosting environment: Development
2025-06-10 17:36:48.514 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:36:53.951 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:36:53.982 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:36:53.989 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:36:54.086 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:36:54.110 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:36:54.116 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:36:54.123 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 132.9557ms
2025-06-10 17:36:54.124 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:36:54.126 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 176.84ms
2025-06-10 17:37:03.938 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 17:37:03.947 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:37:03.953 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:37:03.997 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:37:03.998 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:37:03.999 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 45.3616ms
2025-06-10 17:37:03.999 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:37:03.999 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 60.7183ms
2025-06-10 17:37:09.534 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 17:37:09.536 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:37:09.536 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:37:09.546 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:37:09.547 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:37:09.547 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 11.0097ms
2025-06-10 17:37:09.548 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:37:09.548 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 13.2135ms
2025-06-10 17:37:16.036 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:37:16.037 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:37:16.037 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:37:16.042 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:37:16.049 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:37:16.051 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:37:16.051 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 14.2679ms
2025-06-10 17:37:16.052 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:37:16.052 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 15.9078ms
2025-06-10 17:37:20.807 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 17:37:20.808 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:37:20.808 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:37:20.813 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:37:20.814 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:37:20.815 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 6.536ms
2025-06-10 17:37:20.815 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:37:20.815 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 7.72ms
2025-06-10 17:45:42.792 +02:00 [INF] Application is shutting down...
2025-06-10 17:45:46.507 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:45:46.769 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:45:46.818 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:45:46.821 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:45:46.824 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:45:46.834 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:45:46.855 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:45:46.962 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:45:46.962 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:45:46.962 +02:00 [INF] Hosting environment: Development
2025-06-10 17:45:46.962 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:45:54.489 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:45:54.531 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:45:54.537 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:45:54.668 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:45:54.692 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:45:54.698 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:45:54.706 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 167.5656ms
2025-06-10 17:45:54.707 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:45:54.709 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 220.7068ms
2025-06-10 17:46:02.782 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:46:02.789 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:46:02.790 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:46:02.840 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:46:02.842 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:46:02.843 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:46:02.843 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 50.5729ms
2025-06-10 17:46:02.843 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:46:02.843 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 61.6921ms
2025-06-10 17:46:49.282 +02:00 [INF] Application is shutting down...
2025-06-10 17:46:51.664 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:46:51.909 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:46:51.956 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:46:51.959 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:46:51.961 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:46:51.970 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:46:51.990 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:46:52.086 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:46:52.086 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:46:52.086 +02:00 [INF] Hosting environment: Development
2025-06-10 17:46:52.086 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:46:55.503 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:46:55.533 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:46:55.541 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:46:55.640 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:46:55.665 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:46:55.671 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:46:55.678 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 136.1553ms
2025-06-10 17:46:55.680 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:46:55.681 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 179.2637ms
2025-06-10 17:48:27.695 +02:00 [INF] Application is shutting down...
2025-06-10 17:48:30.322 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:48:30.571 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:48:30.618 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:48:30.623 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:48:30.627 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:48:30.635 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:48:30.655 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:48:30.793 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:48:30.793 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:48:30.793 +02:00 [INF] Hosting environment: Development
2025-06-10 17:48:30.794 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:48:37.615 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 17:48:37.648 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:48:37.653 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:48:37.742 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:48:37.763 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:48:37.772 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 117.194ms
2025-06-10 17:48:37.773 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:48:37.775 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 160.6523ms
2025-06-10 17:48:44.620 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:48:44.624 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:48:44.629 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:48:44.684 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:48:44.695 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:48:44.699 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:48:44.699 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 69.2523ms
2025-06-10 17:48:44.699 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:48:44.699 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 78.9912ms
2025-06-10 17:50:15.661 +02:00 [INF] Application is shutting down...
2025-06-10 17:50:18.097 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:50:18.341 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:50:18.389 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:50:18.393 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:50:18.395 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:50:18.403 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:50:18.423 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:50:18.504 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:50:18.504 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:50:18.504 +02:00 [INF] Hosting environment: Development
2025-06-10 17:50:18.504 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:50:22.743 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:50:22.767 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:50:22.773 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:50:22.867 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:50:22.892 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:50:22.898 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:50:22.905 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 131.178ms
2025-06-10 17:50:22.906 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:50:22.908 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 165.8312ms
2025-06-10 17:50:33.006 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 17:50:33.014 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:50:33.020 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:50:33.064 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:50:33.065 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 17:50:33.065 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 45.2984ms
2025-06-10 17:50:33.066 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 17:50:33.066 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 60.3095ms
2025-06-10 17:50:46.485 +02:00 [INF] Application is shutting down...
2025-06-10 17:50:48.885 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:50:49.130 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:50:49.177 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:50:49.181 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:50:49.183 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:50:49.192 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:50:49.213 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:50:49.324 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:50:49.324 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:50:49.324 +02:00 [INF] Hosting environment: Development
2025-06-10 17:50:49.324 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:50:53.592 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:50:53.615 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:50:53.621 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:50:53.714 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:50:53.739 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:50:53.742 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 25794622
2025-06-10 17:50:53.759 +02:00 [INF] Entity Money State=Added Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:50:53.759 +02:00 [INF] Entity Product State=Modified Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:50:53.759 +02:00 [INF] Entity Inventory State=Modified Id="a934cd51-e2f7-4804-82f4-f10259d226a6"
2025-06-10 17:50:53.760 +02:00 [INF] Entity InventoryMovement State=Modified Id="568e0c4c-d779-4bd3-949f-1c969aceeacd"
2025-06-10 17:50:53.760 +02:00 [INF] Entity Money State=Deleted Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:50:53.760 +02:00 [INF] Entity Brand State=Unchanged Id="d9780c37-a05b-4d01-b7f6-9e8b02a36070"
2025-06-10 17:50:53.796 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='a934cd51-e2f7-4804-82f4-f10259d226a6', @p0='555', @p12='568e0c4c-d779-4bd3-949f-1c969aceeacd', @p2='2025-06-10T15:50:53.7331280Z', @p3=NULL (DbType = DateTime2), @p4='a934cd51-e2f7-4804-82f4-f10259d226a6', @p5='False', @p6='False', @p7='2025-06-10T15:50:53.7330660Z', @p8='530', @p9='Inbound movement' (Nullable = false) (Size = 4000), @p10='1', @p11=NULL (DbType = DateTime2), @p25='f479470a-c50e-410b-87e9-5a775fa47166', @p13='d9780c37-a05b-4d01-b7f6-9e8b02a36070', @p14='2025-06-09T15:36:02.2734200Z', @p15=NULL (DbType = DateTime2), @p16='Printer/scanner/copier' (Size = 500) (DbType = AnsiString), @p17='True', @p18='False', @p19='False', @p20=NULL (DbType = DateTime2), @p21='AllForOne' (Nullable = false) (Size = 200), @p22='0', @p23='2025-06-10T15:50:53.7401620Z' (Nullable = true), @p24='24' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [BrandId] = @p13, [CreatedAt] = @p14, [DeletedAt] = @p15, [Description] = @p16, [IsActive] = @p17, [IsDeleted] = @p18, [IsService] = @p19, [LastSoldAt] = @p20, [Name] = @p21, [Status] = @p22, [UpdatedAt] = @p23, [PriceAmount] = @p24
OUTPUT 1
WHERE [Id] = @p25;
2025-06-10 17:50:53.804 +02:00 [ERR] Exception inattendue (Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException) lors de UpdateProductAsync: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 127
2025-06-10 17:50:53.810 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 187.7675ms
2025-06-10 17:50:53.811 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:50:53.813 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 127
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 17:50:53.818 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 17:50:53.823 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 500 null application/problem+json; charset=utf-8 232.0757ms
2025-06-10 17:51:01.513 +02:00 [INF] Application is shutting down...
2025-06-10 17:51:03.844 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:51:04.090 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:51:04.138 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:51:04.142 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:51:04.145 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:51:04.153 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:51:04.173 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:51:04.257 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:51:04.257 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:51:04.258 +02:00 [INF] Hosting environment: Development
2025-06-10 17:51:04.258 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:51:12.741 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:51:12.773 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:51:12.779 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:51:12.872 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:51:12.896 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 17:51:12.896 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 25794622
2025-06-10 17:51:12.917 +02:00 [INF] Entity Money State=Added Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:12.917 +02:00 [INF] Entity Product State=Modified Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:12.917 +02:00 [INF] Entity Inventory State=Modified Id="a934cd51-e2f7-4804-82f4-f10259d226a6"
2025-06-10 17:51:12.917 +02:00 [INF] Entity InventoryMovement State=Modified Id="a6df5a05-f98b-4280-a545-b2ccdd95f5b7"
2025-06-10 17:51:12.917 +02:00 [INF] Entity Money State=Deleted Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:12.917 +02:00 [INF] Entity Brand State=Unchanged Id="d9780c37-a05b-4d01-b7f6-9e8b02a36070"
2025-06-10 17:51:12.973 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p1='a934cd51-e2f7-4804-82f4-f10259d226a6', @p0='555', @p12='a6df5a05-f98b-4280-a545-b2ccdd95f5b7', @p2='2025-06-10T15:51:12.8902230Z', @p3=NULL (DbType = DateTime2), @p4='a934cd51-e2f7-4804-82f4-f10259d226a6', @p5='False', @p6='False', @p7='2025-06-10T15:51:12.8901610Z', @p8='530', @p9='Inbound movement' (Nullable = false) (Size = 4000), @p10='1', @p11=NULL (DbType = DateTime2), @p17='f479470a-c50e-410b-87e9-5a775fa47166', @p13='d9780c37-a05b-4d01-b7f6-9e8b02a36070', @p14='AllForOne' (Nullable = false) (Size = 200), @p15='2025-06-10T15:51:12.8966720Z' (Nullable = true), @p16='24' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [BrandId] = @p13, [Name] = @p14, [UpdatedAt] = @p15, [PriceAmount] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-06-10 17:51:12.980 +02:00 [ERR] Exception inattendue (Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException) lors de UpdateProductAsync: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 125
2025-06-10 17:51:12.986 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 205.5401ms
2025-06-10 17:51:12.987 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:51:12.989 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 125
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 17:51:12.993 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 17:51:12.999 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 500 null application/problem+json; charset=utf-8 258.6438ms
2025-06-10 17:51:38.018 +02:00 [INF] Application is shutting down...
2025-06-10 17:51:40.950 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 17:51:41.194 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 17:51:41.249 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:51:41.253 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:51:41.257 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 17:51:41.266 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 17:51:41.287 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 17:51:41.370 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 17:51:41.370 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 17:51:41.371 +02:00 [INF] Hosting environment: Development
2025-06-10 17:51:41.371 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 17:51:44.021 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:51:44.051 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:51:44.058 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:51:44.156 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:51:44.174 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 19127402
2025-06-10 17:51:44.195 +02:00 [INF] Entity Money State=Added Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:44.195 +02:00 [INF] Entity Product State=Modified Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:44.195 +02:00 [INF] Entity Inventory State=Modified Id="a934cd51-e2f7-4804-82f4-f10259d226a6"
2025-06-10 17:51:44.195 +02:00 [INF] Entity InventoryMovement State=Modified Id="b84d8ffc-de58-4c31-9929-a6db33f821f1"
2025-06-10 17:51:44.196 +02:00 [INF] Entity Money State=Deleted Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:44.245 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p1='a934cd51-e2f7-4804-82f4-f10259d226a6', @p0='555', @p12='b84d8ffc-de58-4c31-9929-a6db33f821f1', @p2='2025-06-10T15:51:44.1744070Z', @p3=NULL (DbType = DateTime2), @p4='a934cd51-e2f7-4804-82f4-f10259d226a6', @p5='False', @p6='False', @p7='2025-06-10T15:51:44.1743450Z', @p8='530', @p9='Inbound movement' (Nullable = false) (Size = 4000), @p10='1', @p11=NULL (DbType = DateTime2), @p16='f479470a-c50e-410b-87e9-5a775fa47166', @p13='AllForOne' (Nullable = false) (Size = 200), @p14='2025-06-10T15:51:44.1746070Z' (Nullable = true), @p15='24' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [UpdatedAt] = @p14, [PriceAmount] = @p15
OUTPUT 1
WHERE [Id] = @p16;
2025-06-10 17:51:44.252 +02:00 [ERR] Exception inattendue (Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException) lors de UpdateProductAsync: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
2025-06-10 17:51:44.258 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 199.0593ms
2025-06-10 17:51:44.259 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:51:44.261 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 17:51:44.264 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 17:51:44.270 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 500 null application/problem+json; charset=utf-8 250.0307ms
2025-06-10 17:51:46.736 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 17:51:46.743 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:51:46.743 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:51:46.793 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:51:46.794 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 30380696
2025-06-10 17:51:46.795 +02:00 [INF] Entity Money State=Added Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:46.795 +02:00 [INF] Entity Product State=Modified Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:46.795 +02:00 [INF] Entity Inventory State=Modified Id="a934cd51-e2f7-4804-82f4-f10259d226a6"
2025-06-10 17:51:46.795 +02:00 [INF] Entity InventoryMovement State=Modified Id="b70cd780-8fd2-493d-aa76-669f7820959d"
2025-06-10 17:51:46.795 +02:00 [INF] Entity Money State=Deleted Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:46.800 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='a934cd51-e2f7-4804-82f4-f10259d226a6', @p0='555', @p12='b70cd780-8fd2-493d-aa76-669f7820959d', @p2='2025-06-10T15:51:46.7943070Z', @p3=NULL (DbType = DateTime2), @p4='a934cd51-e2f7-4804-82f4-f10259d226a6', @p5='False', @p6='False', @p7='2025-06-10T15:51:46.7943050Z', @p8='530', @p9='Inbound movement' (Nullable = false) (Size = 4000), @p10='1', @p11=NULL (DbType = DateTime2), @p16='f479470a-c50e-410b-87e9-5a775fa47166', @p13='AllForOne' (Nullable = false) (Size = 200), @p14='2025-06-10T15:51:46.7943090Z' (Nullable = true), @p15='24' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [UpdatedAt] = @p14, [PriceAmount] = @p15
OUTPUT 1
WHERE [Id] = @p16;
2025-06-10 17:51:46.802 +02:00 [ERR] Exception inattendue (Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException) lors de UpdateProductAsync: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
2025-06-10 17:51:46.804 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 59.8919ms
2025-06-10 17:51:46.804 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:51:46.804 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 17:51:46.806 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 17:51:46.806 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 500 null application/problem+json; charset=utf-8 70.0641ms
2025-06-10 17:51:54.589 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 148
2025-06-10 17:51:54.596 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:51:54.596 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 17:51:54.608 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 17:51:54.610 +02:00 [INF] SaveChangesAsync in CoreDbContext instance: 61515057
2025-06-10 17:51:54.611 +02:00 [INF] Entity Money State=Added Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:54.611 +02:00 [INF] Entity Product State=Modified Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:54.611 +02:00 [INF] Entity Inventory State=Modified Id="a934cd51-e2f7-4804-82f4-f10259d226a6"
2025-06-10 17:51:54.611 +02:00 [INF] Entity InventoryMovement State=Modified Id="dff94801-9917-47f5-adde-c975fbb156f8"
2025-06-10 17:51:54.611 +02:00 [INF] Entity Money State=Deleted Id="f479470a-c50e-410b-87e9-5a775fa47166"
2025-06-10 17:51:54.620 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='a934cd51-e2f7-4804-82f4-f10259d226a6', @p0='555', @p12='dff94801-9917-47f5-adde-c975fbb156f8', @p2='2025-06-10T15:51:54.6103890Z', @p3=NULL (DbType = DateTime2), @p4='a934cd51-e2f7-4804-82f4-f10259d226a6', @p5='False', @p6='False', @p7='2025-06-10T15:51:54.6103870Z', @p8='530', @p9='Inbound movement' (Nullable = false) (Size = 4000), @p10='1', @p11=NULL (DbType = DateTime2), @p16='f479470a-c50e-410b-87e9-5a775fa47166', @p13='AllForOne' (Nullable = false) (Size = 200), @p14='2025-06-10T15:51:54.6103940Z' (Nullable = true), @p15='24' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [InventoryMovements] SET [CreatedAt] = @p2, [DeletedAt] = @p3, [InventoryId] = @p4, [IsActive] = @p5, [IsDeleted] = @p6, [OccurredAt] = @p7, [QuantityChange] = @p8, [Reason] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;
UPDATE [Products] SET [Name] = @p13, [UpdatedAt] = @p14, [PriceAmount] = @p15
OUTPUT 1
WHERE [Id] = @p16;
2025-06-10 17:51:54.627 +02:00 [ERR] Exception inattendue (Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException) lors de UpdateProductAsync: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
2025-06-10 17:51:54.630 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 33.8247ms
2025-06-10 17:51:54.630 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 17:51:54.631 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Application.Services.ProductService.UpdateProductAsync(Guid id, UpdateProductCommand cmd) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.Application/Services/ProductService.cs:line 122
   at PulseERP.API.Controllers.ProductsController.Update(Guid id, UpdateProductCommand request) in /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 62
   at lambda_method123(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hellang.Middleware.ProblemDetails.ProblemDetailsMiddleware.Invoke(HttpContext context)
2025-06-10 17:51:54.634 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-06-10 17:51:54.635 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 500 null application/problem+json; charset=utf-8 45.1414ms
2025-06-10 17:52:09.329 +02:00 [INF] Application is shutting down...
2025-06-10 18:06:00.764 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 18:06:01.017 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 18:06:01.064 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:06:01.068 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:06:01.071 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:06:01.080 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 18:06:01.102 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 18:06:01.243 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 18:06:01.243 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 18:06:01.243 +02:00 [INF] Hosting environment: Development
2025-06-10 18:06:01.243 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 18:06:30.454 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 18:06:30.488 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:06:30.494 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:06:30.608 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:06:30.631 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 18:06:30.689 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p1='a934cd51-e2f7-4804-82f4-f10259d226a6', @p0='555', @p6='f479470a-c50e-410b-87e9-5a775fa47166', @p2='d9780c37-a05b-4d01-b7f6-9e8b02a36070', @p3='AllForOne' (Nullable = false) (Size = 200), @p4='2025-06-10T16:06:30.6319410Z' (Nullable = true), @p5='24' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Inventories] SET [Quantity] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Products] SET [BrandId] = @p2, [Name] = @p3, [UpdatedAt] = @p4, [PriceAmount] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-06-10 18:06:30.703 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:06:30.709 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 214.1402ms
2025-06-10 18:06:30.711 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:06:30.712 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 259.4914ms
2025-06-10 18:06:42.299 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 18:06:42.307 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:06:42.311 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:06:42.346 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:06:42.347 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:06:42.347 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 35.4498ms
2025-06-10 18:06:42.347 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:06:42.347 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 47.9611ms
2025-06-10 18:10:28.814 +02:00 [INF] Application is shutting down...
2025-06-10 18:10:31.573 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 18:10:31.828 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 18:10:31.875 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:10:31.878 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:10:31.881 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:10:31.890 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 18:10:31.910 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 18:10:32.041 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 18:10:32.042 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 18:10:32.042 +02:00 [INF] Hosting environment: Development
2025-06-10 18:10:32.042 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 18:11:04.367 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 18:11:04.399 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:11:04.405 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:11:04.495 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:11:04.515 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:11:04.524 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 117.626ms
2025-06-10 18:11:04.525 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:11:04.527 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 161.0037ms
2025-06-10 18:11:09.692 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 144
2025-06-10 18:11:09.699 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:11:09.705 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:11:09.759 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:11:09.769 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 18:11:09.823 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p2='f479470a-c50e-410b-87e9-5a775fa47166', @p0='My Hero Academia' (Size = 500) (DbType = AnsiString), @p1='2025-06-10T16:11:09.7736360Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-10 18:11:09.827 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:11:09.827 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 121.7755ms
2025-06-10 18:11:09.827 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:11:09.827 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 135.175ms
2025-06-10 18:11:22.142 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 18:11:22.145 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:11:22.146 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:11:22.155 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:11:22.157 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:11:22.158 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 11.692ms
2025-06-10 18:11:22.158 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:11:22.158 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 16.0563ms
2025-06-10 18:11:46.580 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 145
2025-06-10 18:11:46.581 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:11:46.581 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:11:46.589 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:11:46.595 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 18:11:46.624 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p3='f479470a-c50e-410b-87e9-5a775fa47166', @p0='True', @p1='2025-06-10T16:11:46.5966070Z' (Nullable = true), @p2='123' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [IsService] = @p0, [UpdatedAt] = @p1, [PriceAmount] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-06-10 18:11:46.626 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:11:46.627 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 45.8573ms
2025-06-10 18:11:46.627 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:11:46.627 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 47.0491ms
2025-06-10 18:11:55.712 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 18:11:55.713 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:11:55.713 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:11:55.719 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:11:55.721 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:11:55.721 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 8.2885ms
2025-06-10 18:11:55.722 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:11:55.723 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 10.8146ms
2025-06-10 18:12:32.872 +02:00 [INF] Application is shutting down...
2025-06-10 18:12:35.681 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 18:12:35.930 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 18:12:35.978 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:12:35.983 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:12:35.985 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:12:35.994 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 18:12:36.015 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 18:12:36.154 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 18:12:36.154 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 18:12:36.154 +02:00 [INF] Hosting environment: Development
2025-06-10 18:12:36.154 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 18:12:44.378 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 145
2025-06-10 18:12:44.412 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:12:44.418 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:12:44.530 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:12:44.689 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 18:12:44.737 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p1='f479470a-c50e-410b-87e9-5a775fa47166', @p0='2025-06-10T16:12:44.6927600Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [UpdatedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-06-10 18:12:44.744 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:12:44.750 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 330.8253ms
2025-06-10 18:12:44.752 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:12:44.753 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 376.6526ms
2025-06-10 18:12:50.960 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 18:12:50.970 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:12:50.975 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:12:51.021 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:12:51.022 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:12:51.023 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 46.767ms
2025-06-10 18:12:51.023 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:12:51.023 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 63.3304ms
2025-06-10 18:13:09.104 +02:00 [INF] Application is shutting down...
2025-06-10 18:13:11.772 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 18:13:12.032 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 18:13:12.079 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:13:12.084 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:13:12.087 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:13:12.095 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 18:13:12.115 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 18:13:12.240 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 18:13:12.241 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 18:13:12.241 +02:00 [INF] Hosting environment: Development
2025-06-10 18:13:12.241 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 18:13:14.803 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 145
2025-06-10 18:13:14.836 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:13:14.844 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:13:14.943 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:13:14.967 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 18:13:15.002 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='f479470a-c50e-410b-87e9-5a775fa47166', @p0='2025-06-10T16:13:14.9704810Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [UpdatedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-06-10 18:13:15.009 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:13:15.015 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 170.6645ms
2025-06-10 18:13:15.017 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:13:15.019 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 217.1729ms
2025-06-10 18:13:22.773 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 18:13:22.785 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:13:22.791 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:13:22.837 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:13:22.839 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:13:22.839 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 47.1944ms
2025-06-10 18:13:22.839 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:13:22.839 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 66.5092ms
2025-06-10 18:15:10.899 +02:00 [INF] Application is shutting down...
2025-06-10 18:15:13.422 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 18:15:13.672 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 18:15:13.719 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:15:13.724 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:15:13.727 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:15:13.735 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 18:15:13.754 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 18:15:13.902 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 18:15:13.902 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 18:15:13.902 +02:00 [INF] Hosting environment: Development
2025-06-10 18:15:13.902 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 18:15:19.192 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 145
2025-06-10 18:15:19.226 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:15:19.233 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:15:19.335 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:15:19.360 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 18:15:19.418 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@p11='f479470a-c50e-410b-87e9-5a775fa47166', @p0='d9780c37-a05b-4d01-b7f6-9e8b02a36070', @p1='2025-06-09T15:36:02.2734200Z', @p2=NULL (DbType = DateTime2), @p3='My Hero Academia' (Size = 500) (DbType = AnsiString), @p4='True', @p5='False', @p6='True', @p7=NULL (DbType = DateTime2), @p8='AllForOne' (Nullable = false) (Size = 200), @p9='0', @p10='2025-06-10T16:15:19.3635720Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [BrandId] = @p0, [CreatedAt] = @p1, [DeletedAt] = @p2, [Description] = @p3, [IsActive] = @p4, [IsDeleted] = @p5, [IsService] = @p6, [LastSoldAt] = @p7, [Name] = @p8, [Status] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-06-10 18:15:19.426 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:15:19.433 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 198.7133ms
2025-06-10 18:15:19.434 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:15:19.436 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 245.1487ms
2025-06-10 18:15:25.870 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 18:15:25.880 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:15:25.886 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:15:25.933 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
WHERE [p].[Id] = @__id_0
2025-06-10 18:15:25.935 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:15:25.935 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 48.4488ms
2025-06-10 18:15:25.935 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:15:25.935 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 65.2142ms
2025-06-10 18:16:10.145 +02:00 [INF] Application is shutting down...
2025-06-10 18:16:13.350 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 18:16:13.597 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 18:16:13.650 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:16:13.655 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:16:13.657 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:16:13.665 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 18:16:13.685 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 18:16:13.826 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 18:16:13.826 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 18:16:13.826 +02:00 [INF] Hosting environment: Development
2025-06-10 18:16:13.826 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 18:16:51.888 +02:00 [INF] Application is shutting down...
2025-06-10 18:16:54.948 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-10 18:16:55.192 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
2025-06-10 18:16:55.238 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:16:55.243 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:16:55.245 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-10 18:16:55.253 +02:00 [INF] Seed data successfully inserted (if needed).
2025-06-10 18:16:55.273 +02:00 [INF] User profile is available. Using '/Users/kouumss/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-10 18:16:55.385 +02:00 [INF] Now listening on: https://localhost:7232
2025-06-10 18:16:55.385 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-10 18:16:55.385 +02:00 [INF] Hosting environment: Development
2025-06-10 18:16:55.385 +02:00 [INF] Content root path: /Users/kouumss/Desktop/Projects/PulseERP/PulseERP.API
2025-06-10 18:16:58.942 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - application/json 145
2025-06-10 18:16:58.976 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:16:58.982 +02:00 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] Update(System.Guid, PulseERP.Abstractions.Common.DTOs.Products.Commands.UpdateProductCommand) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:16:59.112 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-10 18:16:59.138 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='allmight' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__normalized_0
2025-06-10 18:16:59.177 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='f479470a-c50e-410b-87e9-5a775fa47166', @p0='2025-06-10T16:16:59.1384890Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [UpdatedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-06-10 18:16:59.183 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:16:59.190 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Update (PulseERP.API) in 206.9115ms
2025-06-10 18:16:59.191 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Update (PulseERP.API)'
2025-06-10 18:16:59.193 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 252.4979ms
2025-06-10 18:17:04.080 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - null null
2025-06-10 18:17:04.092 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:17:04.098 +02:00 [INF] Route matched with {action = "GetById", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Contracts.ApiResponse`1[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails]]] GetById(System.Guid) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-06-10 18:17:04.138 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='f479470a-c50e-410b-87e9-5a775fa47166'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[BrandId], [p].[CreatedAt], [p].[DeletedAt], [p].[Description], [p].[IsActive], [p].[IsDeleted], [p].[IsService], [p].[LastSoldAt], [p].[Name], [p].[Status], [p].[UpdatedAt], [p].[PriceAmount], [p].[PriceCurrency], [i].[Id], [i].[CreatedAt], [i].[DeletedAt], [i].[IsActive], [i].[IsDeleted], [i].[ProductId], [i].[Quantity], [i].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[DeletedAt], [b].[IsActive], [b].[IsDeleted], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
LEFT JOIN [Inventories] AS [i] ON [p].[Id] = [i].[ProductId]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [p].[Id] = @__id_0
2025-06-10 18:17:04.140 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Contracts.ApiResponse`1[[PulseERP.Abstractions.Common.DTOs.Products.Models.ProductDetails, PulseERP.Abstractions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-10 18:17:04.140 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API) in 41.9317ms
2025-06-10 18:17:04.140 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetById (PulseERP.API)'
2025-06-10 18:17:04.141 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products/f479470a-c50e-410b-87e9-5a775fa47166 - 200 null application/json; charset=utf-8 60.0461ms
2025-06-10 18:19:57.422 +02:00 [INF] Application is shutting down...
