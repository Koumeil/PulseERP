2025-05-28 00:00:23.209 +02:00 [INF] Application is shutting down...
2025-05-28 00:00:58.864 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 00:01:00.034 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 00:01:00.047 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 00:01:00.057 +02:00 [INF] Hosting environment: Development
2025-05-28 00:01:00.067 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 00:01:04.065 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 00:01:04.375 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 320.0782ms
2025-05-28 00:01:05.064 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 00:01:05.648 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 586.8944ms
2025-05-28 00:01:10.694 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 00:01:10.745 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:01:10.804 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Contracts.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 00:01:12.715 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 00:01:14.334 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 00:01:14.405 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 00:01:14.406 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 00:01:14.631 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 00:01:14.696 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
System.ArgumentException: Phone number cannot be empty or whitespace. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 15
   at lambda_method43(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Phone number cannot be empty or whitespace. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 15
   at lambda_method43(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-28 00:01:14.735 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 3909.6681ms
2025-05-28 00:01:14.739 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:01:14.748 +02:00 [ERR] Exception caught in middleware
System.ArgumentException: Phone number cannot be empty or whitespace. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 15
   at lambda_method43(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.GetAllAsync(PaginationParams paginationParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 25
   at PulseERP.Application.Services.UserService.GetAllAsync(PaginationParams paginationParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 31
   at PulseERP.API.Controllers.UsersController.GetAll(PaginationParams paginationParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 25
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 00:01:14.788 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTD7SM6G4P:00000005)
2025-05-28 00:01:14.934 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 500 null application/json 4240.1944ms
2025-05-28 00:03:57.498 +02:00 [INF] Application is shutting down...
2025-05-28 00:04:26.058 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 00:04:26.943 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 00:04:26.950 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 00:04:26.952 +02:00 [INF] Hosting environment: Development
2025-05-28 00:04:26.952 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 00:04:31.386 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 00:04:31.676 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 292.6988ms
2025-05-28 00:04:32.046 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 00:04:32.383 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 338.4829ms
2025-05-28 00:04:36.635 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 00:04:36.697 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:04:36.751 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Contracts.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 00:04:39.242 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 00:04:40.737 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 00:04:40.818 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 00:04:40.819 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 00:04:40.934 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 00:04:40.970 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
System.ArgumentException: Phone number cannot be empty or whitespace. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 15
   at lambda_method43(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Phone number cannot be empty or whitespace. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 15
   at lambda_method43(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-28 00:04:40.990 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 4228.3634ms
2025-05-28 00:04:40.992 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:04:40.998 +02:00 [ERR] Exception caught in middleware
System.ArgumentException: Phone number cannot be empty or whitespace. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 15
   at lambda_method43(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.GetAllAsync(PaginationParams paginationParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 25
   at PulseERP.Application.Services.UserService.GetAllAsync(PaginationParams paginationParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 31
   at PulseERP.API.Controllers.UsersController.GetAll(PaginationParams paginationParams) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 25
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 00:04:41.021 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTD9QGR84L:00000005)
2025-05-28 00:04:41.121 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 500 null application/json 4486.2766ms
2025-05-28 00:10:09.765 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 00:10:09.791 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:10:09.794 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Contracts.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 00:10:09.856 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 00:10:09.866 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 00:10:09.916 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Contracts.Dtos.Users.UserDto, PulseERP.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 00:10:09.946 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 151.1905ms
2025-05-28 00:10:09.947 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:10:09.947 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 183.3142ms
2025-05-28 00:10:39.184 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 105
2025-05-28 00:10:39.192 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 00:10:39.200 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Contracts.Dtos.Users.UserDto]]] Create(PulseERP.Contracts.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 00:10:39.488 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-28 00:10:39.508 +02:00 [INF] Created user "8846284e-982e-44a0-b421-b1f55d8ac408"
2025-05-28 00:10:39.513 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Contracts.Dtos.Users.UserDto, PulseERP.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 00:10:39.542 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 342.2485ms
2025-05-28 00:10:39.543 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 00:10:39.543 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 201 null application/json; charset=utf-8 358.8058ms
2025-05-28 00:10:49.456 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 00:10:49.456 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:10:49.457 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Contracts.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 00:10:49.461 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 00:10:49.465 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 00:10:49.466 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Contracts.Dtos.Users.UserDto, PulseERP.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 00:10:49.468 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 11.1209ms
2025-05-28 00:10:49.468 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:10:49.469 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 13.1832ms
2025-05-28 00:11:07.645 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/8846284e-982e-44a0-b421-b1f55d8ac408 - null null
2025-05-28 00:11:07.646 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-05-28 00:11:07.652 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Contracts.Dtos.Users.UserDto]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 00:11:07.704 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 00:11:07.706 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Contracts.Dtos.Users.UserDto, PulseERP.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 00:11:07.706 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 54.2873ms
2025-05-28 00:11:07.706 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-05-28 00:11:07.707 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/8846284e-982e-44a0-b421-b1f55d8ac408 - 200 null application/json; charset=utf-8 61.2946ms
2025-05-28 00:11:25.353 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/Customers - null null
2025-05-28 00:11:25.353 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.CustomersController.GetAll (PulseERP.API)'
2025-05-28 00:11:25.373 +02:00 [INF] Route matched with {action = "GetAll", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Contracts.Dtos.Customers.CustomerDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.CustomersController (PulseERP.API).
2025-05-28 00:11:25.388 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Customers] AS [c]
2025-05-28 00:11:25.394 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 00:11:25.394 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 00:11:25.420 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Email], [c].[FirstName], [c].[IsActive], [c].[LastName], [c].[Phone], [c].[UpdatedAt], [c].[City], [c].[Country], [c].[Street], [c].[PostalCode]
FROM [Customers] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 00:11:25.424 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Contracts.Dtos.Customers.CustomerDto, PulseERP.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 00:11:25.428 +02:00 [INF] Executed action PulseERP.API.Controllers.CustomersController.GetAll (PulseERP.API) in 54.8301ms
2025-05-28 00:11:25.428 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.CustomersController.GetAll (PulseERP.API)'
2025-05-28 00:11:25.428 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/Customers - 200 null application/json; charset=utf-8 75.4042ms
2025-05-28 00:12:24.642 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/Customers - application/json 207
2025-05-28 00:12:24.644 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.CustomersController.Create (PulseERP.API)'
2025-05-28 00:12:24.652 +02:00 [INF] Route matched with {action = "Create", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Contracts.Dtos.Customers.CustomerDto]]] Create(PulseERP.Contracts.Dtos.Customers.CreateCustomerRequest) on controller PulseERP.API.Controllers.CustomersController (PulseERP.API).
2025-05-28 00:12:24.731 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Customers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt], [City], [Country], [Street], [PostalCode])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-05-28 00:12:24.735 +02:00 [INF] Customer added: 74b34cdc-7ccf-4e49-b844-3f467a4f62e0
2025-05-28 00:12:24.735 +02:00 [INF] Created new customer with Id "74b34cdc-7ccf-4e49-b844-3f467a4f62e0"
2025-05-28 00:12:24.738 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Contracts.Dtos.Customers.CustomerDto, PulseERP.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 00:12:24.745 +02:00 [INF] Executed action PulseERP.API.Controllers.CustomersController.Create (PulseERP.API) in 91.9628ms
2025-05-28 00:12:24.745 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.CustomersController.Create (PulseERP.API)'
2025-05-28 00:12:24.745 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/Customers - 201 null application/json; charset=utf-8 103.5712ms
2025-05-28 00:13:45.649 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 00:13:45.664 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:13:45.669 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Contracts.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 00:13:45.687 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 00:13:45.694 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 00:13:45.696 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Contracts.Dtos.Users.UserDto, PulseERP.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 00:13:45.696 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 27.0685ms
2025-05-28 00:13:45.697 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 00:13:45.697 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 48.7361ms
2025-05-28 00:50:13.868 +02:00 [INF] Application is shutting down...
2025-05-28 02:09:58.647 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 02:09:59.475 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 02:09:59.480 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 02:09:59.482 +02:00 [INF] Hosting environment: Development
2025-05-28 02:09:59.483 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 02:10:05.798 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 02:10:05.965 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 170.106ms
2025-05-28 02:10:06.839 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 02:10:07.132 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 293.6817ms
2025-05-28 02:10:44.009 +02:00 [INF] Application is shutting down...
2025-05-28 02:10:58.984 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 02:10:59.660 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 02:10:59.663 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 02:10:59.664 +02:00 [INF] Hosting environment: Development
2025-05-28 02:10:59.664 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 02:11:35.539 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 02:11:35.781 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 241.7612ms
2025-05-28 02:11:36.221 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 02:11:36.675 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 455.2744ms
2025-05-28 02:11:45.994 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 02:11:46.026 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:11:46.053 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:11:47.465 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 02:11:48.791 +02:00 [INF] Executed DbCommand (384ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:11:48.882 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 02:11:49.505 +02:00 [ERR] Failed executing DbCommand (145ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 02:11:49.547 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PhoneNumber', table 'PulseERP.dbo.AspNetUsers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:aed03436-3a41-4782-89c2-fdf54011dde5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PhoneNumber', table 'PulseERP.dbo.AspNetUsers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:aed03436-3a41-4782-89c2-fdf54011dde5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-28 02:11:49.563 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 3503.9192ms
2025-05-28 02:11:49.565 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:11:49.570 +02:00 [ERR] Exception caught in middleware
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PhoneNumber', table 'PulseERP.dbo.AspNetUsers'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:aed03436-3a41-4782-89c2-fdf54011dde5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.CreateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 72
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:11:49.622 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTFGQN1239:00000005)
2025-05-28 02:11:49.686 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 3691.724ms
2025-05-28 02:16:14.540 +02:00 [INF] Application is shutting down...
2025-05-28 02:16:31.566 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 02:16:32.193 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 02:16:32.199 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 02:16:32.200 +02:00 [INF] Hosting environment: Development
2025-05-28 02:16:32.200 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 02:16:41.012 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 02:16:41.191 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 180.4245ms
2025-05-28 02:16:41.428 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 02:16:41.669 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 242.6605ms
2025-05-28 02:16:49.897 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 02:16:49.940 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:16:49.991 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:16:51.855 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 02:16:53.116 +02:00 [INF] Executed DbCommand (108ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:16:53.215 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 02:16:53.578 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 02:16:53.643 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 3645.4366ms
2025-05-28 02:16:53.644 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:16:53.648 +02:00 [ERR] Exception caught in middleware
System.ArgumentNullException: Value cannot be null. (Parameter 'address')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.ArgumentException.ThrowNullOrEmptyException(String argument, String paramName)
   at System.ArgumentException.ThrowIfNullOrEmpty(String argument, String paramName)
   at System.Net.Mail.MailAddress.TryParse(String address, String displayName, Encoding displayNameEncoding, ValueTuple`4& parsedData, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddress..ctor(String address, String displayName)
   at PulseERP.Application.Services.SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 29
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 102
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:16:53.680 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTFJLO5923:00000005)
2025-05-28 02:16:53.726 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 3829.1167ms
2025-05-28 02:25:35.350 +02:00 [INF] Application is shutting down...
2025-05-28 02:25:45.826 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 02:25:46.316 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 02:25:46.325 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 02:25:46.329 +02:00 [INF] Hosting environment: Development
2025-05-28 02:25:46.329 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 02:25:52.053 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 02:25:52.116 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:25:52.139 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:25:53.441 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 02:25:54.402 +02:00 [INF] Executed DbCommand (104ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:25:54.545 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 2401.2015ms
2025-05-28 02:25:54.555 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:25:54.562 +02:00 [ERR] Exception caught in middleware
PulseERP.Application.Exceptions.ValidationException: One or more validation failures have occurred.
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 47
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:25:54.594 +02:00 [WRN] Client error 400 [bad_request] - Validation Error
2025-05-28 02:25:54.652 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 400 null application/json 2600.8995ms
2025-05-28 02:27:08.898 +02:00 [INF] Application is shutting down...
2025-05-28 02:27:18.338 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 02:27:18.858 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 02:27:18.861 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 02:27:18.862 +02:00 [INF] Hosting environment: Development
2025-05-28 02:27:18.862 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 02:27:22.859 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 02:27:22.945 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:27:22.985 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:27:24.481 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 02:27:25.558 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:27:25.799 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 2809.3339ms
2025-05-28 02:27:25.806 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:27:25.810 +02:00 [ERR] Exception caught in middleware
PulseERP.Application.Exceptions.ValidationException: One or more validation failures have occurred.
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 47
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:27:25.836 +02:00 [WRN] Client error 400 [bad_request] - Validation Error
2025-05-28 02:27:25.904 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 400 null application/json 3047.6793ms
2025-05-28 02:27:31.539 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 02:27:31.543 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:27:31.543 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:27:31.636 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:27:31.638 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 94.5812ms
2025-05-28 02:27:31.639 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:27:31.639 +02:00 [ERR] Exception caught in middleware
PulseERP.Application.Exceptions.ValidationException: One or more validation failures have occurred.
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 47
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:27:31.642 +02:00 [WRN] Client error 400 [bad_request] - Validation Error
2025-05-28 02:27:31.643 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 400 null application/json 105.1018ms
2025-05-28 02:30:35.833 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 02:30:35.843 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:30:35.844 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:30:35.884 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:30:35.900 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 55.8423ms
2025-05-28 02:30:35.901 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:30:35.901 +02:00 [ERR] Exception caught in middleware
PulseERP.Application.Exceptions.ValidationException: One or more validation failures have occurred.
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 70
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:30:35.904 +02:00 [WRN] Client error 400 [bad_request] - Validation Error
2025-05-28 02:30:35.905 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 400 null application/json 72.2339ms
2025-05-28 02:30:54.404 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 111
2025-05-28 02:30:54.406 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:30:54.407 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:30:54.413 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:30:54.415 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 7.8749ms
2025-05-28 02:30:54.415 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:30:54.416 +02:00 [ERR] Exception caught in middleware
PulseERP.Application.Exceptions.ValidationException: One or more validation failures have occurred.
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 70
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:30:54.422 +02:00 [WRN] Client error 400 [bad_request] - Validation Error
2025-05-28 02:30:54.423 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 400 null application/json 18.6492ms
2025-05-28 02:32:37.423 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 111
2025-05-28 02:32:37.429 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:32:37.431 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:32:37.453 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:32:37.455 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 24.2979ms
2025-05-28 02:32:37.456 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:32:37.456 +02:00 [ERR] Exception caught in middleware
PulseERP.Application.Exceptions.ValidationException: One or more validation failures have occurred.
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 70
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:32:37.460 +02:00 [WRN] Client error 400 [bad_request] - Validation Error
2025-05-28 02:32:37.461 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 400 null application/json 38.745ms
2025-05-28 02:32:43.381 +02:00 [INF] Application is shutting down...
2025-05-28 02:32:54.363 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 02:32:54.815 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 02:32:54.819 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 02:32:54.820 +02:00 [INF] Hosting environment: Development
2025-05-28 02:32:54.820 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 02:34:16.268 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 02:34:16.322 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:34:16.341 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:34:17.332 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 02:34:18.119 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:34:18.175 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 02:34:18.443 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 02:34:18.485 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 2140.7133ms
2025-05-28 02:34:18.489 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:34:18.493 +02:00 [ERR] Exception caught in middleware
System.ArgumentNullException: Value cannot be null. (Parameter 'address')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.ArgumentException.ThrowNullOrEmptyException(String argument, String paramName)
   at System.ArgumentException.ThrowIfNullOrEmpty(String argument, String paramName)
   at System.Net.Mail.MailAddress.TryParse(String address, String displayName, Encoding displayNameEncoding, ValueTuple`4& parsedData, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddress..ctor(String address, String displayName)
   at PulseERP.Application.Services.SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 29
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 102
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:34:18.510 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTFTG816G5:00000001)
2025-05-28 02:34:18.547 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 2280.6239ms
2025-05-28 02:41:22.154 +02:00 [INF] Application is shutting down...
2025-05-28 02:41:34.294 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 02:41:34.709 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 02:41:34.712 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 02:41:34.713 +02:00 [INF] Hosting environment: Development
2025-05-28 02:41:34.713 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 02:42:41.522 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 02:42:41.636 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 115.8722ms
2025-05-28 02:42:42.127 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 02:42:42.417 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 290.3792ms
2025-05-28 02:42:49.027 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 02:42:49.080 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 02:42:49.109 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:42:50.237 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 02:42:50.997 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 02:42:51.050 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 02:42:51.051 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 02:42:51.157 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 02:42:51.203 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 02:42:51.251 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 2137.1659ms
2025-05-28 02:42:51.252 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 02:42:51.266 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 2239.1768ms
2025-05-28 02:43:35.550 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 113
2025-05-28 02:43:35.573 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:43:35.579 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 02:43:35.673 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 02:43:35.697 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 02:43:35.964 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 02:43:36.007 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 427.6959ms
2025-05-28 02:43:36.008 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:43:36.009 +02:00 [ERR] Exception caught in middleware
System.ArgumentNullException: Value cannot be null. (Parameter 'address')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.ArgumentException.ThrowNullOrEmptyException(String argument, String paramName)
   at System.ArgumentException.ThrowIfNullOrEmpty(String argument, String paramName)
   at System.Net.Mail.MailAddress.TryParse(String address, String displayName, Encoding displayNameEncoding, ValueTuple`4& parsedData, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddress..ctor(String address, String displayName)
   at PulseERP.Application.Services.SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 29
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 97
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method51(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 02:43:36.031 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTG26Q7Q5L:00000007)
2025-05-28 02:43:36.044 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 493.5474ms
2025-05-28 02:44:05.595 +02:00 [INF] Application is shutting down...
2025-05-28 02:53:33.370 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 02:53:34.069 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 02:53:34.073 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 02:53:34.074 +02:00 [INF] Hosting environment: Development
2025-05-28 02:53:34.074 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 02:54:13.009 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 112
2025-05-28 02:54:13.082 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 02:54:13.109 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 03:03:22.719 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 03:03:23.484 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 03:03:23.488 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 03:03:23.488 +02:00 [INF] Hosting environment: Development
2025-05-28 03:03:23.489 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 03:03:26.749 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 112
2025-05-28 03:03:26.817 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:03:26.841 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 03:03:51.111 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 03:03:52.101 +02:00 [ERR] An error occurred using the connection to database '' on server ''.
2025-05-28 03:03:52.118 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-28 03:08:20.754 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 03:08:21.494 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 03:08:21.497 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 03:08:21.497 +02:00 [INF] Hosting environment: Development
2025-05-28 03:08:21.498 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 03:08:38.366 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 104
2025-05-28 03:08:38.437 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:08:38.459 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 03:09:01.348 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 03:09:02.753 +02:00 [INF] Executed DbCommand (95ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 03:10:09.337 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 03:10:09.772 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 03:10:14.842 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 96378.494ms
2025-05-28 03:10:14.852 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:10:15.098 +02:00 [ERR] Exception caught in middleware
System.ArgumentNullException: Value cannot be null. (Parameter 'address')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.ArgumentException.ThrowNullOrEmptyException(String argument, String paramName)
   at System.ArgumentException.ThrowIfNullOrEmpty(String argument, String paramName)
   at System.Net.Mail.MailAddress.TryParse(String address, String displayName, Encoding displayNameEncoding, ValueTuple`4& parsedData, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddress..ctor(String address, String displayName)
   at PulseERP.Application.Services.SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 29
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 97
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 03:10:15.127 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTGGMPCPK3:00000001)
2025-05-28 03:10:15.200 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 96838.0244ms
2025-05-28 03:10:46.200 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 03:10:47.064 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 03:10:47.068 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 03:10:47.069 +02:00 [INF] Hosting environment: Development
2025-05-28 03:10:47.069 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 03:10:47.943 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 104
2025-05-28 03:10:48.098 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:10:48.130 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 03:11:04.726 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 03:11:06.108 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 03:11:19.075 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 30927.6565ms
2025-05-28 03:11:19.096 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:11:25.521 +02:00 [ERR] Exception caught in middleware
PulseERP.Application.Exceptions.ValidationException: One or more validation failures have occurred.
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 46
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 03:11:25.528 +02:00 [WRN] Client error 400 [bad_request] - Validation Error
2025-05-28 03:11:28.770 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 400 null application/json 40834.9486ms
2025-05-28 03:11:48.091 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 106
2025-05-28 03:11:52.868 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:11:52.869 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 03:12:10.972 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 03:14:30.262 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 03:14:31.233 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 03:14:31.238 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 03:14:31.239 +02:00 [INF] Hosting environment: Development
2025-05-28 03:14:31.239 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 03:14:36.164 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 106
2025-05-28 03:14:36.277 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:14:36.329 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 03:14:48.346 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 03:14:50.239 +02:00 [INF] Executed DbCommand (125ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 03:14:50.340 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 03:14:50.845 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 03:20:04.121 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 03:20:05.202 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 03:20:05.208 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 03:20:05.209 +02:00 [INF] Hosting environment: Development
2025-05-28 03:20:05.209 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 03:20:17.329 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 106
2025-05-28 03:20:17.515 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:20:17.584 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 03:20:36.490 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 03:20:38.524 +02:00 [INF] Executed DbCommand (142ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 03:20:49.607 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 03:20:50.134 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 03:23:55.602 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 218008.6017ms
2025-05-28 03:23:55.624 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:24:03.697 +02:00 [ERR] Exception caught in middleware
System.ArgumentException: The value cannot be an empty string. (Parameter 'address')
   at System.ArgumentException.ThrowNullOrEmptyException(String argument, String paramName)
   at System.ArgumentException.ThrowIfNullOrEmpty(String argument, String paramName)
   at System.Net.Mail.MailAddress.TryParse(String address, String displayName, Encoding displayNameEncoding, ValueTuple`4& parsedData, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddress..ctor(String address, String displayName)
   at PulseERP.Application.Services.SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 29
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 98
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 03:24:03.708 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTGN6V19JF:00000001)
2025-05-28 03:24:06.705 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 229388.091ms
2025-05-28 03:28:20.543 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 03:28:21.668 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 03:28:21.675 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 03:28:21.676 +02:00 [INF] Hosting environment: Development
2025-05-28 03:28:21.676 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 03:28:34.190 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 106
2025-05-28 03:28:34.364 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 03:28:34.413 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 03:28:50.002 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 03:28:52.501 +02:00 [INF] Executed DbCommand (180ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 03:29:01.015 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 03:29:01.621 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 04:14:13.286 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 04:14:13.904 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 04:14:13.907 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 04:14:13.908 +02:00 [INF] Hosting environment: Development
2025-05-28 04:14:13.908 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 04:14:23.378 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 106
2025-05-28 04:14:23.460 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 04:14:23.491 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 04:14:37.312 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 04:14:38.954 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 04:14:48.460 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 04:14:48.976 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 04:22:57.840 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 04:22:58.402 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 04:22:58.405 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 04:22:58.406 +02:00 [INF] Hosting environment: Development
2025-05-28 04:22:58.406 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 04:23:11.978 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 106
2025-05-28 04:23:12.052 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 04:23:12.080 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 04:23:20.080 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 04:23:21.598 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 04:23:21.689 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 04:23:22.028 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 04:24:39.306 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 04:24:39.892 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 04:24:39.898 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 04:24:39.898 +02:00 [INF] Hosting environment: Development
2025-05-28 04:24:39.899 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 04:25:10.554 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 04:25:10.636 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 04:25:10.663 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 04:25:31.855 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 04:25:33.127 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 04:25:38.906 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 04:25:39.493 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 04:26:18.813 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 68142.1579ms
2025-05-28 04:26:18.826 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 04:26:25.630 +02:00 [ERR] Exception caught in middleware
System.Net.Mail.SmtpException: The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.0 Authentication Required. For more information, go to
   at System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response)
   at System.Net.Mail.MailCommand.EndSend(IAsyncResult result)
   at System.Net.Mail.SendMailAsyncResult.SendMailFromCompleted(IAsyncResult result)
--- End of stack trace from previous location ---
   at System.Net.Mail.SendMailAsyncResult.End(IAsyncResult result)
   at System.Net.Mail.SmtpClient.SendMailCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at PulseERP.Application.Services.SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 39
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 98
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 04:26:36.693 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTHRFBQ37B:00000001)
2025-05-28 04:26:51.872 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 101324.1185ms
2025-05-28 04:31:04.450 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 04:31:05.130 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 04:31:05.134 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 04:31:05.135 +02:00 [INF] Hosting environment: Development
2025-05-28 04:31:05.136 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 04:31:25.807 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 04:31:25.870 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 04:31:25.896 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 04:31:27.139 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 04:31:28.031 +02:00 [INF] Executed DbCommand (82ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 04:31:28.104 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 04:31:28.376 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 04:31:28.722 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 2820.035ms
2025-05-28 04:31:28.731 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 04:31:28.737 +02:00 [ERR] Exception caught in middleware
System.Net.Mail.SmtpException: The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.0 Authentication Required. For more information, go to
   at System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response)
   at System.Net.Mail.MailCommand.EndSend(IAsyncResult result)
   at System.Net.Mail.SendMailAsyncResult.SendMailFromCompleted(IAsyncResult result)
--- End of stack trace from previous location ---
   at System.Net.Mail.SendMailAsyncResult.End(IAsyncResult result)
   at System.Net.Mail.SmtpClient.SendMailCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at PulseERP.Application.Services.SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 39
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 98
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 04:31:28.765 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTHUV6TRA1:00000001)
2025-05-28 04:31:28.822 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 3017.0182ms
2025-05-28 04:32:15.605 +02:00 [INF] Application is shutting down...
2025-05-28 04:37:04.768 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 04:37:05.156 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 04:37:05.159 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 04:37:05.160 +02:00 [INF] Hosting environment: Development
2025-05-28 04:37:05.160 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 04:37:07.338 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 04:37:07.476 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 140.1011ms
2025-05-28 04:37:07.811 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 04:37:08.017 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 207.3422ms
2025-05-28 04:37:17.703 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 124
2025-05-28 04:37:17.722 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 04:37:17.744 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 04:37:18.780 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 04:37:19.731 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 04:37:19.808 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 04:37:20.124 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 04:37:20.483 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 2732.0264ms
2025-05-28 04:37:20.484 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 04:37:20.490 +02:00 [ERR] Exception caught in middleware
System.Net.Mail.SmtpException: The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.0 Authentication Required. For more information, go to
   at System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response)
   at System.Net.Mail.MailCommand.EndSend(IAsyncResult result)
   at System.Net.Mail.SendMailAsyncResult.SendMailFromCompleted(IAsyncResult result)
--- End of stack trace from previous location ---
   at System.Net.Mail.SendMailAsyncResult.End(IAsyncResult result)
   at System.Net.Mail.SmtpClient.SendMailCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at PulseERP.Application.Services.SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 39
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 98
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 04:37:20.523 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTI24VULCB:00000005)
2025-05-28 04:37:20.577 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 2874.3986ms
2025-05-28 05:09:12.536 +02:00 [INF] Application is shutting down...
2025-05-28 13:33:29.114 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 13:33:29.924 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 13:33:29.930 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 13:33:29.931 +02:00 [INF] Hosting environment: Development
2025-05-28 13:33:29.932 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 13:33:40.324 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 13:33:40.630 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 308.7297ms
2025-05-28 13:33:47.707 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 13:33:47.736 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 13:33:47.761 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 13:33:49.258 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 13:33:50.424 +02:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 13:33:50.504 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 13:33:50.506 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 13:33:50.638 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 13:33:50.679 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 13:33:50.756 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 2989.3008ms
2025-05-28 13:33:50.756 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 13:33:50.774 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 3067.8156ms
2025-05-28 13:34:37.679 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 108
2025-05-28 13:34:37.685 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 13:34:37.694 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 13:34:37.857 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 13:34:37.909 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 13:34:38.213 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 13:34:39.010 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 1316.0763ms
2025-05-28 13:34:39.012 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 13:34:39.017 +02:00 [ERR] Exception caught in middleware
MailKit.Security.AuthenticationException: 535: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-44fcd135f6bsm35495945e9.3 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Username and Password not accepted. For more information, go to
5.7.8  https://support.google.com/mail/?p=BadCredentials 5b1f17b1804b1-44fcd135f6bsm35495945e9.3 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, Boolean doAsync, CancellationToken cancellationToken)
   at SmtpEmailService.SendEmailAsync(String toEmail, String subject, String body) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/SmtpEmailService.cs:line 33
   at PulseERP.Infrastructure.Identity.Service.AuthService.RegisterAsync(RegisterRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/AuthService.cs:line 98
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 58
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method49(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 13:34:39.054 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTRDV7FKUN:00000005)
2025-05-28 13:34:39.088 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 1409.6366ms
2025-05-28 13:37:30.136 +02:00 [INF] Application is shutting down...
2025-05-28 13:44:13.933 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 13:44:14.427 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 13:44:14.431 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 13:44:14.432 +02:00 [INF] Hosting environment: Development
2025-05-28 13:44:14.432 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 13:44:49.132 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 13:44:49.256 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 125.6021ms
2025-05-28 13:44:49.564 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 13:44:49.744 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 182.2554ms
2025-05-28 13:44:55.792 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 108
2025-05-28 13:44:55.827 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 13:44:55.854 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 13:44:56.905 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 13:44:57.669 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 13:44:57.721 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 13:44:57.970 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 13:44:59.592 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-28 13:44:59.699 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [Expires], [ReplacedByToken], [Revoked], [Token], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-28 13:44:59.701 +02:00 [INF] Invitation email sent to gmxfreakx@gmail.com
2025-05-28 13:44:59.716 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 3857.6988ms
2025-05-28 13:44:59.716 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 13:44:59.718 +02:00 [ERR] Exception caught in middleware
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
AuthResponse -> UserDto
PulseERP.Shared.Dtos.Auth.AuthResponse -> PulseERP.Shared.Dtos.Users.UserDto
   at lambda_method394(Closure, Object, UserDto, ResolutionContext)
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 62
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 13:44:59.737 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTRK6I9BJF:00000005)
2025-05-28 13:44:59.764 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 3972.1805ms
2025-05-28 14:42:24.582 +02:00 [INF] Application is shutting down...
2025-05-28 14:43:19.056 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 14:43:20.726 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 14:43:20.739 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 14:43:20.741 +02:00 [INF] Hosting environment: Development
2025-05-28 14:43:20.742 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 14:43:48.048 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 108
2025-05-28 14:43:48.105 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 14:43:48.129 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 14:43:49.409 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 14:43:50.384 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 14:43:50.443 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 14:43:50.774 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 14:43:52.276 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-28 14:43:52.370 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [Expires], [ReplacedByToken], [Revoked], [Token], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-28 14:43:52.372 +02:00 [INF] Invitation email sent to gmxfreakx@gmail.com
2025-05-28 14:43:52.389 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 4255.2423ms
2025-05-28 14:43:52.396 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 14:43:52.400 +02:00 [ERR] Exception caught in middleware
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
AuthResponse -> UserDto
PulseERP.Shared.Dtos.Auth.AuthResponse -> PulseERP.Shared.Dtos.Users.UserDto
   at lambda_method395(Closure, Object, UserDto, ResolutionContext)
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 62
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 55
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 14:43:52.423 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCTSL5800RF:00000001)
2025-05-28 14:43:52.472 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 4425.6385ms
2025-05-28 14:49:46.299 +02:00 [INF] Application is shutting down...
2025-05-28 14:50:13.215 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 14:50:14.018 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 14:50:14.023 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 14:50:14.024 +02:00 [INF] Hosting environment: Development
2025-05-28 14:50:14.024 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 14:50:21.034 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 108
2025-05-28 14:50:21.278 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 14:50:21.577 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 14:50:24.378 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 14:50:26.317 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 14:50:26.430 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 14:50:26.986 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [IsActive], [LastName], [Phone], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-05-28 14:50:28.495 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-28 14:50:28.643 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [Expires], [ReplacedByToken], [Revoked], [Token], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-28 14:50:28.647 +02:00 [INF] Invitation email sent to gmxfreakx@gmail.com
2025-05-28 14:50:28.679 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 14:50:28.779 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 7192.6815ms
2025-05-28 14:50:28.787 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 14:50:28.812 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 201 null application/json; charset=utf-8 7781.6516ms
2025-05-28 15:32:54.771 +02:00 [INF] Application is shutting down...
2025-05-28 18:32:03.560 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 18:32:04.191 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 18:32:04.195 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 18:32:04.197 +02:00 [INF] Hosting environment: Development
2025-05-28 18:32:04.197 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 18:32:20.926 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 18:32:21.087 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 164.886ms
2025-05-28 18:32:21.732 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 18:32:22.002 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 271.2095ms
2025-05-28 18:32:27.065 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-05-28 18:32:27.108 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 18:32:27.152 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Products.ProductDto]]]] GetAll(PulseERP.Domain.Query.Products.ProductParams) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:32:28.200 +02:00 [WRN] The property 'ApplicationUser.Email' was first mapped explicitly and then ignored. Consider not mapping the property in the first place.
2025-05-28 18:32:28.547 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 18:32:29.541 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-05-28 18:32:29.805 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[BrandId1], [p0].[CreatedAt], [p0].[Description], [p0].[IsActive], [p0].[IsService], [p0].[Name], [p0].[Price], [p0].[Quantity], [p0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Name], [b].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
ORDER BY [p0].[Name]
2025-05-28 18:32:29.839 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:32:29.899 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API) in 2741.658ms
2025-05-28 18:32:29.900 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 18:32:29.912 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 2847.4978ms
2025-05-28 18:33:16.618 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 163
2025-05-28 18:33:16.626 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:33:16.641 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:33:17.075 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:33:17.181 +02:00 [INF] Created product "1be7307e-c29c-4f45-9dcf-29f3d5350a4a"
2025-05-28 18:33:17.194 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:33:17.264 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 622.6579ms
2025-05-28 18:33:17.264 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:33:17.265 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 647.6032ms
2025-05-28 18:34:03.105 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 205
2025-05-28 18:34:03.117 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:03.118 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:34:03.261 +02:00 [ERR] Failed executing DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:34:03.303 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7b353dd7-2d98-47d3-875a-3f18b98e85b7
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7b353dd7-2d98-47d3-875a-3f18b98e85b7
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-28 18:34:03.306 +02:00 [ERR] Error adding product 9836d332-90bc-4a61-9a1a-f63d601ae0fd
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7b353dd7-2d98-47d3-875a-3f18b98e85b7
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
2025-05-28 18:34:03.314 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 195.6333ms
2025-05-28 18:34:03.314 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:03.317 +02:00 [ERR] Exception caught in middleware
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7b353dd7-2d98-47d3-875a-3f18b98e85b7
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 63
   at PulseERP.API.Controllers.ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:34:03.360 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0KRVCTAR:00000009)
2025-05-28 18:34:03.397 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/json 291.8337ms
2025-05-28 18:34:09.099 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 197
2025-05-28 18:34:09.100 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:09.100 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:34:09.108 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:34:09.119 +02:00 [INF] Created product "09f99b39-b727-40fa-b6e2-b4e9d3fd53e1"
2025-05-28 18:34:09.120 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:34:09.121 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 21.1018ms
2025-05-28 18:34:09.122 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:09.122 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 23.1592ms
2025-05-28 18:34:16.068 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 255
2025-05-28 18:34:16.068 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:16.068 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:34:16.079 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 9.8642ms
2025-05-28 18:34:16.079 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:16.080 +02:00 [ERR] Exception caught in middleware
System.NullReferenceException: Object reference not set to an instance of an object.
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 53
   at PulseERP.API.Controllers.ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:34:16.082 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0KRVCTAR:0000000D)
2025-05-28 18:34:16.083 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/json 15.1629ms
2025-05-28 18:34:21.981 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 204
2025-05-28 18:34:21.982 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:21.982 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:34:21.990 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:34:21.998 +02:00 [INF] Created product "ed7354b8-a0f1-43ed-ac72-0915671c127c"
2025-05-28 18:34:21.999 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:34:21.999 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 16.8199ms
2025-05-28 18:34:21.999 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:22.000 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 18.7663ms
2025-05-28 18:34:30.457 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 197
2025-05-28 18:34:30.458 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:30.458 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:34:30.471 +02:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:34:30.477 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7b353dd7-2d98-47d3-875a-3f18b98e85b7
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7b353dd7-2d98-47d3-875a-3f18b98e85b7
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-28 18:34:30.480 +02:00 [ERR] Error adding product d4dc9af6-1de7-45ba-95b7-b102d135cb68
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7b353dd7-2d98-47d3-875a-3f18b98e85b7
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
2025-05-28 18:34:30.484 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 25.3115ms
2025-05-28 18:34:30.484 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:30.485 +02:00 [ERR] Exception caught in middleware
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7b353dd7-2d98-47d3-875a-3f18b98e85b7
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 63
   at PulseERP.API.Controllers.ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:34:30.494 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0KRVCTAR:00000011)
2025-05-28 18:34:30.495 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/json 37.3246ms
2025-05-28 18:34:41.685 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 213
2025-05-28 18:34:41.704 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:41.709 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:34:41.735 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:34:41.746 +02:00 [INF] Created product "26c658fe-1aed-4585-9225-84e161b0df8c"
2025-05-28 18:34:41.748 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:34:41.750 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 40.3233ms
2025-05-28 18:34:41.750 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:41.753 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 67.9721ms
2025-05-28 18:34:48.226 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 203
2025-05-28 18:34:48.226 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:48.227 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:34:48.235 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:34:48.243 +02:00 [INF] Created product "cda6fde2-55f0-4a3e-b95e-00efe8579980"
2025-05-28 18:34:48.243 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:34:48.244 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 16.7458ms
2025-05-28 18:34:48.246 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:48.246 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 20.2748ms
2025-05-28 18:34:54.527 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 207
2025-05-28 18:34:54.528 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:54.528 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:34:54.530 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 1.9102ms
2025-05-28 18:34:54.530 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:34:54.531 +02:00 [ERR] Exception caught in middleware
System.NullReferenceException: Object reference not set to an instance of an object.
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 53
   at PulseERP.API.Controllers.ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:34:54.533 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0KRVCTAR:00000017)
2025-05-28 18:34:54.534 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/json 7.0013ms
2025-05-28 18:35:02.466 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 192
2025-05-28 18:35:02.468 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:35:02.468 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:35:02.500 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:35:02.508 +02:00 [INF] Created product "fd752e3b-6828-4012-b3e5-80b21fcb7d58"
2025-05-28 18:35:02.508 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:35:02.509 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 40.3286ms
2025-05-28 18:35:02.509 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:35:02.509 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 43.3117ms
2025-05-28 18:35:09.754 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 196
2025-05-28 18:35:09.755 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:35:09.755 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:35:09.770 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 18:35:09.780 +02:00 [INF] Created product "5a1644c5-0f87-48df-88b4-f9ba339dea18"
2025-05-28 18:35:09.780 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:35:09.781 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 25.4909ms
2025-05-28 18:35:09.781 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 18:35:09.784 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 27.2311ms
2025-05-28 18:35:14.697 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-05-28 18:35:14.699 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 18:35:14.699 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Products.ProductDto]]]] GetAll(PulseERP.Domain.Query.Products.ProductParams) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:35:14.711 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-05-28 18:35:14.746 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[BrandId1], [p0].[CreatedAt], [p0].[Description], [p0].[IsActive], [p0].[IsService], [p0].[Name], [p0].[Price], [p0].[Quantity], [p0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Name], [b].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
ORDER BY [p0].[Name]
2025-05-28 18:35:14.763 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:35:14.764 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API) in 64.601ms
2025-05-28 18:35:14.764 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 18:35:14.765 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 67.3998ms
2025-05-28 18:36:16.897 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-05-28 18:36:16.899 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 18:36:16.899 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Products.ProductDto]]]] GetAll(PulseERP.Domain.Query.Products.ProductParams) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:36:16.924 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-05-28 18:36:16.928 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[BrandId1], [p0].[CreatedAt], [p0].[Description], [p0].[IsActive], [p0].[IsService], [p0].[Name], [p0].[Price], [p0].[Quantity], [p0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Name], [b].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
ORDER BY [p0].[Name]
2025-05-28 18:36:16.929 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:36:16.929 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API) in 29.7113ms
2025-05-28 18:36:16.929 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 18:36:16.930 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 33.0066ms
2025-05-28 18:36:50.600 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:36:50.602 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:36:50.609 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:36:50.624 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 14.8474ms
2025-05-28 18:36:50.625 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:36:50.625 +02:00 [ERR] Exception caught in middleware
System.InvalidOperationException: AccessTokenExpirationMinutes must be a positive integer.
   at PulseERP.Infrastructure.Identity.Service.TokenService.ValidateJwtSettings(JwtSettings settings) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 55
   at PulseERP.Infrastructure.Identity.Service.TokenService..ctor(IConfiguration configuration, ITokenRepository tokenRepository, ILogger`1 logger) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 49
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method233(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:36:50.628 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0KRVCTAR:00000021)
2025-05-28 18:36:50.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 500 null application/json 29.1874ms
2025-05-28 18:37:01.906 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:37:01.908 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:37:01.908 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:37:01.921 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 12.0353ms
2025-05-28 18:37:01.921 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:37:01.922 +02:00 [ERR] Exception caught in middleware
System.InvalidOperationException: AccessTokenExpirationMinutes must be a positive integer.
   at PulseERP.Infrastructure.Identity.Service.TokenService.ValidateJwtSettings(JwtSettings settings) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 55
   at PulseERP.Infrastructure.Identity.Service.TokenService..ctor(IConfiguration configuration, ITokenRepository tokenRepository, ILogger`1 logger) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 49
   at InvokeStub_TokenService..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method233(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:37:01.923 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0KRVCTAR:00000023)
2025-05-28 18:37:01.924 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 500 null application/json 18.0573ms
2025-05-28 18:38:01.923 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:38:01.931 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:38:01.932 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:38:01.959 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 26.1823ms
2025-05-28 18:38:01.959 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:38:01.960 +02:00 [ERR] Exception caught in middleware
System.InvalidOperationException: AccessTokenExpirationMinutes must be a positive integer.
   at PulseERP.Infrastructure.Identity.Service.TokenService.ValidateJwtSettings(JwtSettings settings) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 55
   at PulseERP.Infrastructure.Identity.Service.TokenService..ctor(IConfiguration configuration, ITokenRepository tokenRepository, ILogger`1 logger) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 49
   at InvokeStub_TokenService..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method233(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:38:01.964 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0KRVCTAR:00000025)
2025-05-28 18:38:01.968 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 500 null application/json 44.6106ms
2025-05-28 18:40:02.224 +02:00 [INF] Application is shutting down...
2025-05-28 18:40:19.519 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 18:40:19.971 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 18:40:19.974 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 18:40:19.975 +02:00 [INF] Hosting environment: Development
2025-05-28 18:40:19.976 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 18:40:26.279 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:40:26.353 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:40:26.387 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:40:26.776 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 383.599ms
2025-05-28 18:40:26.796 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:40:26.799 +02:00 [ERR] Exception caught in middleware
System.InvalidOperationException: AccessTokenExpirationMinutes must be a positive integer.
   at PulseERP.Infrastructure.Identity.Service.TokenService.ValidateJwtSettings(JwtSettings settings) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 55
   at PulseERP.Infrastructure.Identity.Service.TokenService..ctor(IConfiguration configuration, ITokenRepository tokenRepository, ILogger`1 logger) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 49
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method13(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:40:26.830 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0PCKVFGP:00000001)
2025-05-28 18:40:26.929 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 500 null application/json 651.6818ms
2025-05-28 18:40:29.839 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:40:29.844 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:40:29.844 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:40:29.862 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 17.1491ms
2025-05-28 18:40:29.862 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:40:29.863 +02:00 [ERR] Exception caught in middleware
System.InvalidOperationException: AccessTokenExpirationMinutes must be a positive integer.
   at PulseERP.Infrastructure.Identity.Service.TokenService.ValidateJwtSettings(JwtSettings settings) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 55
   at PulseERP.Infrastructure.Identity.Service.TokenService..ctor(IConfiguration configuration, ITokenRepository tokenRepository, ILogger`1 logger) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 49
   at InvokeStub_TokenService..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method13(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:40:29.866 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0PCKVFGP:00000003)
2025-05-28 18:40:29.867 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 500 null application/json 28.1978ms
2025-05-28 18:44:22.261 +02:00 [INF] Application is shutting down...
2025-05-28 18:44:34.261 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 18:44:34.892 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 18:44:34.896 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 18:44:34.897 +02:00 [INF] Hosting environment: Development
2025-05-28 18:44:34.898 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 18:44:49.028 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:44:49.096 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:44:49.129 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:44:49.860 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 726.1059ms
2025-05-28 18:44:49.878 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:44:49.880 +02:00 [ERR] Exception caught in middleware
System.InvalidOperationException: RefreshTokenExpirationDays must be a positive integer.
   at PulseERP.Infrastructure.Identity.Service.TokenService.ValidateJwtSettings(JwtSettings settings) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 60
   at PulseERP.Infrastructure.Identity.Service.TokenService..ctor(IConfiguration configuration, ITokenRepository tokenRepository, ILogger`1 logger) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Identity/Service/TokenService.cs:line 49
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method13(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:44:49.906 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0RQUU6JH:00000001)
2025-05-28 18:44:50.005 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 500 null application/json 977.4017ms
2025-05-28 18:45:11.011 +02:00 [INF] Application is shutting down...
2025-05-28 18:45:17.941 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 18:45:18.380 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 18:45:18.383 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 18:45:18.383 +02:00 [INF] Hosting environment: Development
2025-05-28 18:45:18.384 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 18:45:37.488 +02:00 [INF] Application is shutting down...
2025-05-28 18:45:45.236 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 18:45:45.745 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 18:45:45.749 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 18:45:45.750 +02:00 [INF] Hosting environment: Development
2025-05-28 18:45:45.751 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 18:45:48.653 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:45:48.765 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:45:48.794 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:45:50.207 +02:00 [WRN] The property 'ApplicationUser.Email' was first mapped explicitly and then ignored. Consider not mapping the property in the first place.
2025-05-28 18:45:50.533 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 18:45:51.699 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 18:45:51.775 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 18:45:51.778 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 18:45:52.080 +02:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 18:45:52.146 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:45:52.300 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 3498.6403ms
2025-05-28 18:45:52.307 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:45:52.328 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 3678.1516ms
2025-05-28 18:46:26.515 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 113
2025-05-28 18:46:26.524 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 18:46:26.530 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:46:26.557 +02:00 [INF] Registering new user with email gmxfreak@gmail.com
2025-05-28 18:46:26.638 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 18:46:26.668 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 18:46:26.994 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (Size = 100), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 256), @p14='?' (Size = 256), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [LastName], [Phone], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-28 18:46:28.635 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-28 18:46:28.648 +02:00 [INF] Generating access token for user "29bb50fb-9b9c-41c3-85d9-08dd9e073031"
2025-05-28 18:46:28.678 +02:00 [INF] Access token generated for user "29bb50fb-9b9c-41c3-85d9-08dd9e073031" expiring at "2025-05-28T17:46:28.6561570Z"
2025-05-28 18:46:28.680 +02:00 [INF] Generating refresh token for user "29bb50fb-9b9c-41c3-85d9-08dd9e073031"
2025-05-28 18:46:28.726 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [Expires], [ReplacedByToken], [Revoked], [Token], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-28 18:46:28.727 +02:00 [INF] Refresh token generated for user "29bb50fb-9b9c-41c3-85d9-08dd9e073031" expiring at "2025-06-04T16:46:28.6806790Z"
2025-05-28 18:46:28.728 +02:00 [INF] User "29bb50fb-9b9c-41c3-85d9-08dd9e073031" registered successfully
2025-05-28 18:46:28.729 +02:00 [INF] Invitation email sent to gmxfreak@gmail.com
2025-05-28 18:46:28.732 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:46:28.756 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 2226.0193ms
2025-05-28 18:46:28.756 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 18:46:28.758 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 201 null application/json; charset=utf-8 2242.2445ms
2025-05-28 18:46:54.109 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:46:54.118 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:46:54.118 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:46:54.202 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 18:46:54.208 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 18:46:54.214 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:46:54.214 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 95.4781ms
2025-05-28 18:46:54.214 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:46:54.215 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 105.59ms
2025-05-28 18:49:12.316 +02:00 [INF] Application is shutting down...
2025-05-28 18:50:15.021 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 18:50:15.679 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 18:50:15.687 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 18:50:15.688 +02:00 [INF] Hosting environment: Development
2025-05-28 18:50:15.689 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 18:50:49.402 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 121
2025-05-28 18:50:49.479 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 18:50:49.507 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserInfo]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:50:49.929 +02:00 [INF] Registering new user with email inesmkk96@gmail.com
2025-05-28 18:50:50.431 +02:00 [WRN] The property 'ApplicationUser.Email' was first mapped explicitly and then ignored. Consider not mapping the property in the first place.
2025-05-28 18:50:50.696 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 18:50:51.890 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 18:50:51.955 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 18:50:52.256 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (Size = 100), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 256), @p14='?' (Size = 256), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [LastName], [Phone], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-28 18:50:54.490 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-28 18:50:54.503 +02:00 [INF] Generating access token for user "ac8378c2-06bb-4f58-8291-08dd9e07ce51"
2025-05-28 18:50:54.533 +02:00 [INF] Access token generated for user "ac8378c2-06bb-4f58-8291-08dd9e07ce51" expiring at "2025-05-28T17:50:54.5105470Z"
2025-05-28 18:50:54.535 +02:00 [INF] Generating refresh token for user "ac8378c2-06bb-4f58-8291-08dd9e07ce51"
2025-05-28 18:50:54.579 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [Expires], [ReplacedByToken], [Revoked], [Token], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-28 18:50:54.580 +02:00 [INF] Refresh token generated for user "ac8378c2-06bb-4f58-8291-08dd9e07ce51" expiring at "2025-06-04T16:50:54.5357350Z"
2025-05-28 18:50:54.581 +02:00 [INF] User "ac8378c2-06bb-4f58-8291-08dd9e07ce51" registered successfully
2025-05-28 18:50:54.582 +02:00 [INF] Invitation email sent to inesmkk96@gmail.com
2025-05-28 18:50:54.597 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 5085.9885ms
2025-05-28 18:50:54.601 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 18:50:54.604 +02:00 [ERR] Exception caught in middleware
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
AuthResponse -> UserInfo
PulseERP.Shared.Dtos.Auth.AuthResponse -> PulseERP.Shared.Dtos.Users.UserInfo
   at lambda_method383(Closure, Object, UserInfo, ResolutionContext)
   at PulseERP.Application.Services.UserService.CreateAsync(CreateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 62
   at PulseERP.API.Controllers.UsersController.Create(CreateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 56
   at lambda_method9(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 18:50:54.625 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU0V6BM18B:00000001)
2025-05-28 18:50:54.672 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 500 null application/json 5271.6067ms
2025-05-28 18:54:08.703 +02:00 [INF] Application is shutting down...
2025-05-28 18:54:25.994 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 18:54:27.086 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 18:54:27.091 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 18:54:27.092 +02:00 [INF] Hosting environment: Development
2025-05-28 18:54:27.093 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 18:55:33.906 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 121
2025-05-28 18:55:33.988 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 18:55:34.025 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserInfo]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:55:34.469 +02:00 [INF] Registering new user with email inesmkk96@gmail.com
2025-05-28 18:55:34.929 +02:00 [WRN] The property 'ApplicationUser.Email' was first mapped explicitly and then ignored. Consider not mapping the property in the first place.
2025-05-28 18:55:35.210 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 18:55:36.014 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 18:55:36.076 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 18:55:36.391 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (Size = 100), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 256), @p14='?' (Size = 256), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [LastName], [Phone], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-28 18:55:37.824 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-28 18:55:37.837 +02:00 [INF] Generating access token for user "4e5a3be5-0256-4644-8e13-08dd9e0877ab"
2025-05-28 18:55:37.867 +02:00 [INF] Access token generated for user "4e5a3be5-0256-4644-8e13-08dd9e0877ab" expiring at "2025-05-28T17:55:37.8447810Z"
2025-05-28 18:55:37.868 +02:00 [INF] Generating refresh token for user "4e5a3be5-0256-4644-8e13-08dd9e0877ab"
2025-05-28 18:55:37.913 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [Expires], [ReplacedByToken], [Revoked], [Token], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-28 18:55:37.915 +02:00 [INF] Refresh token generated for user "4e5a3be5-0256-4644-8e13-08dd9e0877ab" expiring at "2025-06-04T16:55:37.8694380Z"
2025-05-28 18:55:37.915 +02:00 [INF] User "4e5a3be5-0256-4644-8e13-08dd9e0877ab" registered successfully
2025-05-28 18:55:37.916 +02:00 [INF] Invitation email sent to inesmkk96@gmail.com
2025-05-28 18:55:37.929 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserInfo, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:55:37.980 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 3949.7257ms
2025-05-28 18:55:37.985 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 18:55:37.999 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 201 null application/json; charset=utf-8 4095.0956ms
2025-05-28 18:56:30.349 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 18:56:30.366 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:56:30.383 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 18:56:30.500 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 18:56:30.508 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 18:56:30.509 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 18:56:30.530 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 18:56:30.547 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:56:30.555 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 171.9869ms
2025-05-28 18:56:30.556 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 18:56:30.557 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 208.9752ms
2025-05-28 18:58:09.291 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 18:58:09.355 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 63.8835ms
2025-05-28 18:58:09.776 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 18:58:09.931 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 155.3037ms
2025-05-28 18:58:34.710 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products - null null
2025-05-28 18:58:34.716 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 18:58:34.726 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Products.ProductDto]]]] GetAll(PulseERP.Domain.Query.Products.ProductParams) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 18:58:34.775 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
2025-05-28 18:58:34.818 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p0].[Id], [p0].[BrandId], [p0].[BrandId1], [p0].[CreatedAt], [p0].[Description], [p0].[IsActive], [p0].[IsService], [p0].[Name], [p0].[Price], [p0].[Quantity], [p0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Name], [b].[UpdatedAt]
FROM (
    SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[UpdatedAt]
    FROM [Products] AS [p]
    ORDER BY [p].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [p0]
INNER JOIN [Brands] AS [b] ON [p0].[BrandId] = [b].[Id]
ORDER BY [p0].[Name]
2025-05-28 18:58:34.871 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 18:58:34.880 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API) in 153.6818ms
2025-05-28 18:58:34.880 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 18:58:34.881 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products - 200 null application/json; charset=utf-8 170.6915ms
2025-05-28 19:01:15.279 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 188
2025-05-28 19:01:15.282 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:01:15.287 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:01:15.362 +02:00 [ERR] Failed executing DbCommand (29ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 19:01:15.393 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-28 19:01:15.397 +02:00 [ERR] Error adding product 5f7a769b-032d-490c-bd5d-da5ce7592604
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
2025-05-28 19:01:15.406 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 118.6269ms
2025-05-28 19:01:15.407 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:01:15.410 +02:00 [ERR] Exception caught in middleware
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 63
   at PulseERP.API.Controllers.ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method537(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 19:01:15.448 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU11R4RSCS:00000001)
2025-05-28 19:01:15.455 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/json 175.8817ms
2025-05-28 19:03:16.389 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 188
2025-05-28 19:03:16.391 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:03:16.392 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:03:16.410 +02:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 19:03:16.413 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-28 19:03:16.416 +02:00 [ERR] Error adding product 82362a15-998d-4dc3-8711-65c27c155a27
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
2025-05-28 19:03:16.418 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 25.5455ms
2025-05-28 19:03:16.418 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:03:16.418 +02:00 [ERR] Exception caught in middleware
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 63
   at PulseERP.API.Controllers.ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method537(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 19:03:16.423 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU11R4RSCT:00000001)
2025-05-28 19:03:16.424 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/json 35.2084ms
2025-05-28 19:03:31.522 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 187
2025-05-28 19:03:31.524 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:03:31.524 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:03:31.551 +02:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 19:03:31.557 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-28 19:03:31.561 +02:00 [ERR] Error adding product abaa48db-0167-4fc6-b194-b77cc0512851
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
2025-05-28 19:03:31.573 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 48.2954ms
2025-05-28 19:03:31.574 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:03:31.575 +02:00 [ERR] Exception caught in middleware
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Apple).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 63
   at PulseERP.API.Controllers.ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method537(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 19:03:31.581 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU11R4RSCT:00000003)
2025-05-28 19:03:31.582 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/json 59.1326ms
2025-05-28 19:03:41.530 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 189
2025-05-28 19:03:41.531 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:03:41.532 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:03:41.542 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 19:03:41.565 +02:00 [INF] Created product "5d66e54d-3e06-4b9e-bd12-fdef85b8040e"
2025-05-28 19:03:41.568 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 19:03:41.582 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 50.1537ms
2025-05-28 19:03:41.582 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:03:41.583 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 52.3441ms
2025-05-28 19:04:04.986 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 189
2025-05-28 19:04:05.006 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:04:05.008 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:04:05.038 +02:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 19:04:05.049 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Metataa).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Metataa).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-28 19:04:05.075 +02:00 [ERR] Error adding product f3be298c-292b-4fd3-93da-e5443ae1bed7
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Metataa).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
2025-05-28 19:04:05.096 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 87.6204ms
2025-05-28 19:04:05.098 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:04:05.109 +02:00 [ERR] Exception caught in middleware
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Brands' with unique index 'IX_Brands_Name'. The duplicate key value is (Metataa).
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Brands_BrandId". The conflict occurred in database "PulseERP", table "dbo.Brands", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4ef0edbf-6664-4dff-af3d-663bbffc8403
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.ProductRepository.AddAsync(Product product) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/ProductRepository.cs:line 84
   at PulseERP.Application.Services.ProductService.CreateAsync(CreateProductRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/ProductService.cs:line 63
   at PulseERP.API.Controllers.ProductsController.Create(CreateProductRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/ProductsController.cs:line 56
   at lambda_method537(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 19:04:05.213 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU11R4RSCT:00000007)
2025-05-28 19:04:05.217 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 500 null application/json 230.1839ms
2025-05-28 19:04:12.634 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 190
2025-05-28 19:04:12.635 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:04:12.635 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:04:12.646 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (Size = 500), @p9='?' (DbType = Boolean), @p10='?' (Size = 100), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Brands] ([Id], [CreatedAt], [Name], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-28 19:04:12.654 +02:00 [INF] Created product "6bf44562-d859-4096-8618-114fad40545f"
2025-05-28 19:04:12.655 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 19:04:12.656 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 20.7785ms
2025-05-28 19:04:12.656 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:04:12.657 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 22.2673ms
2025-05-28 19:25:29.597 +02:00 [INF] Application is shutting down...
2025-05-28 19:27:06.057 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 19:27:07.403 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 19:27:07.412 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 19:27:07.413 +02:00 [INF] Hosting environment: Development
2025-05-28 19:27:07.414 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 19:27:25.300 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 187
2025-05-28 19:27:25.398 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:27:25.436 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:27:26.613 +02:00 [WRN] The property 'ApplicationUser.Email' was first mapped explicitly and then ignored. Consider not mapping the property in the first place.
2025-05-28 19:27:26.908 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 19:27:28.106 +02:00 [INF] Executed DbCommand (157ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__name_0
2025-05-28 19:27:28.492 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-05-28 19:27:28.529 +02:00 [INF] Created product "880f29f1-b06b-41fb-b02a-159d8db9bd31"
2025-05-28 19:27:28.548 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 19:27:28.633 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 3188.8261ms
2025-05-28 19:27:28.640 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:27:28.666 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 3367.9577ms
2025-05-28 19:27:38.507 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/products - application/json 187
2025-05-28 19:27:38.538 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:27:38.538 +02:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Products.ProductDto]]] Create(PulseERP.Shared.Dtos.Products.CreateProductRequest) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:27:38.569 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CreatedAt], [b].[Name], [b].[UpdatedAt]
FROM [Brands] AS [b]
WHERE [b].[Name] = @__name_0
2025-05-28 19:27:38.577 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [BrandId], [BrandId1], [CreatedAt], [Description], [IsService], [Name], [Price], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-05-28 19:27:38.578 +02:00 [INF] Created product "ce6ffcb4-6a45-4902-9fe0-f31a28f4a6d5"
2025-05-28 19:27:38.579 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 19:27:38.580 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.Create (PulseERP.API) in 41.5999ms
2025-05-28 19:27:38.581 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.Create (PulseERP.API)'
2025-05-28 19:27:38.581 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/products - 201 null application/json; charset=utf-8 74.5844ms
2025-05-28 19:27:50.407 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/products?Brand=Apple - null null
2025-05-28 19:27:50.424 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 19:27:50.440 +02:00 [INF] Route matched with {action = "GetAll", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Products.ProductDto]]]] GetAll(PulseERP.Domain.Query.Products.ProductParams) on controller PulseERP.API.Controllers.ProductsController (PulseERP.API).
2025-05-28 19:27:50.710 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__productParams_Brand_0_contains='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [b].[Name] LIKE @__productParams_Brand_0_contains ESCAPE N'\'
2025-05-28 19:27:50.772 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__productParams_Brand_0_contains='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[BrandId], [p].[BrandId1], [p].[CreatedAt], [p].[Description], [p].[IsActive], [p].[IsService], [p].[Name], [p].[Price], [p].[Quantity], [p].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Name], [b].[UpdatedAt]
FROM [Products] AS [p]
INNER JOIN [Brands] AS [b] ON [p].[BrandId] = [b].[Id]
WHERE [b].[Name] LIKE @__productParams_Brand_0_contains ESCAPE N'\'
ORDER BY [p].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-05-28 19:27:50.802 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Products.ProductDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 19:27:50.809 +02:00 [INF] Executed action PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API) in 367.9408ms
2025-05-28 19:27:50.809 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.ProductsController.GetAll (PulseERP.API)'
2025-05-28 19:27:50.810 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/products?Brand=Apple - 200 null application/json; charset=utf-8 402.4316ms
2025-05-28 19:28:05.770 +02:00 [INF] Application is shutting down...
2025-05-28 20:54:49.202 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 20:54:49.615 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 20:54:49.618 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 20:54:49.619 +02:00 [INF] Hosting environment: Development
2025-05-28 20:54:49.619 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 20:59:08.054 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 20:59:08.266 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 216.0176ms
2025-05-28 20:59:08.951 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 20:59:09.137 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 187.0554ms
2025-05-28 20:59:13.155 +02:00 [INF] Application is shutting down...
2025-05-28 20:59:26.406 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 20:59:26.750 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 20:59:26.753 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 20:59:26.753 +02:00 [INF] Hosting environment: Development
2025-05-28 20:59:26.753 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 20:59:46.110 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 20:59:46.213 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 104.7575ms
2025-05-28 20:59:46.364 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 20:59:46.519 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 155.5193ms
2025-05-28 21:03:38.641 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 21:03:38.671 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 21:03:38.727 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:03:39.673 +02:00 [WRN] The property 'ApplicationUser.Email' was first mapped explicitly and then ignored. Consider not mapping the property in the first place.
2025-05-28 21:03:39.930 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 21:03:40.762 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 21:03:40.804 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 21:03:40.805 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 21:03:40.885 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 21:03:40.925 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:03:40.970 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 2238.0308ms
2025-05-28 21:03:40.971 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 21:03:40.985 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 2343.6378ms
2025-05-28 21:04:29.874 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - null null
2025-05-28 21:04:29.881 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-05-28 21:04:29.894 +02:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] GetById(System.Guid) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:04:30.025 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:04:30.030 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:04:30.037 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetById (PulseERP.API) in 143.3006ms
2025-05-28 21:04:30.038 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetById (PulseERP.API)'
2025-05-28 21:04:30.038 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - 200 null application/json; charset=utf-8 163.8748ms
2025-05-28 21:05:33.001 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - application/json 56
2025-05-28 21:05:33.015 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:05:33.040 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:05:33.217 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:05:33.265 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__user_Id_0
2025-05-28 21:05:33.693 +02:00 [INF] Executed DbCommand (159ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DomainUsers] SET [FirstName] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-28 21:05:33.725 +02:00 [INF] Updated user "6747f589-685c-4fa4-aa62-321676abd226"
2025-05-28 21:05:33.727 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:05:33.728 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 687.0436ms
2025-05-28 21:05:33.728 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:05:33.729 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - 200 null application/json; charset=utf-8 728.4796ms
2025-05-28 21:06:06.033 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - application/json 32
2025-05-28 21:06:06.034 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:06:06.035 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:06:06.045 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:06:06.049 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__user_Id_0
2025-05-28 21:06:06.067 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 20), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DomainUsers] SET [Phone] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-28 21:06:06.068 +02:00 [INF] Updated user "6747f589-685c-4fa4-aa62-321676abd226"
2025-05-28 21:06:06.068 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:06:06.069 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 33.6948ms
2025-05-28 21:06:06.069 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:06:06.069 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - 200 null application/json; charset=utf-8 35.8188ms
2025-05-28 21:06:16.347 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - application/json 30
2025-05-28 21:06:16.348 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:06:16.349 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:06:16.364 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:06:16.370 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__user_Id_0
2025-05-28 21:06:16.384 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 20), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DomainUsers] SET [Phone] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-28 21:06:16.385 +02:00 [INF] Updated user "6747f589-685c-4fa4-aa62-321676abd226"
2025-05-28 21:06:16.386 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:06:16.386 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 36.9743ms
2025-05-28 21:06:16.387 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:06:16.387 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - 200 null application/json; charset=utf-8 39.9567ms
2025-05-28 21:09:27.949 +02:00 [INF] Application is shutting down...
2025-05-28 21:09:50.878 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 21:09:51.494 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 21:09:51.500 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 21:09:51.501 +02:00 [INF] Hosting environment: Development
2025-05-28 21:09:51.501 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 21:10:05.344 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - application/json 28
2025-05-28 21:10:05.414 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:10:05.602 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:10:06.883 +02:00 [WRN] The property 'ApplicationUser.Email' was first mapped explicitly and then ignored. Consider not mapping the property in the first place.
2025-05-28 21:10:07.164 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 21:10:08.082 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:10:08.122 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-28 21:10:08.152 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 2543.1358ms
2025-05-28 21:10:08.161 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:10:08.166 +02:00 [ERR] Exception caught in middleware
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.GetByIdAsync(Guid id) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 40
   at PulseERP.Application.Services.UserService.UpdateAsync(Guid id, UpdateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 66
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 73
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 21:10:08.205 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU3D0JVK93:00000001)
2025-05-28 21:10:08.293 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - 500 null application/json 2952.1086ms
2025-05-28 21:10:27.543 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - application/json 29
2025-05-28 21:10:27.550 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:10:27.550 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:10:27.587 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:10:27.588 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-28 21:10:27.589 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 38.2884ms
2025-05-28 21:10:27.589 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:10:27.590 +02:00 [ERR] Exception caught in middleware
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.GetByIdAsync(Guid id) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 40
   at PulseERP.Application.Services.UserService.UpdateAsync(Guid id, UpdateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 66
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 73
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 21:10:27.592 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU3D0JVK93:00000003)
2025-05-28 21:10:27.593 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - 500 null application/json 64.7316ms
2025-05-28 21:10:39.206 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - application/json 31
2025-05-28 21:10:39.213 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:10:39.214 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:10:39.301 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:10:39.302 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-28 21:10:39.303 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 88.4454ms
2025-05-28 21:10:39.303 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:10:39.303 +02:00 [ERR] Exception caught in middleware
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.GetByIdAsync(Guid id) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 40
   at PulseERP.Application.Services.UserService.UpdateAsync(Guid id, UpdateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 66
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 73
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 21:10:39.305 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU3D0JVK93:00000005)
2025-05-28 21:10:39.305 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - 500 null application/json 98.7261ms
2025-05-28 21:22:24.744 +02:00 [INF] Application is shutting down...
2025-05-28 21:22:39.215 +02:00 [INF] User profile is available. Using '/Users/inesmekkaoui/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-05-28 21:22:39.703 +02:00 [INF] Now listening on: https://localhost:7232
2025-05-28 21:22:39.709 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-28 21:22:39.710 +02:00 [INF] Hosting environment: Development
2025-05-28 21:22:39.710 +02:00 [INF] Content root path: /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API
2025-05-28 21:22:48.077 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - application/json 31
2025-05-28 21:22:48.128 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:22:48.149 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:22:49.082 +02:00 [WRN] The property 'ApplicationUser.Email' was first mapped explicitly and then ignored. Consider not mapping the property in the first place.
2025-05-28 21:22:49.399 +02:00 [WRN] The foreign key property 'Product.BrandId1' was created in shadow state because a conflicting property with the simple name 'BrandId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-28 21:22:50.380 +02:00 [INF] Executed DbCommand (64ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:22:50.419 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'PulseERP.Infrastructure.Database.CoreDbContext'.
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-28 21:22:50.449 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 2296.4552ms
2025-05-28 21:22:50.455 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:22:50.461 +02:00 [ERR] Exception caught in middleware
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at lambda_method40(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PulseERP.Infrastructure.Repositories.UserRepository.GetByIdAsync(Guid id) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Infrastructure/Repositories/UserRepository.cs:line 40
   at PulseERP.Application.Services.UserService.UpdateAsync(Guid id, UpdateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 66
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 73
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 21:22:50.478 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU3K3U1V49:00000001)
2025-05-28 21:22:50.552 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/6747f589-685c-4fa4-aa62-321676abd226 - 500 null application/json 2477.0011ms
2025-05-28 21:23:35.484 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/index.html - null null
2025-05-28 21:23:35.590 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/index.html - 200 null text/html;charset=utf-8 107.0404ms
2025-05-28 21:23:35.905 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - null null
2025-05-28 21:23:36.092 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.3576ms
2025-05-28 21:24:14.212 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7232/api/users - application/json 113
2025-05-28 21:24:14.226 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 21:24:14.243 +02:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserInfo]]] Create(PulseERP.Shared.Dtos.Users.CreateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:24:14.261 +02:00 [INF] Registering new user with email inesmkk96@gmail.com
2025-05-28 21:24:14.325 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-28 21:24:14.350 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DomainUserId], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-28 21:24:14.639 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 255), @p3='?' (Size = 100), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Guid), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 256), @p14='?' (Size = 256), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DomainUsers] ([Id], [CreatedAt], [Email], [FirstName], [LastName], [Phone], [UpdatedAt])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [DomainUserId], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-28 21:24:16.356 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-28 21:24:16.375 +02:00 [INF] Generating access token for user "7d80e7e9-8610-4ff3-ffbb-08dd9e1d3b5e"
2025-05-28 21:24:16.433 +02:00 [INF] Access token generated for user "7d80e7e9-8610-4ff3-ffbb-08dd9e1d3b5e" expiring at "2025-05-28T20:24:16.3922670Z"
2025-05-28 21:24:16.436 +02:00 [INF] Generating refresh token for user "7d80e7e9-8610-4ff3-ffbb-08dd9e1d3b5e"
2025-05-28 21:24:16.496 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [CreatedAt], [Expires], [ReplacedByToken], [Revoked], [Token], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-28 21:24:16.498 +02:00 [INF] Refresh token generated for user "7d80e7e9-8610-4ff3-ffbb-08dd9e1d3b5e" expiring at "2025-06-04T19:24:16.4378600Z"
2025-05-28 21:24:16.498 +02:00 [INF] User "7d80e7e9-8610-4ff3-ffbb-08dd9e1d3b5e" registered successfully
2025-05-28 21:24:16.499 +02:00 [INF] Invitation email sent to inesmkk96@gmail.com
2025-05-28 21:24:16.513 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserInfo, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:24:16.550 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Create (PulseERP.API) in 2306.2706ms
2025-05-28 21:24:16.551 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Create (PulseERP.API)'
2025-05-28 21:24:16.552 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7232/api/users - 201 null application/json; charset=utf-8 2339.5232ms
2025-05-28 21:24:31.129 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7232/api/users - null null
2025-05-28 21:24:31.135 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 21:24:31.143 +02:00 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Domain.Pagination.PaginationResult`1[PulseERP.Shared.Dtos.Users.UserDto]]]] GetAll(PulseERP.Domain.Pagination.PaginationParams) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:24:31.255 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DomainUsers] AS [d]
2025-05-28 21:24:31.261 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 21:24:31.261 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-28 21:24:31.270 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-28 21:24:31.284 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Domain.Pagination.PaginationResult`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PulseERP.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:24:31.289 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API) in 145.4728ms
2025-05-28 21:24:31.289 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.GetAll (PulseERP.API)'
2025-05-28 21:24:31.289 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7232/api/users - 200 null application/json; charset=utf-8 160.1449ms
2025-05-28 21:25:08.435 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/2bb66abc-558d-4f98-9bc8-80f0396e0478 - application/json 31
2025-05-28 21:25:08.439 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:25:08.439 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:25:08.454 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:25:08.493 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__user_Id_0
2025-05-28 21:25:08.515 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 20), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DomainUsers] SET [Phone] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-28 21:25:08.518 +02:00 [INF] Updated user "2bb66abc-558d-4f98-9bc8-80f0396e0478"
2025-05-28 21:25:08.520 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:25:08.522 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 81.9664ms
2025-05-28 21:25:08.522 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:25:08.522 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/2bb66abc-558d-4f98-9bc8-80f0396e0478 - 200 null application/json; charset=utf-8 87.6996ms
2025-05-28 21:25:22.979 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/2bb66abc-558d-4f98-9bc8-80f0396e0478 - application/json 30
2025-05-28 21:25:22.980 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:25:22.980 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:25:22.989 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:25:22.991 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 10.1412ms
2025-05-28 21:25:22.991 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:25:22.992 +02:00 [ERR] Exception caught in middleware
System.ArgumentException: Invalid phone number format. It must be digits only and optionally start with a '+'. (Parameter 'value')
   at PulseERP.Domain.ValueObjects.PhoneNumber.Create(String value) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Domain/ValueObjects/PhoneNumber.cs:line 27
   at PulseERP.Application.Services.UserService.UpdateAsync(Guid id, UpdateUserRequest command) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.Application/Services/UserService.cs:line 77
   at PulseERP.API.Controllers.UsersController.Update(Guid id, UpdateUserRequest request) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Controllers/UsersController.cs:line 73
   at lambda_method8(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/inesmekkaoui/Desktop/PulseERP/PulseERP.API/Middleware/GlobalExceptionHandlingMiddleware.cs:line 33
2025-05-28 21:25:22.995 +02:00 [ERR] Server error 500 [internal_server_error] - Internal Server Error (RequestId: 0HNCU3K3U1V49:0000000D)
2025-05-28 21:25:22.996 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/2bb66abc-558d-4f98-9bc8-80f0396e0478 - 500 null application/json 17.6809ms
2025-05-28 21:25:33.523 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7232/api/users/2bb66abc-558d-4f98-9bc8-80f0396e0478 - application/json 29
2025-05-28 21:25:33.524 +02:00 [INF] Executing endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:25:33.524 +02:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PulseERP.API.Dtos.ApiResponse`1[PulseERP.Shared.Dtos.Users.UserDto]]] Update(System.Guid, PulseERP.Shared.Dtos.Users.UpdateUserRequest) on controller PulseERP.API.Controllers.UsersController (PulseERP.API).
2025-05-28 21:25:33.550 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__id_0
2025-05-28 21:25:33.553 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CreatedAt], [d].[Email], [d].[FirstName], [d].[IsActive], [d].[LastName], [d].[Phone], [d].[UpdatedAt]
FROM [DomainUsers] AS [d]
WHERE [d].[Id] = @__user_Id_0
2025-05-28 21:25:33.561 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 20), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DomainUsers] SET [Phone] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-28 21:25:33.561 +02:00 [INF] Updated user "2bb66abc-558d-4f98-9bc8-80f0396e0478"
2025-05-28 21:25:33.562 +02:00 [INF] Executing OkObjectResult, writing value of type 'PulseERP.API.Dtos.ApiResponse`1[[PulseERP.Shared.Dtos.Users.UserDto, PulseERP.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-28 21:25:33.562 +02:00 [INF] Executed action PulseERP.API.Controllers.UsersController.Update (PulseERP.API) in 38.1651ms
2025-05-28 21:25:33.563 +02:00 [INF] Executed endpoint 'PulseERP.API.Controllers.UsersController.Update (PulseERP.API)'
2025-05-28 21:25:33.563 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7232/api/users/2bb66abc-558d-4f98-9bc8-80f0396e0478 - 200 null application/json; charset=utf-8 40.172ms
2025-05-28 21:26:08.502 +02:00 [INF] Application is shutting down...
